#!/bin/bash

# ğŸ§±ğŸŒ BLOCK-BY-BLOCK WORLD BUILDER LAUNCHER
# ==========================================
# Watch AI agents build worlds block by block with detailed construction phases

set -e

echo "ğŸ§±ğŸŒ BLOCK-BY-BLOCK WORLD BUILDER LAUNCHER"
echo "=========================================="
echo ""
echo "ğŸ¯ LAUNCHING DETAILED CONSTRUCTION VISUALIZATION"
echo "ğŸ¤– AI AGENTS BUILD WORLDS PIECE BY PIECE"
echo "ğŸ—ï¸ WATCH EVERY BLOCK GET PLACED IN REAL-TIME"
echo ""

# Check if the block world builder file exists
if [[ ! -f "block-world-builder.html" ]]; then
    echo "âŒ block-world-builder.html not found!"
    echo "   This file is required for the Block World Builder."
    exit 1
fi
echo "   âœ… Block World Builder system found"

# Function to open browser
open_builder() {
    local file_path="$(pwd)/block-world-builder.html"
    
    if [[ "$OSTYPE" == "darwin"* ]]; then
        open "$file_path"
        echo "   âœ… Block Builder opened in your default browser (macOS)"
    elif [[ "$OSTYPE" == "linux-gnu"* ]]; then
        xdg-open "$file_path" || sensible-browser "$file_path" || firefox "$file_path"
        echo "   âœ… Block Builder opened in your default browser (Linux)"
    elif [[ "$OSTYPE" == "msys" || "$OSTYPE" == "win32" ]]; then
        start "$file_path"
        echo "   âœ… Block Builder opened in your default browser (Windows)"
    else
        echo "   ğŸ“‹ Please manually open: $file_path"
    fi
}

echo "ğŸŒ Opening Block-by-Block World Builder..."
open_builder

echo ""
echo "ğŸ‰ BLOCK WORLD BUILDER IS ACTIVE!"
echo "================================="
echo ""

echo "ğŸ§± DETAILED CONSTRUCTION SYSTEM"
echo "==============================="
echo ""
echo "ğŸ—ï¸ WHAT YOU'LL SEE:"
echo "   â€¢ Every single block placed individually"
echo "   â€¢ AI agents coordinating construction phases"
echo "   â€¢ Real-time progress bars for each build phase"
echo "   â€¢ Particle effects when blocks are placed"
echo "   â€¢ Construction narration explaining each step"
echo ""

echo "ğŸ¤– AI CONSTRUCTION AGENTS"
echo "========================"
echo ""
echo "Your AI deploys specialized construction crews:"
echo ""
echo "ğŸ”¨ BUILDER AGENTS (Orange):"
echo "   â€¢ Place foundation and structural blocks"
echo "   â€¢ Handle heavy construction work"
echo "   â€¢ Coordinate with other agent types"
echo ""
echo "ğŸ¨ DESIGNER AGENTS (Blue):"
echo "   â€¢ Create architectural blueprints"
echo "   â€¢ Add decorative and aesthetic elements"
echo "   â€¢ Plan overall visual design"
echo ""
echo "ğŸ“‹ PLANNER AGENTS (Green):"
echo "   â€¢ Coordinate overall construction strategy"
echo "   â€¢ Manage resource allocation"
echo "   â€¢ Oversee project timelines"
echo ""

echo "ğŸ—ï¸ CONSTRUCTION PHASES"
echo "======================"
echo ""
echo "Every build follows a detailed 3-phase process:"
echo ""
echo "ğŸ“ PHASE 1 - FOUNDATION:"
echo "   â€¢ Ground preparation and base laying"
echo "   â€¢ Structural foundation blocks"
echo "   â€¢ Site preparation and surveying"
echo ""
echo "ğŸ§± PHASE 2 - STRUCTURE:"
echo "   â€¢ Wall construction and framing"
echo "   â€¢ Structural elements and support"
echo "   â€¢ Core building components"
echo ""
echo "ğŸ¨ PHASE 3 - DETAILS:"
echo "   â€¢ Decorative elements and finishing"
echo "   â€¢ Windows, doors, and accessories"
echo "   â€¢ Final touches and landscaping"
echo ""

echo "ğŸ  AVAILABLE CONSTRUCTION PROJECTS"
echo "=================================="
echo ""
echo "ğŸ  HOUSE:"
echo "   â€¢ Residential building with foundation, walls, roof"
echo "   â€¢ Multiple stories with windows and doors"
echo "   â€¢ Complete family home construction"
echo ""
echo "ğŸ—¼ TOWER:"
echo "   â€¢ Tall vertical structure with multiple floors"
echo "   â€¢ Floor-by-floor construction process" 
echo "   â€¢ Architectural details and crown features"
echo ""
echo "ğŸ™ï¸ CITY BLOCK:"
echo "   â€¢ Multiple buildings with different purposes"
echo "   â€¢ Residential, commercial, industrial zones"
echo "   â€¢ Urban planning and city landscaping"
echo ""
echo "ğŸ° CASTLE:"
echo "   â€¢ Medieval fortress with defensive walls"
echo "   â€¢ Corner towers and central keep"
echo "   â€¢ Battlements and architectural details"
echo ""
echo "ğŸŒ‰ BRIDGE:"
echo "   â€¢ Spanning structure with support pillars"
echo "   â€¢ Water placement and deck construction"
echo "   â€¢ Railings and safety features"
echo ""
echo "ğŸŒ¸ GARDEN:"
echo "   â€¢ Landscaped area with pathways"
echo "   â€¢ Different plant sections and features"
echo "   â€¢ Fountain and decorative elements"
echo ""
echo "ğŸ­ FACTORY:"
echo "   â€¢ Industrial facility with equipment"
echo "   â€¢ Smokestacks and machinery installation"
echo "   â€¢ Production facility layout"
echo ""

echo "ğŸ® INTERACTION METHODS"
echo "====================="
echo ""
echo "ğŸ¤ VOICE COMMANDS:"
echo "   Say things like:"
echo "   â€¢ \"Build me a house\""
echo "   â€¢ \"Construct a medieval castle\""
echo "   â€¢ \"Create a garden with flowers\""
echo "   â€¢ \"Make a tall tower\""
echo ""
echo "âŒ¨ï¸ TEXT COMMANDS:"
echo "   Type in the command box at the bottom:"
echo "   â€¢ \"Build a bridge over water\""
echo "   â€¢ \"Construct a factory with smokestacks\""
echo "   â€¢ \"Design a city block with multiple buildings\""
echo ""
echo "ğŸ–±ï¸ QUICK BUILD BUTTONS (Right Panel):"
echo "   â€¢ Click any structure type for instant construction"
echo "   â€¢ Watch the AI break down your choice into phases"
echo "   â€¢ See detailed construction progress"
echo ""

echo "ğŸ“Š MONITORING FEATURES"
echo "====================="
echo ""
echo "ğŸ—ï¸ CONSTRUCTION INFO (Top Left):"
echo "   â€¢ Current project being built"
echo "   â€¢ Total blocks placed so far"
echo "   â€¢ Number of active AI agents"
echo "   â€¢ Current build phase"
echo ""
echo "ğŸ“ˆ PROGRESS DISPLAY (Bottom Right):"
echo "   â€¢ Foundation completion percentage"
echo "   â€¢ Structure completion percentage"
echo "   â€¢ Details completion percentage"
echo "   â€¢ Overall project completion"
echo ""
echo "ğŸ¤– AI NARRATOR (Left Side):"
echo "   â€¢ Real-time construction commentary"
echo "   â€¢ Explains what agents are doing"
echo "   â€¢ Phase transition announcements"
echo "   â€¢ Block placement descriptions"
echo ""
echo "ğŸ“Š WORLD STATISTICS (Bottom Left):"
echo "   â€¢ Total blocks in the world"
echo "   â€¢ Breakdown by block type"
echo "   â€¢ Construction time elapsed"
echo "   â€¢ Build efficiency metrics"
echo ""

echo "ğŸ§± BLOCK TYPES & COLORS"
echo "======================="
echo ""
echo "ğŸŸ¤ FOUNDATION (Brown): Ground-level structural blocks"
echo "â¬œ WALL (Gray): Vertical structural elements"
echo "ğŸ”˜ STRUCTURE (Dark Gray): Core building components"
echo "ğŸ”´ DECORATION (Red): Aesthetic and finishing elements"
echo "ğŸŸ¢ NATURE (Green): Plants, trees, and organic elements"
echo "ğŸ”µ WATER (Blue): Water features and liquid elements"
echo "ğŸŸ¡ ENERGY (Yellow): Power systems and energy sources"
echo "ğŸŸ£ TECH (Purple): Technology and mechanical components"
echo ""

echo "âš¡ INTERACTIVE FEATURES"
echo "======================"
echo ""
echo "ğŸ–±ï¸ BLOCK INSPECTION:"
echo "   â€¢ Click any placed block to inspect it"
echo "   â€¢ See block type, position, and layer information"
echo "   â€¢ AI narrator explains the block's purpose"
echo ""
echo "ğŸ‘ï¸ AGENT MONITORING:"
echo "   â€¢ Watch colored dots move around (your AI agents)"
echo "   â€¢ See agents coordinate during construction"
echo "   â€¢ Agents appear and disappear based on need"
echo ""
echo "âœ¨ PARTICLE EFFECTS:"
echo "   â€¢ Visual effects when blocks are placed"
echo "   â€¢ Construction dust and placement indicators"
echo "   â€¢ Satisfying visual feedback for each action"
echo ""
echo "ğŸ—‘ï¸ WORLD MANAGEMENT:"
echo "   â€¢ Clear button to demolish everything"
echo "   â€¢ Start fresh with new construction projects"
echo "   â€¢ Watch demolition happen in reverse"
echo ""

echo "ğŸ¯ CONSTRUCTION SEQUENCE EXAMPLES"
echo "================================="
echo ""
echo "ğŸ  HOUSE CONSTRUCTION:"
echo "   1. ğŸ“ Foundation: 8Ã—6 grid of brown blocks"
echo "   2. ğŸ§± Walls: Perimeter walls, 2 stories high"
echo "   3. ğŸ  Roof: Gray structural blocks on top"
echo "   4. ğŸšª Details: Door, windows, finishing touches"
echo ""
echo "ğŸ° CASTLE CONSTRUCTION:"
echo "   1. ğŸ§± Outer Walls: Defensive perimeter construction"
echo "   2. ğŸ—¼ Corner Towers: Four defensive towers"
echo "   3. ğŸ‘‘ Central Keep: Main fortress building"
echo "   4. âš”ï¸ Details: Battlements, gate, decorations"
echo ""
echo "ğŸŒ‰ BRIDGE CONSTRUCTION:"
echo "   1. ğŸŒŠ Water Placement: Blue blocks for river"
echo "   2. ğŸ”¨ Foundation Pillars: Support structures"
echo "   3. ğŸŒ‰ Bridge Deck: Spanning structure"
echo "   4. ğŸ›¡ï¸ Railings: Safety and aesthetic elements"
echo ""

echo "ğŸ¤– AI BEHAVIOR PATTERNS"
echo "========================"
echo ""
echo "You'll observe these AI behaviors:"
echo ""
echo "ğŸ¯ STRATEGIC COORDINATION:"
echo "   â€¢ Planner agents appear first to survey"
echo "   â€¢ Builder agents deploy for heavy work"
echo "   â€¢ Designer agents add finishing touches"
echo ""
echo "âš¡ EFFICIENT CONSTRUCTION:"
echo "   â€¢ Blocks placed in logical sequence"
echo "   â€¢ Foundation before walls before details"
echo "   â€¢ Multiple agents working simultaneously"
echo ""
echo "ğŸ“Š PROGRESS REPORTING:"
echo "   â€¢ AI narrates every major step"
echo "   â€¢ Explains reasoning behind decisions"
echo "   â€¢ Reports completion percentages"
echo ""
echo "ğŸ”„ ADAPTIVE BUILDING:"
echo "   â€¢ Different agent types for different tasks"
echo "   â€¢ Construction speed varies by complexity"
echo "   â€¢ Smart resource allocation"
echo ""

echo "ğŸŒŸ THE EXPERIENCE"
echo "================="
echo ""
echo "This system shows you EXACTLY how your AI thinks about"
echo "construction projects. Instead of magic instant results,"
echo "you see the methodical, block-by-block process that"
echo "turns your ideas into reality."
echo ""
echo "ğŸ¯ YOU'LL EXPERIENCE:"
echo "   â€¢ Watching AI break down complex requests"
echo "   â€¢ Seeing systematic construction methodology"
echo "   â€¢ Understanding how AI coordinates multiple agents"
echo "   â€¢ Observing real-world building principles in action"
echo ""
echo "ğŸ§  AI DEMONSTRATES:"
echo "   â€¢ Logical construction sequencing"
echo "   â€¢ Resource management and coordination"
echo "   â€¢ Multi-agent collaboration patterns"
echo "   â€¢ Real-time problem solving and adaptation"
echo ""

echo "ğŸŠ BLOCK WORLD BUILDER IS READY!"
echo "================================="
echo ""
echo "Your browser should now show the Block World Builder."
echo ""
echo "ğŸ¤ Try a voice command like:"
echo "    \"Build me a castle with towers\""
echo ""
echo "ğŸ–±ï¸ Or click a Quick Build button on the right"
echo ""
echo "ğŸ‘ï¸ Watch as your AI agents coordinate to build"
echo "    your world block by block!"
echo ""
echo "ğŸ§± Every block tells a story of AI construction..."
echo ""

# Keep the script running to show completion message
echo "âœ¨ Block Builder is active! Close this terminal when done exploring."
echo ""
echo "Press Ctrl+C to close this message."

# Keep script alive to show the message
trap 'echo ""; echo "ğŸ§± Block World Builder remains active in your browser."; echo "ğŸ—ï¸ Continue exploring the detailed construction system!"; exit 0' SIGINT

# Infinite loop to keep script running until user presses Ctrl+C
while true; do
    sleep 60
    echo "ğŸ§± $(date): Block World Builder active - AI construction crews ready"
done