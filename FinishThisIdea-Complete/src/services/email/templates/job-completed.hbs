{{#> layout title="Job Completed Successfully"}}
  <table role="presentation" cellpadding="0" cellspacing="0" width="100%" style="margin: 0 auto;">
    <tr>
      <td align="center" style="padding: 40px 0;">
        <div style="background: #28a745; width: 80px; height: 80px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center;">
          <span style="font-size: 40px;">âœ¨</span>
        </div>
      </td>
    </tr>
    
    <tr>
      <td align="center" style="padding: 0 20px 30px;">
        <h1 style="margin: 0 0 10px; font-size: 28px; font-weight: 600; color: #1a1a1a;">
          Your Job is Complete!
        </h1>
        <p style="margin: 0; font-size: 16px; color: #666;">
          Your code has been successfully processed and improved.
        </p>
      </td>
    </tr>

    <tr>
      <td style="padding: 0 20px;">
        <div style="background: #f8f9fa; border-radius: 8px; padding: 30px; margin-bottom: 30px;">
          <h2 style="margin: 0 0 20px; font-size: 20px; font-weight: 600; color: #1a1a1a;">
            Job Summary
          </h2>
          
          <table width="100%" cellpadding="0" cellspacing="0">
            <tr>
              <td style="padding: 10px 0; border-bottom: 1px solid #e0e0e0;">
                <strong>Job Type:</strong>
              </td>
              <td align="right" style="padding: 10px 0; border-bottom: 1px solid #e0e0e0;">
                {{jobType}}
              </td>
            </tr>
            <tr>
              <td style="padding: 10px 0; border-bottom: 1px solid #e0e0e0;">
                <strong>Files Processed:</strong>
              </td>
              <td align="right" style="padding: 10px 0; border-bottom: 1px solid #e0e0e0;">
                {{filesProcessed}}
              </td>
            </tr>
            <tr>
              <td style="padding: 10px 0; border-bottom: 1px solid #e0e0e0;">
                <strong>Processing Time:</strong>
              </td>
              <td align="right" style="padding: 10px 0; border-bottom: 1px solid #e0e0e0;">
                {{processingTime}}
              </td>
            </tr>
            <tr>
              <td style="padding: 10px 0;">
                <strong>Quality Score:</strong>
              </td>
              <td align="right" style="padding: 10px 0;">
                <span style="color: {{#if (gte qualityScore 80)}}#28a745{{else if (gte qualityScore 60)}}#ffc107{{else}}#dc3545{{/if}}; font-weight: 600;">
                  {{qualityScore}}/100
                </span>
              </td>
            </tr>
          </table>
        </div>
      </td>
    </tr>

    {{#if improvements}}
    <tr>
      <td style="padding: 0 20px;">
        <div style="background: #e7f5ff; border: 1px solid #74c0fc; border-radius: 8px; padding: 20px; margin-bottom: 30px;">
          <h3 style="margin: 0 0 15px; font-size: 18px; font-weight: 600; color: #1864ab;">
            Key Improvements
          </h3>
          <ul style="margin: 0; padding: 0 0 0 20px; color: #495057;">
            {{#each improvements}}
            <li style="margin-bottom: 8px;">{{this}}</li>
            {{/each}}
          </ul>
        </div>
      </td>
    </tr>
    {{/if}}

    {{#if xpEarned}}
    <tr>
      <td style="padding: 0 20px;">
        <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 20px; margin-bottom: 30px; text-align: center;">
          <h3 style="margin: 0 0 10px; font-size: 18px; font-weight: 600; color: #856404;">
            Rewards Earned!
          </h3>
          <div style="display: flex; justify-content: center; gap: 30px;">
            <div>
              <div style="font-size: 24px; font-weight: 700; color: #856404;">+{{xpEarned}}</div>
              <div style="font-size: 14px; color: #856404;">XP</div>
            </div>
            <div>
              <div style="font-size: 24px; font-weight: 700; color: #856404;">+{{tokensEarned}}</div>
              <div style="font-size: 14px; color: #856404;">Tokens</div>
            </div>
          </div>
        </div>
      </td>
    </tr>
    {{/if}}

    <tr>
      <td align="center" style="padding: 0 20px 40px;">
        <a href="{{resultsUrl}}" style="display: inline-block; background: #007bff; color: white; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-weight: 600; font-size: 16px; margin-right: 10px;">
          View Results
        </a>
        <a href="{{downloadUrl}}" style="display: inline-block; background: #6c757d; color: white; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-weight: 600; font-size: 16px;">
          Download Code
        </a>
      </td>
    </tr>

    <tr>
      <td style="padding: 0 20px 40px;">
        <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
          <h4 style="margin: 0 0 10px; font-size: 16px; font-weight: 600; color: #1a1a1a;">
            Share Your Success!
          </h4>
          <p style="margin: 0 0 15px; font-size: 14px; color: #666;">
            Show off your improved code quality score and earn bonus tokens.
          </p>
          <div style="text-align: center;">
            <a href="{{shareUrl}}" style="display: inline-block; background: #1DA1F2; color: white; text-decoration: none; padding: 10px 20px; border-radius: 6px; font-size: 14px; margin: 0 5px;">
              Share on Twitter
            </a>
            <a href="{{showcaseUrl}}" style="display: inline-block; background: #7289DA; color: white; text-decoration: none; padding: 10px 20px; border-radius: 6px; font-size: 14px; margin: 0 5px;">
              Add to Showcase
            </a>
          </div>
        </div>
      </td>
    </tr>
  </table>
{{/layout}}