<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Executive OS Dashboard - AI CEO Command Center</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 50%, #1a1a1a 100%);
            color: #ffffff;
            overflow-x: hidden;
        }

        .dashboard-container {
            display: grid;
            grid-template-columns: 250px 1fr 300px;
            grid-template-rows: 60px 1fr;
            height: 100vh;
            gap: 10px;
            padding: 10px;
        }

        .header {
            grid-column: 1 / -1;
            background: linear-gradient(90deg, #0066cc, #004499);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 4px 15px rgba(0, 102, 204, 0.3);
        }

        .header h1 {
            font-size: 24px;
            font-weight: 300;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #00ff00;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .system-time {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 10px;
            border-radius: 4px;
        }

        .sidebar {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: repeat(4, 1fr);
            gap: 10px;
        }

        .panel {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .panel h3 {
            margin-bottom: 15px;
            color: #00ccff;
            font-size: 16px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .panel-icon {
            width: 20px;
            height: 20px;
            background: currentColor;
            mask-size: contain;
            mask-repeat: no-repeat;
            mask-position: center;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .metric {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }

        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #00ff88;
        }

        .metric-label {
            font-size: 12px;
            color: #cccccc;
            margin-top: 5px;
        }

        .faction-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .faction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
            border-left: 4px solid;
        }

        .faction-tech { border-left-color: #0099ff; }
        .faction-creative { border-left-color: #ff6600; }
        .faction-corporate { border-left-color: #666666; }
        .faction-traditional { border-left-color: #cc9900; }
        .faction-neutral { border-left-color: #00cc66; }

        .weather-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
        }

        .weather-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }

        .weather-temp {
            font-size: 18px;
            font-weight: bold;
            color: #00ccff;
        }

        .weather-condition {
            font-size: 11px;
            color: #cccccc;
            margin-top: 5px;
        }

        .decision-log {
            max-height: 150px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        .decision-entry {
            padding: 4px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .decision-time {
            color: #666;
        }

        .decision-text {
            color: #fff;
            margin-left: 10px;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .control-section {
            margin-bottom: 25px;
        }

        .control-section h4 {
            color: #00ccff;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .button {
            background: linear-gradient(135deg, #0066cc, #0099ff);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin: 2px;
            transition: all 0.3s ease;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 102, 204, 0.4);
        }

        .button.secondary {
            background: linear-gradient(135deg, #666, #888);
        }

        .button.danger {
            background: linear-gradient(135deg, #cc0000, #ff3333);
        }

        .persona-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
            margin-bottom: 10px;
        }

        .persona-btn {
            padding: 6px;
            font-size: 11px;
            border-radius: 3px;
        }

        .persona-btn.active {
            background: linear-gradient(135deg, #00cc66, #00ff88);
            box-shadow: 0 0 10px rgba(0, 204, 102, 0.5);
        }

        .chat-interface {
            margin-top: 20px;
        }

        .chat-messages {
            height: 200px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        .chat-input {
            display: flex;
            gap: 5px;
        }

        .chat-input input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px;
            border-radius: 4px;
        }

        .chat-input input::placeholder {
            color: #666;
        }

        .alert {
            position: fixed;
            top: 80px;
            right: 20px;
            background: linear-gradient(135deg, #ff6600, #ff9933);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ff3300;
            box-shadow: 0 4px 15px rgba(255, 102, 0, 0.4);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.5s ease;
        }

        .alert.show {
            transform: translateX(0);
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00cc66, #00ff88);
            width: 0%;
            transition: width 0.3s ease;
        }

        .data-stream {
            font-family: 'Courier New', monospace;
            font-size: 10px;
            color: #00ff88;
            height: 100px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            padding: 5px;
        }

        .connection-status {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .connection-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ff3333;
        }

        .connection-dot.connected {
            background: #00ff88;
            animation: pulse 2s infinite;
        }

        .api-endpoints {
            font-size: 11px;
            max-height: 100px;
            overflow-y: auto;
        }

        .endpoint {
            display: flex;
            justify-content: space-between;
            padding: 2px 0;
        }

        .endpoint-method {
            color: #00ccff;
        }

        .endpoint-status {
            color: #00ff88;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .large-panel {
            grid-row: span 2;
        }

        /* Responsive design */
        @media (max-width: 1200px) {
            .dashboard-container {
                grid-template-columns: 200px 1fr 250px;
            }
        }

        @media (max-width: 768px) {
            .dashboard-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto;
            }
            
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <div class="header">
            <h1>
                <div class="status-indicator"></div>
                Executive OS Dashboard
            </h1>
            <div class="header-controls">
                <div class="system-time" id="systemTime">00:00:00</div>
                <button class="button" onclick="refreshAll()">Refresh All</button>
                <button class="button danger" onclick="emergencyMode()">Emergency Mode</button>
            </div>
        </div>

        <!-- Left Sidebar -->
        <div class="sidebar">
            <h3>🌐 System Status</h3>
            <div class="connection-status">
                <div class="connection-dot" id="executiveConnection" title="Executive OS Core"></div>
                <div class="connection-dot" id="weatherConnection" title="Weather System"></div>
                <div class="connection-dot" id="factionConnection" title="Faction Manager"></div>
                <div class="connection-dot" id="dataConnection" title="Data Processor"></div>
            </div>

            <div class="metrics-grid">
                <div class="metric">
                    <div class="metric-value" id="systemUptime">00:00</div>
                    <div class="metric-label">Uptime</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="activeDecisions">0</div>
                    <div class="metric-label">Decisions</div>
                </div>
            </div>

            <h4>🔗 API Endpoints</h4>
            <div class="api-endpoints" id="apiEndpoints">
                <div class="endpoint">
                    <span class="endpoint-method">GET /status</span>
                    <span class="endpoint-status">200</span>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">POST /decision</span>
                    <span class="endpoint-status">200</span>
                </div>
                <div class="endpoint">
                    <span class="endpoint-method">GET /weather</span>
                    <span class="endpoint-status">200</span>
                </div>
            </div>

            <h4>📊 Data Stream</h4>
            <div class="data-stream" id="dataStream">
                Initializing data stream...<br>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Executive AI Status -->
            <div class="panel">
                <h3>
                    <div class="panel-icon" style="mask-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><path d=%22M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1L13.5 2.5L16.17 5.17L10.5 10.84L11.92 12.25L15.92 8.25L18.5 10.84L21 9Z%22/%3E%3C/svg%3E');"></div>
                    Executive AI Status
                </h3>
                <div class="metrics-grid">
                    <div class="metric">
                        <div class="metric-value" id="aiConfidence">87%</div>
                        <div class="metric-label">Confidence</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="aiPersona">Tech</div>
                        <div class="metric-label">Active Persona</div>
                    </div>
                </div>
                <div>Current Mood: <span id="aiMood">Focused</span></div>
                <div>Last Decision: <span id="lastDecision">Resource allocation approved</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="aiProcessing" style="width: 75%;"></div>
                </div>
            </div>

            <!-- Weather Monitoring -->
            <div class="panel">
                <h3>
                    <div class="panel-icon" style="mask-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><path d=%22M6.5 20C4.22 20 2.44 18.2 2.5 15.9C2.56 13.84 4.27 12.12 6.5 12.12C7.13 12.12 7.73 12.28 8.25 12.58C9.57 10.27 12.12 8.58 15.04 8.58C18.47 8.58 21.5 11.84 21.5 15.5C21.5 16.28 21.33 17.04 21.04 17.72C21.9 18.4 22.5 19.45 22.5 20.5H6.5V20Z%22/%3E%3C/svg%3E');"></div>
                    Territory Weather
                </h3>
                <div class="weather-grid" id="weatherGrid">
                    <div class="weather-card">
                        <div class="weather-temp">22°C</div>
                        <div class="weather-condition">Tech Valley<br>Cloudy</div>
                    </div>
                    <div class="weather-card">
                        <div class="weather-temp">18°C</div>
                        <div class="weather-condition">Creative<br>Sunny</div>
                    </div>
                    <div class="weather-card">
                        <div class="weather-temp">15°C</div>
                        <div class="weather-condition">Corporate<br>Rainy</div>
                    </div>
                    <div class="weather-card">
                        <div class="weather-temp">20°C</div>
                        <div class="weather-condition">Traditional<br>Fog</div>
                    </div>
                </div>
                <div style="margin-top: 10px; font-size: 12px;">
                    Active Events: <span id="weatherEvents">Storm in Corporate District</span>
                </div>
            </div>

            <!-- Faction Management -->
            <div class="panel">
                <h3>
                    <div class="panel-icon" style="mask-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><path d=%22M16 4C18.2 4 20 5.8 20 8S18.2 12 16 12 12 10.2 12 8 13.8 4 16 4M16 14C20.4 14 24 15.8 24 18V20H8V18C8 15.8 11.6 14 16 14M8.5 4C10.7 4 12.5 5.8 12.5 8S10.7 12 8.5 12 4.5 10.2 4.5 8 6.3 4 8.5 4M8.5 14C12.9 14 16.5 15.8 16.5 18V20H.5V18C.5 15.8 4.1 14 8.5 14Z%22/%3E%3C/svg%3E');"></div>
                    Faction Status
                </h3>
                <div class="faction-list" id="factionList">
                    <div class="faction-item faction-tech">
                        <div>
                            <div>Tech Collective</div>
                            <div style="font-size: 11px; color: #ccc;">Resources: 85% | Morale: High</div>
                        </div>
                        <div style="font-size: 12px;">🔧</div>
                    </div>
                    <div class="faction-item faction-creative">
                        <div>
                            <div>Creative Guild</div>
                            <div style="font-size: 11px; color: #ccc;">Resources: 72% | Morale: High</div>
                        </div>
                        <div style="font-size: 12px;">🎨</div>
                    </div>
                    <div class="faction-item faction-corporate">
                        <div>
                            <div>Corporate Empire</div>
                            <div style="font-size: 11px; color: #ccc;">Resources: 91% | Morale: Med</div>
                        </div>
                        <div style="font-size: 12px;">💼</div>
                    </div>
                    <div class="faction-item faction-traditional">
                        <div>
                            <div>Ancient Order</div>
                            <div style="font-size: 11px; color: #ccc;">Resources: 68% | Morale: High</div>
                        </div>
                        <div style="font-size: 12px;">⚡</div>
                    </div>
                </div>
            </div>

            <!-- Decision Engine -->
            <div class="panel">
                <h3>
                    <div class="panel-icon" style="mask-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><path d=%22M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7V17C3 18.1 3.9 19 5 19H19C20.1 19 21 18.1 21 17V7C21 6.65 20.9 6.32 20.72 6.06L17.63 5.84ZM7 15.5C6.17 15.5 5.5 14.83 5.5 14S6.17 12.5 7 12.5 8.5 13.17 8.5 14 7.83 15.5 7 15.5ZM7 10.5C6.17 10.5 5.5 9.83 5.5 9S6.17 7.5 7 7.5 8.5 8.17 8.5 9 7.83 10.5 7 10.5ZM17 14.5C16.17 14.5 15.5 13.83 15.5 13S16.17 11.5 17 11.5 18.5 12.17 18.5 13 17.83 14.5 17 14.5ZM17 9.5C16.17 9.5 15.5 8.83 15.5 8S16.17 6.5 17 6.5 18.5 7.17 18.5 8 17.83 9.5 17 9.5Z%22/%3E%3C/svg%3E');"></div>
                    Decision Engine
                </h3>
                <div class="metrics-grid">
                    <div class="metric">
                        <div class="metric-value" id="decisionSpeed">1.2s</div>
                        <div class="metric-label">Avg Speed</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="decisionAccuracy">94%</div>
                        <div class="metric-label">Accuracy</div>
                    </div>
                </div>
                <div class="decision-log" id="decisionLog">
                    <div class="decision-entry">
                        <span class="decision-time">15:42:33</span>
                        <span class="decision-text">Resource allocation: Tech +15%, Creative +10%</span>
                    </div>
                    <div class="decision-entry">
                        <span class="decision-time">15:41:12</span>
                        <span class="decision-text">Weather alert: Storm protocols activated</span>
                    </div>
                    <div class="decision-entry">
                        <span class="decision-time">15:39:45</span>
                        <span class="decision-text">Persona switch: Corporate → Neutral</span>
                    </div>
                </div>
            </div>

            <!-- Data Processing -->
            <div class="panel">
                <h3>
                    <div class="panel-icon" style="mask-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><path d=%22M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20Z%22/%3E%3C/svg%3E');"></div>
                    Data Processing
                </h3>
                <div class="metrics-grid">
                    <div class="metric">
                        <div class="metric-value" id="dataVolume">2.3GB</div>
                        <div class="metric-label">Processed</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="dataFormats">7</div>
                        <div class="metric-label">Formats</div>
                    </div>
                </div>
                <div style="font-size: 12px;">
                    Queue: <span id="processingQueue">3 jobs</span><br>
                    Last: <span id="lastProcessed">customer_data.jsonl</span><br>
                    Quality: <span id="dataQuality">96.2%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="dataProgress" style="width: 45%;"></div>
                </div>
            </div>

            <!-- Resource Monitor -->
            <div class="panel large-panel">
                <h3>
                    <div class="panel-icon" style="mask-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><path d=%22M3 3H21C21.6 3 22 3.4 22 4V20C22 20.6 21.6 21 21 21H3C2.4 21 2 20.6 2 20V4C2 3.4 2.4 3 3 3ZM13.2 12.2L9.5 8.5L7.5 10.5L4 7L5.5 5.5L7.5 7.5L13.2 13.2L18.5 7.9L20 9.4L13.2 16.2V12.2Z%22/%3E%3C/svg%3E');"></div>
                    Global Resource Monitor
                </h3>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
                    <div class="metric">
                        <div class="metric-value" id="totalResources">847</div>
                        <div class="metric-label">Total Resources</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="activeOperations">23</div>
                        <div class="metric-label">Active Operations</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="systemEfficiency">87%</div>
                        <div class="metric-label">System Efficiency</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="threatLevel">Low</div>
                        <div class="metric-label">Threat Level</div>
                    </div>
                </div>
                
                <h4 style="color: #00ccff; margin-bottom: 10px;">Resource Distribution by Territory</h4>
                <div id="resourceChart" style="height: 120px; background: rgba(0,0,0,0.2); border-radius: 4px; display: flex; align-items: end; justify-content: space-around; padding: 10px;">
                    <div style="width: 40px; background: linear-gradient(to top, #0099ff, #00ccff); height: 80%; border-radius: 2px;" title="Tech Valley"></div>
                    <div style="width: 40px; background: linear-gradient(to top, #ff6600, #ff9933); height: 65%; border-radius: 2px;" title="Creative District"></div>
                    <div style="width: 40px; background: linear-gradient(to top, #666666, #999999); height: 95%; border-radius: 2px;" title="Corporate Towers"></div>
                    <div style="width: 40px; background: linear-gradient(to top, #cc9900, #ffcc33); height: 70%; border-radius: 2px;" title="Traditional Lands"></div>
                    <div style="width: 40px; background: linear-gradient(to top, #00cc66, #00ff88); height: 55%; border-radius: 2px;" title="Neutral Zone"></div>
                </div>
            </div>

            <!-- Event Timeline -->
            <div class="panel">
                <h3>
                    <div class="panel-icon" style="mask-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><path d=%22M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2M16.2 16.2L11 13V7H12.5V12.2L17 14.9L16.2 16.2Z%22/%3E%3C/svg%3E');"></div>
                    Recent Events
                </h3>
                <div class="decision-log" id="eventTimeline">
                    <div class="decision-entry">
                        <span class="decision-time">15:43:00</span>
                        <span class="decision-text">🌩️ Storm system approaching Corporate District</span>
                    </div>
                    <div class="decision-entry">
                        <span class="decision-time">15:42:15</span>
                        <span class="decision-text">💼 Resource negotiation completed with Creative Guild</span>
                    </div>
                    <div class="decision-entry">
                        <span class="decision-time">15:41:30</span>
                        <span class="decision-text">🤖 AI Persona switch: Tech → Neutral for mediation</span>
                    </div>
                    <div class="decision-entry">
                        <span class="decision-time">15:40:45</span>
                        <span class="decision-text">📊 Data processing completed: market_analysis.yaml</span>
                    </div>
                    <div class="decision-entry">
                        <span class="decision-time">15:39:12</span>
                        <span class="decision-text">⚡ Traditional faction requested wisdom council</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Control Panel -->
        <div class="control-panel">
            <div class="control-section">
                <h4>🎭 AI Persona Control</h4>
                <div class="persona-selector">
                    <button class="button persona-btn" onclick="switchPersona('tech')">Tech Oracle</button>
                    <button class="button persona-btn" onclick="switchPersona('creative')">Creative Muse</button>
                    <button class="button persona-btn" onclick="switchPersona('corporate')">Corporate</button>
                    <button class="button persona-btn" onclick="switchPersona('traditional')">Ancient</button>
                    <button class="button persona-btn active" onclick="switchPersona('neutral')">Neutral</button>
                    <button class="button persona-btn" onclick="switchPersona('auto')">Auto-Adapt</button>
                </div>
            </div>

            <div class="control-section">
                <h4>⚡ Quick Actions</h4>
                <button class="button" onclick="triggerResourceRebalance()">Rebalance Resources</button>
                <button class="button" onclick="initiateFactionsNegotiation()">Start Negotiation</button>
                <button class="button secondary" onclick="generateReport()">Generate Report</button>
                <button class="button secondary" onclick="analyzeMarket()">Market Analysis</button>
            </div>

            <div class="control-section">
                <h4>🌍 Weather Controls</h4>
                <button class="button" onclick="weatherUpdate()">Force Update</button>
                <button class="button" onclick="triggerWeatherEvent()">Simulate Event</button>
                <button class="button secondary" onclick="forecastMode()">Forecast Mode</button>
            </div>

            <div class="control-section">
                <h4>🔧 System Controls</h4>
                <button class="button" onclick="systemDiagnostics()">Run Diagnostics</button>
                <button class="button secondary" onclick="backupSystem()">Backup Data</button>
                <button class="button danger" onclick="emergencyShutdown()">Emergency Stop</button>
            </div>

            <!-- Executive AI Chat Interface -->
            <div class="chat-interface">
                <h4>🤖 Executive AI Chat</h4>
                <div class="chat-messages" id="chatMessages">
                    <div style="color: #00ccff;">[AI CEO]</div>
                    <div>Executive OS online and ready for operations. How may I assist you today?</div>
                    <br>
                    <div style="color: #00ff88;">[You]</div>
                    <div>System status report please.</div>
                    <br>
                    <div style="color: #00ccff;">[AI CEO]</div>
                    <div>All systems operational. 5 territories monitored, resource allocation at 87% efficiency. Recommend weather monitoring due to incoming storm system.</div>
                </div>
                <div class="chat-input">
                    <input type="text" id="chatInput" placeholder="Ask the AI CEO..." onkeypress="handleChatInput(event)">
                    <button class="button" onclick="sendChatMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Alert System -->
    <div class="alert" id="alertSystem">
        <div style="font-weight: bold;">⚠️ System Alert</div>
        <div id="alertMessage">Storm approaching Corporate District</div>
    </div>

    <script>
        // WebSocket connections
        let executiveWS = null;
        let weatherWS = null;
        let factionWS = null;
        let dataWS = null;

        // System state
        let systemState = {
            uptime: 0,
            activeDecisions: 0,
            currentPersona: 'neutral',
            aiMood: 'focused',
            connectionStates: {
                executive: false,
                weather: false,
                faction: false,
                data: false
            }
        };

        // Initialize dashboard
        function initDashboard() {
            console.log('🚀 Initializing Executive OS Dashboard...');
            
            updateSystemTime();
            setInterval(updateSystemTime, 1000);
            
            // Try to connect to all services
            connectToServices();
            
            // Start simulated data updates
            startDataSimulation();
            
            // Show initial alert
            setTimeout(() => {
                showAlert('Dashboard initialized successfully', 'success');
            }, 1000);
        }

        function updateSystemTime() {
            const now = new Date();
            document.getElementById('systemTime').textContent = now.toLocaleTimeString();
            
            // Update uptime (simulated)
            systemState.uptime += 1;
            const hours = Math.floor(systemState.uptime / 3600);
            const minutes = Math.floor((systemState.uptime % 3600) / 60);
            document.getElementById('systemUptime').textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
        }

        function connectToServices() {
            // Executive OS Core
            try {
                executiveWS = new WebSocket('ws://localhost:9001');
                executiveWS.onopen = () => updateConnectionStatus('executive', true);
                executiveWS.onclose = () => updateConnectionStatus('executive', false);
                executiveWS.onmessage = handleExecutiveMessage;
            } catch (e) {
                console.log('Executive service not available, using simulation mode');
            }

            // Weather Service
            try {
                weatherWS = new WebSocket('ws://localhost:9003');
                weatherWS.onopen = () => updateConnectionStatus('weather', true);
                weatherWS.onclose = () => updateConnectionStatus('weather', false);
                weatherWS.onmessage = handleWeatherMessage;
            } catch (e) {
                console.log('Weather service not available, using simulation mode');
            }

            // Faction Service
            try {
                factionWS = new WebSocket('ws://localhost:9002');
                factionWS.onopen = () => updateConnectionStatus('faction', true);
                factionWS.onclose = () => updateConnectionStatus('faction', false);
                factionWS.onmessage = handleFactionMessage;
            } catch (e) {
                console.log('Faction service not available, using simulation mode');
            }

            // Data Processing Service
            try {
                dataWS = new WebSocket('ws://localhost:9004');
                dataWS.onopen = () => updateConnectionStatus('data', true);
                dataWS.onclose = () => updateConnectionStatus('data', false);
                dataWS.onmessage = handleDataMessage;
            } catch (e) {
                console.log('Data service not available, using simulation mode');
            }
        }

        function updateConnectionStatus(service, connected) {
            systemState.connectionStates[service] = connected;
            const element = document.getElementById(`${service}Connection`);
            if (element) {
                if (connected) {
                    element.classList.add('connected');
                } else {
                    element.classList.remove('connected');
                }
            }
            
            logToDataStream(`${service.toUpperCase()}: ${connected ? 'CONNECTED' : 'DISCONNECTED'}`);
        }

        function handleExecutiveMessage(event) {
            try {
                const data = JSON.parse(event.data);
                
                switch (data.type) {
                    case 'decision_made':
                        systemState.activeDecisions++;
                        document.getElementById('activeDecisions').textContent = systemState.activeDecisions;
                        addDecisionToLog(data.decision);
                        break;
                        
                    case 'persona_switched':
                        systemState.currentPersona = data.persona;
                        document.getElementById('aiPersona').textContent = data.persona;
                        updatePersonaButtons();
                        break;
                        
                    case 'ai_state_update':
                        updateAIStatus(data.state);
                        break;
                }
            } catch (e) {
                console.error('Error parsing executive message:', e);
            }
        }

        function handleWeatherMessage(event) {
            try {
                const data = JSON.parse(event.data);
                
                switch (data.type) {
                    case 'weather_update':
                        updateWeatherDisplay(data.territories);
                        break;
                        
                    case 'weather_event':
                        showAlert(`Weather Event: ${data.event.type} in ${data.event.territory}`, 'warning');
                        logToEventTimeline(`🌩️ ${data.event.narrative}`);
                        break;
                        
                    case 'weather_alert':
                        data.alerts.forEach(alert => {
                            showAlert(alert.message, 'warning');
                        });
                        break;
                }
            } catch (e) {
                console.error('Error parsing weather message:', e);
            }
        }

        function handleFactionMessage(event) {
            try {
                const data = JSON.parse(event.data);
                
                switch (data.type) {
                    case 'resource_update':
                        updateFactionDisplay(data.factions);
                        break;
                        
                    case 'negotiation_started':
                        logToEventTimeline(`💼 Negotiation started: ${data.participants.join(' vs ')}`);
                        break;
                        
                    case 'territory_event':
                        logToEventTimeline(`🏛️ Territory event: ${data.description}`);
                        break;
                }
            } catch (e) {
                console.error('Error parsing faction message:', e);
            }
        }

        function handleDataMessage(event) {
            try {
                const data = JSON.parse(event.data);
                
                switch (data.type) {
                    case 'data_processed':
                        updateDataProcessingDisplay(data);
                        break;
                        
                    case 'processing_complete':
                        document.getElementById('lastProcessed').textContent = data.filename;
                        logToEventTimeline(`📊 Data processed: ${data.filename}`);
                        break;
                }
            } catch (e) {
                console.error('Error parsing data message:', e);
            }
        }

        function startDataSimulation() {
            // Simulate real-time data updates
            setInterval(() => {
                // Update AI processing bar
                const processing = document.getElementById('aiProcessing');
                const currentWidth = parseInt(processing.style.width) || 0;
                const newWidth = (currentWidth + Math.random() * 10) % 100;
                processing.style.width = newWidth + '%';
                
                // Update data processing bar
                const dataProgress = document.getElementById('dataProgress');
                const dataWidth = parseInt(dataProgress.style.width) || 0;
                const newDataWidth = (dataWidth + Math.random() * 5) % 100;
                dataProgress.style.width = newDataWidth + '%';
                
                // Simulate data stream
                const messages = [
                    'Processing weather data...',
                    'Faction resource analysis complete',
                    'Decision engine optimization running',
                    'API endpoint health check: OK',
                    'Data quality validation passed',
                    'WebSocket connection stable'
                ];
                const randomMessage = messages[Math.floor(Math.random() * messages.length)];
                logToDataStream(randomMessage);
                
            }, 2000);
            
            // Simulate weather updates
            setInterval(() => {
                updateSimulatedWeather();
            }, 30000);
        }

        function updateSimulatedWeather() {
            const territories = ['Tech Valley', 'Creative', 'Corporate', 'Traditional'];
            const conditions = ['Sunny', 'Cloudy', 'Rainy', 'Stormy', 'Fog'];
            
            const weatherGrid = document.getElementById('weatherGrid');
            weatherGrid.innerHTML = '';
            
            territories.forEach(territory => {
                const temp = Math.round(Math.random() * 20 + 10);
                const condition = conditions[Math.floor(Math.random() * conditions.length)];
                
                const card = document.createElement('div');
                card.className = 'weather-card';
                card.innerHTML = `
                    <div class="weather-temp">${temp}°C</div>
                    <div class="weather-condition">${territory}<br>${condition}</div>
                `;
                weatherGrid.appendChild(card);
            });
        }

        function switchPersona(persona) {
            if (persona === 'auto') {
                systemState.currentPersona = 'auto-adapt';
                document.getElementById('aiPersona').textContent = 'Auto';
            } else {
                systemState.currentPersona = persona;
                document.getElementById('aiPersona').textContent = persona.charAt(0).toUpperCase() + persona.slice(1);
            }
            
            updatePersonaButtons();
            logToEventTimeline(`🎭 Persona switched to ${persona}`);
            
            // Send command to Executive OS if connected
            if (executiveWS && executiveWS.readyState === WebSocket.OPEN) {
                executiveWS.send(JSON.stringify({
                    type: 'switch_persona',
                    persona: persona
                }));
            }
        }

        function updatePersonaButtons() {
            document.querySelectorAll('.persona-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Find and activate the current persona button
            const currentBtn = Array.from(document.querySelectorAll('.persona-btn')).find(btn => 
                btn.textContent.toLowerCase().includes(systemState.currentPersona.toLowerCase())
            );
            if (currentBtn) {
                currentBtn.classList.add('active');
            }
        }

        function triggerResourceRebalance() {
            showAlert('Resource rebalancing initiated', 'info');
            logToEventTimeline('⚖️ Resource rebalancing started');
            
            // Simulate rebalancing
            setTimeout(() => {
                logToEventTimeline('✅ Resource rebalancing completed');
                showAlert('Resource rebalancing completed successfully', 'success');
            }, 3000);
        }

        function initiateFactionsNegotiation() {
            const factions = ['Tech', 'Creative', 'Corporate', 'Traditional'];
            const faction1 = factions[Math.floor(Math.random() * factions.length)];
            let faction2 = factions[Math.floor(Math.random() * factions.length)];
            while (faction2 === faction1) {
                faction2 = factions[Math.floor(Math.random() * factions.length)];
            }
            
            logToEventTimeline(`🤝 Negotiation initiated: ${faction1} ↔ ${faction2}`);
            showAlert(`Negotiation started between ${faction1} and ${faction2}`, 'info');
        }

        function weatherUpdate() {
            showAlert('Forcing weather data update...', 'info');
            updateSimulatedWeather();
            logToEventTimeline('🌤️ Weather data updated');
        }

        function triggerWeatherEvent() {
            const events = [
                'Thunderstorm in Tech Valley',
                'Fog rolling into Creative District',
                'Clear skies boost Corporate morale',
                'Traditional lands experiencing aurora'
            ];
            const event = events[Math.floor(Math.random() * events.length)];
            
            showAlert(`Weather Event: ${event}`, 'warning');
            logToEventTimeline(`🌩️ ${event}`);
        }

        function systemDiagnostics() {
            showAlert('Running system diagnostics...', 'info');
            logToEventTimeline('🔧 System diagnostics initiated');
            
            // Simulate diagnostic results
            setTimeout(() => {
                const results = [
                    'All systems operational',
                    'Memory usage: 67%',
                    'Network latency: 12ms',
                    'Database connections: Stable'
                ];
                
                results.forEach((result, index) => {
                    setTimeout(() => {
                        logToDataStream(`DIAGNOSTIC: ${result}`);
                    }, index * 500);
                });
                
                setTimeout(() => {
                    showAlert('System diagnostics completed - All systems healthy', 'success');
                    logToEventTimeline('✅ System diagnostics completed');
                }, 2500);
            }, 1000);
        }

        function emergencyMode() {
            document.body.style.background = 'linear-gradient(135deg, #660000 0%, #990000 50%, #660000 100%)';
            showAlert('EMERGENCY MODE ACTIVATED', 'danger');
            logToEventTimeline('🚨 EMERGENCY MODE ACTIVATED');
            
            setTimeout(() => {
                document.body.style.background = 'linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 50%, #1a1a1a 100%)';
                showAlert('Emergency mode deactivated', 'success');
                logToEventTimeline('✅ Emergency mode deactivated');
            }, 5000);
        }

        function emergencyShutdown() {
            if (confirm('Are you sure you want to initiate emergency shutdown?')) {
                showAlert('EMERGENCY SHUTDOWN INITIATED', 'danger');
                logToEventTimeline('🛑 EMERGENCY SHUTDOWN INITIATED');
                
                // Close all WebSocket connections
                [executiveWS, weatherWS, factionWS, dataWS].forEach(ws => {
                    if (ws && ws.readyState === WebSocket.OPEN) {
                        ws.close();
                    }
                });
                
                // Simulate shutdown
                setTimeout(() => {
                    document.body.innerHTML = `
                        <div style="display: flex; align-items: center; justify-content: center; height: 100vh; flex-direction: column; background: #000;">
                            <h1 style="color: #ff3333; font-family: 'Courier New', monospace;">SYSTEM SHUTDOWN</h1>
                            <p style="color: #666; margin-top: 20px;">Executive OS is offline</p>
                            <button onclick="location.reload()" style="margin-top: 20px; padding: 10px 20px; background: #0066cc; color: white; border: none; border-radius: 4px; cursor: pointer;">Restart System</button>
                        </div>
                    `;
                }, 2000);
            }
        }

        function generateReport() {
            showAlert('Generating comprehensive system report...', 'info');
            logToEventTimeline('📋 System report generation started');
            
            setTimeout(() => {
                const reportData = {
                    timestamp: new Date().toISOString(),
                    systemUptime: document.getElementById('systemUptime').textContent,
                    activeDecisions: systemState.activeDecisions,
                    currentPersona: systemState.currentPersona,
                    aiMood: systemState.aiMood,
                    weatherStatus: 'Monitoring 5 territories',
                    factionStatus: 'All factions stable',
                    dataProcessing: document.getElementById('dataVolume').textContent
                };
                
                console.log('Executive OS Report:', reportData);
                showAlert('System report generated successfully', 'success');
                logToEventTimeline('✅ System report completed');
            }, 2000);
        }

        function handleChatInput(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                addChatMessage('You', message, '#00ff88');
                input.value = '';
                
                // Simulate AI response
                setTimeout(() => {
                    const responses = [
                        'Analyzing your request and cross-referencing with current system state...',
                        'Based on current faction dynamics and weather patterns, I recommend...',
                        'Processing... Optimal strategy identified. Implementing now.',
                        'Understood. Adjusting resource allocation priorities accordingly.',
                        'All parameters within acceptable ranges. Proceeding with request.',
                        'Coordination with weather system complete. Faction negotiations optimized.'
                    ];
                    const response = responses[Math.floor(Math.random() * responses.length)];
                    addChatMessage('AI CEO', response, '#00ccff');
                }, 1000 + Math.random() * 2000);
            }
        }

        function addChatMessage(sender, message, color) {
            const chatMessages = document.getElementById('chatMessages');
            const messageElement = document.createElement('div');
            messageElement.innerHTML = `
                <div style="color: ${color};">[${sender}]</div>
                <div>${message}</div>
                <br>
            `;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addDecisionToLog(decision) {
            const log = document.getElementById('decisionLog');
            const entry = document.createElement('div');
            entry.className = 'decision-entry';
            entry.innerHTML = `
                <span class="decision-time">${new Date().toLocaleTimeString()}</span>
                <span class="decision-text">${decision}</span>
            `;
            log.insertBefore(entry, log.firstChild);
            
            // Keep only last 10 entries
            while (log.children.length > 10) {
                log.removeChild(log.lastChild);
            }
        }

        function logToEventTimeline(event) {
            const timeline = document.getElementById('eventTimeline');
            const entry = document.createElement('div');
            entry.className = 'decision-entry';
            entry.innerHTML = `
                <span class="decision-time">${new Date().toLocaleTimeString()}</span>
                <span class="decision-text">${event}</span>
            `;
            timeline.insertBefore(entry, timeline.firstChild);
            
            // Keep only last 15 entries
            while (timeline.children.length > 15) {
                timeline.removeChild(timeline.lastChild);
            }
        }

        function logToDataStream(message) {
            const stream = document.getElementById('dataStream');
            const timestamp = new Date().toLocaleTimeString();
            stream.innerHTML += `[${timestamp}] ${message}<br>`;
            stream.scrollTop = stream.scrollHeight;
            
            // Keep stream manageable
            const lines = stream.innerHTML.split('<br>');
            if (lines.length > 20) {
                stream.innerHTML = lines.slice(-15).join('<br>');
            }
        }

        function showAlert(message, type = 'info') {
            const alert = document.getElementById('alertSystem');
            const alertMessage = document.getElementById('alertMessage');
            
            alertMessage.textContent = message;
            
            // Update alert styling based on type
            switch (type) {
                case 'success':
                    alert.style.background = 'linear-gradient(135deg, #00cc66, #00ff88)';
                    alert.style.borderLeftColor = '#00aa55';
                    break;
                case 'warning':
                    alert.style.background = 'linear-gradient(135deg, #ff6600, #ff9933)';
                    alert.style.borderLeftColor = '#ff3300';
                    break;
                case 'danger':
                    alert.style.background = 'linear-gradient(135deg, #cc0000, #ff3333)';
                    alert.style.borderLeftColor = '#990000';
                    break;
                default:
                    alert.style.background = 'linear-gradient(135deg, #0066cc, #0099ff)';
                    alert.style.borderLeftColor = '#0044aa';
            }
            
            alert.classList.add('show');
            
            setTimeout(() => {
                alert.classList.remove('show');
            }, 5000);
        }

        function refreshAll() {
            location.reload();
        }

        function updateAIStatus(state) {
            if (state.confidence) {
                document.getElementById('aiConfidence').textContent = Math.round(state.confidence * 100) + '%';
            }
            if (state.mood) {
                systemState.aiMood = state.mood;
                document.getElementById('aiMood').textContent = state.mood;
            }
        }

        // Initialize dashboard when page loads
        window.addEventListener('load', initDashboard);

        // Handle page unload
        window.addEventListener('beforeunload', () => {
            [executiveWS, weatherWS, factionWS, dataWS].forEach(ws => {
                if (ws && ws.readyState === WebSocket.OPEN) {
                    ws.close();
                }
            });
        });

        // Add some initial demo messages to chat
        setTimeout(() => {
            addChatMessage('AI CEO', 'System initialization complete. All executive functions online.', '#00ccff');
        }, 2000);

        setTimeout(() => {
            addChatMessage('AI CEO', 'Weather monitoring active across all territories. Resource allocation optimal.', '#00ccff');
        }, 4000);
    </script>
</body>
</html>