<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆüß†üí´ Adaptive Features Demo - SoulFRA Streaming</title>
    <style>
        :root {
            --font-mono: 'Courier New', monospace;
            --soulfra-quantum: #8B00FF;
            --soulfra-reality: #00FF88;
            --linguistic-timing: 1;
            --linguistic-pitch: 1;
        }
        
        body {
            background: #000;
            color: #00ff88;
            font-family: var(--font-mono);
            padding: 20px;
            margin: 0;
            overflow-x: auto;
        }
        
        /* System status indicator */
        .system-status {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(139, 0, 255, 0.2);
            border: 1px solid var(--soulfra-quantum);
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            max-width: 200px;
            z-index: 1001;
        }
        
        .system-loaded { color: #00FF88; }
        .system-error { color: #FF4444; }
        
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #8B00FF;
            border-radius: 10px;
            background: rgba(139, 0, 255, 0.1);
        }
        
        .demo-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .demo-btn {
            background: #8B00FF;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            transition: all 0.3s ease;
        }
        
        .demo-btn:hover {
            background: #B84FFF;
            transform: translateY(-2px);
        }
        
        .status-display {
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 12px;
            white-space: pre-wrap;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .feature-card {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid #00FF88;
            border-radius: 10px;
            padding: 15px;
        }
        
        h3 { color: #00FF88; }
        h4 { color: #00CCFF; }
    </style>
</head>
<body>
    <h1>üéÆüß†üí´ Adaptive Features Demo</h1>
    <p>Test all the adaptive behaviors, emoji animations, and linguistic interactions!</p>

    <!-- Character Behavior Section -->
    <div class="demo-section">
        <h3>üß† Adaptive Character Behavior</h3>
        <p>Current Device: <span id="deviceType">Detecting...</span></p>
        <p>Interaction Method: <span id="interactionMethod">Unknown</span></p>
        <p>Attention Pattern: <span id="attentionPattern">Normal</span></p>
        
        <div class="demo-controls">
            <button class="demo-btn" onclick="testAttentionPatterns()">Test Attention Patterns</button>
            <button class="demo-btn" onclick="simulateDeviceChange()">Simulate Device Change</button>
            <button class="demo-btn" onclick="showBehaviorInsights()">Show Behavior Insights</button>
        </div>
        
        <div class="status-display" id="behaviorStatus">Behavior data will appear here...</div>
    </div>

    <!-- Proximity Detection Section -->
    <div class="demo-section">
        <h3>üìè Proximity-Aware Interface</h3>
        <p>Current Distance Zone: <span id="distanceZone">Normal</span></p>
        <p>Face Detection: <span id="faceDetection">Checking...</span></p>
        
        <div class="demo-controls">
            <button class="demo-btn" onclick="testProximityZones()">Test Distance Zones</button>
            <button class="demo-btn" onclick="toggleFaceDetection()">Toggle Face Detection</button>
            <button class="demo-btn" onclick="calibrateDistance()">Calibrate at 50cm</button>
        </div>
        
        <div class="status-display" id="proximityStatus">Proximity data will appear here...</div>
    </div>

    <!-- Emoji Reactions Section -->
    <div class="demo-section">
        <h3>üéâ Stream Emoji Reactions</h3>
        <p>Active Particles: <span id="particleCount">0</span></p>
        
        <div class="demo-controls">
            <button class="demo-btn" onclick="testEmojiReactions()">Test All Domain Reactions</button>
            <button class="demo-btn" onclick="startEmojiRain()">Start Emoji Rain</button>
            <button class="demo-btn" onclick="triggerCelebrations()">Trigger Celebrations</button>
            <button class="demo-btn" onclick="clearEmojis()">Clear All Emojis</button>
        </div>
        
        <div class="feature-grid">
            <div class="feature-card">
                <h4>üéÆ Gaming</h4>
                <button class="demo-btn" onclick="testDomainEmojis('red')">Test Red Domain</button>
            </div>
            <div class="feature-card">
                <h4>üé® Brand</h4>
                <button class="demo-btn" onclick="testDomainEmojis('orange')">Test Orange Domain</button>
            </div>
            <div class="feature-card">
                <h4>üé™ 3D</h4>
                <button class="demo-btn" onclick="testDomainEmojis('yellow')">Test Yellow Domain</button>
            </div>
        </div>
    </div>

    <!-- Linguistic Interaction Section -->
    <div class="demo-section">
        <h3>üó£Ô∏è Linguistic Interaction (.ey System)</h3>
        <p>Current Mode: <span id="vowelMode">.ey</span></p>
        <p>Platform Allegiance: <span id="platformAllegiance">Detecting...</span></p>
        
        <div class="demo-controls">
            <button class="demo-btn" onclick="cycleVowelModes()">Cycle .ey Modes</button>
            <button class="demo-btn" onclick="testTextTransformation()">Test Text Transform</button>
            <button class="demo-btn" onclick="triggerPlatformBattle()">Platform Battle!</button>
        </div>
        
        <div style="margin: 15px 0;">
            <label>Test Text Input:</label><br>
            <input type="text" id="testTextInput" placeholder="Type to see linguistic patterns..." 
                   style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); 
                          border: 1px solid #8B00FF; color: white; margin-top: 5px;">
        </div>
        
        <div class="status-display" id="linguisticStatus">Linguistic data will appear here...</div>
    </div>

    <!-- Integrated Demo Section -->
    <div class="demo-section">
        <h3>üåÄ All Systems Integration</h3>
        <p>Experience all adaptive features working together!</p>
        
        <div class="demo-controls">
            <button class="demo-btn" onclick="runIntegratedDemo()">Run Full Demo</button>
            <button class="demo-btn" onclick="simulateADHDMode()">Simulate ADHD Mode</button>
            <button class="demo-btn" onclick="simulateVisionPro()">Simulate Vision Pro</button>
        </div>
        
        <div style="margin: 20px 0;">
            <button class="demo-btn" style="background: #00FF88; color: black; font-size: 18px; padding: 15px 30px;"
                    onclick="window.open('SOULFRA-STREAMING-DASHBOARD.html', '_blank')">
                üåÄ Launch Full Streaming Dashboard
            </button>
        </div>
    </div>

    <script src="adaptive-character-behavior.js"></script>
    <script src="proximity-stream-controller.js"></script>
    <script src="stream-emoji-reactions.js"></script>
    <script src="linguistic-interaction.js"></script>
    
    <script>
        // Initialize all systems
        let characterBehavior, proximityController, emojiReactions, linguisticSystem;
        let emojiRainStop = null;
        let systemStatus = {
            characterBehavior: false,
            proximityController: false,
            emojiReactions: false,
            linguisticSystem: false
        };
        
        // Create system status indicator
        function createStatusIndicator() {
            const indicator = document.createElement('div');
            indicator.className = 'system-status';
            indicator.id = 'system-status';
            document.body.appendChild(indicator);
            updateStatusIndicator();
        }
        
        function updateStatusIndicator() {
            const indicator = document.getElementById('system-status');
            if (!indicator) return;
            
            let html = '<strong>System Status:</strong><br>';
            Object.entries(systemStatus).forEach(([system, loaded]) => {
                const className = loaded ? 'system-loaded' : 'system-error';
                const icon = loaded ? '‚úÖ' : '‚ùå';
                html += `<span class="${className}">${icon} ${system}</span><br>`;
            });
            
            indicator.innerHTML = html;
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üåÄ Initializing adaptive systems demo...');
            
            // Create status indicator first
            createStatusIndicator();
            
            try {
                // Initialize systems with proper error handling
                if (typeof AdaptiveCharacterBehavior !== 'undefined') {
                    try {
                        characterBehavior = new AdaptiveCharacterBehavior();
                        systemStatus.characterBehavior = true;
                        console.log('‚úÖ Character behavior initialized');
                    } catch (e) {
                        console.error('‚ùå Error creating AdaptiveCharacterBehavior:', e);
                    }
                } else {
                    console.error('‚ùå AdaptiveCharacterBehavior class not found');
                }
                
                if (typeof ProximityStreamController !== 'undefined') {
                    try {
                        proximityController = new ProximityStreamController();
                        systemStatus.proximityController = true;
                        console.log('‚úÖ Proximity controller initialized');
                    } catch (e) {
                        console.error('‚ùå Error creating ProximityStreamController:', e);
                    }
                } else {
                    console.error('‚ùå ProximityStreamController class not found');
                }
                
                if (typeof StreamEmojiReactions !== 'undefined') {
                    try {
                        emojiReactions = new StreamEmojiReactions();
                        systemStatus.emojiReactions = true;
                        console.log('‚úÖ Emoji reactions initialized');
                    } catch (e) {
                        console.error('‚ùå Error creating StreamEmojiReactions:', e);
                    }
                } else {
                    console.error('‚ùå StreamEmojiReactions class not found');
                }
                
                if (typeof LinguisticInteractionSystem !== 'undefined') {
                    try {
                        linguisticSystem = new LinguisticInteractionSystem();
                        systemStatus.linguisticSystem = true;
                        console.log('‚úÖ Linguistic system initialized');
                    } catch (e) {
                        console.error('‚ùå Error creating LinguisticInteractionSystem:', e);
                    }
                } else {
                    console.error('‚ùå LinguisticInteractionSystem class not found');
                }
                
                // Update status display
                updateStatusIndicator();
                
                // Setup text input listener
                setupTextInput();
                
                // Update displays
                updateDisplays();
                setInterval(updateDisplays, 1000);
                
                const loadedCount = Object.values(systemStatus).filter(Boolean).length;
                console.log(`‚úÖ Initialization complete: ${loadedCount}/4 systems loaded`);
                
                // Show welcome message
                setTimeout(() => {
                    if (loadedCount === 4) {
                        showWelcomeMessage();
                    } else {
                        showErrorMessage(loadedCount);
                    }
                }, 500);
                
            } catch (error) {
                console.error('‚ùå Critical error during initialization:', error);
                showCriticalError(error);
            }
        });
        
        function showWelcomeMessage() {
            const message = document.createElement('div');
            message.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 255, 136, 0.1);
                border: 2px solid #00FF88;
                color: #00FF88;
                padding: 30px;
                border-radius: 15px;
                text-align: center;
                z-index: 10000;
                font-family: var(--font-mono);
            `;
            message.innerHTML = `
                <h2>üéâ All Systems Ready!</h2>
                <p>All 4 adaptive systems successfully loaded</p>
                <p>Try the demo features below!</p>
                <button onclick="this.parentElement.remove()" style="
                    background: #00FF88;
                    color: black;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 5px;
                    cursor: pointer;
                    margin-top: 10px;
                ">Start Testing</button>
            `;
            document.body.appendChild(message);
            
            // Auto-remove after 3 seconds
            setTimeout(() => {
                if (message.parentElement) message.remove();
            }, 3000);
        }
        
        function showErrorMessage(loadedCount) {
            const message = document.createElement('div');
            message.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(255, 68, 68, 0.1);
                border: 2px solid #FF4444;
                color: #FF4444;
                padding: 30px;
                border-radius: 15px;
                text-align: center;
                z-index: 10000;
                font-family: var(--font-mono);
            `;
            message.innerHTML = `
                <h2>‚ö†Ô∏è Partial Load</h2>
                <p>Only ${loadedCount}/4 systems loaded</p>
                <p>Some features may not work</p>
                <p>Check console for details</p>
                <button onclick="this.parentElement.remove()" style="
                    background: #FF4444;
                    color: white;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 5px;
                    cursor: pointer;
                    margin-top: 10px;
                ">Continue Anyway</button>
            `;
            document.body.appendChild(message);
        }
        
        function showCriticalError(error) {
            const message = document.createElement('div');
            message.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(255, 0, 0, 0.2);
                border: 2px solid #FF0000;
                color: #FF0000;
                padding: 30px;
                border-radius: 15px;
                text-align: center;
                z-index: 10000;
                font-family: var(--font-mono);
                max-width: 500px;
            `;
            message.innerHTML = `
                <h2>üí• Critical Error</h2>
                <p>Failed to initialize adaptive systems</p>
                <pre style="font-size: 12px; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px;">${error.message}</pre>
                <button onclick="location.reload()" style="
                    background: #FF0000;
                    color: white;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 5px;
                    cursor: pointer;
                    margin-top: 10px;
                ">Reload Page</button>
            `;
            document.body.appendChild(message);
        }
        
        function updateDisplays() {
            try {
                // Character behavior
                if (characterBehavior) {
                    const device = characterBehavior.getDeviceProfile();
                    document.getElementById('deviceType').textContent = 
                        device?.isMobile ? 'Mobile' : device?.isTablet ? 'Tablet' : 'Desktop';
                    document.getElementById('interactionMethod').textContent = 
                        characterBehavior.getInteractionMethod() || 'Unknown';
                    document.getElementById('attentionPattern').textContent = 
                        characterBehavior.attentionPattern || 'Normal';
                }
                
                // Proximity
                if (proximityController) {
                    document.getElementById('distanceZone').textContent = 
                        proximityController.getCurrentDistance() || 'Normal';
                    document.getElementById('faceDetection').textContent = 
                        proximityController.faceDetected ? 'Active' : 'Not available';
                }
                
                // Emoji count
                if (emojiReactions) {
                    document.getElementById('particleCount').textContent = 
                        emojiReactions.activeParticles.size || 0;
                }
                
                // Linguistic
                if (linguisticSystem) {
                    document.getElementById('vowelMode').textContent = 
                        linguisticSystem.currentMode || '.ey';
                    const allegiance = linguisticSystem.getPlatformAllegiance();
                    document.getElementById('platformAllegiance').textContent = 
                        allegiance ? allegiance.name : 'Unknown';
                }
            } catch (error) {
                console.error('Error updating displays:', error);
            }
        }
        
        // Character behavior tests
        function testAttentionPatterns() {
            if (!characterBehavior) {
                updateBehaviorStatus('‚ùå Character behavior system not loaded');
                return;
            }
            
            const patterns = ['normal', 'hyperfocus', 'scattered', 'fidgety'];
            let index = 0;
            
            updateBehaviorStatus('üß† Testing attention patterns...');
            
            const interval = setInterval(() => {
                try {
                    characterBehavior.adjustAttentionPattern(patterns[index]);
                    updateBehaviorStatus(`Testing attention pattern: ${patterns[index]}`);
                    
                    index++;
                    if (index >= patterns.length) {
                        clearInterval(interval);
                        updateBehaviorStatus('‚úÖ Attention pattern test complete!');
                    }
                } catch (error) {
                    clearInterval(interval);
                    updateBehaviorStatus(`‚ùå Error testing patterns: ${error.message}`);
                }
            }, 2000);
        }
        
        function simulateDeviceChange() {
            if (!characterBehavior) {
                updateBehaviorStatus('‚ùå Character behavior system not loaded');
                return;
            }
            
            try {
                const methods = ['mouse', 'touch', 'keyboard', 'gamepad'];
                const method = methods[Math.floor(Math.random() * methods.length)];
                characterBehavior.setInteractionMethod(method);
                updateBehaviorStatus(`‚úÖ Simulated device change to: ${method}`);
            } catch (error) {
                updateBehaviorStatus(`‚ùå Error changing device: ${error.message}`);
            }
        }
        
        function showBehaviorInsights() {
            if (!characterBehavior) {
                updateBehaviorStatus('‚ùå Character behavior system not loaded');
                return;
            }
            
            try {
                const insights = characterBehavior.getBehaviorInsights();
                updateBehaviorStatus('üìä Behavior Insights:\n' + JSON.stringify(insights, null, 2));
            } catch (error) {
                updateBehaviorStatus(`‚ùå Error getting insights: ${error.message}`);
            }
        }
        
        // Proximity tests
        function testProximityZones() {
            if (!proximityController) {
                updateProximityStatus('‚ùå Proximity controller not loaded');
                return;
            }
            
            const distances = [20, 35, 50, 80, 120];
            let index = 0;
            
            updateProximityStatus('üìé Testing proximity zones...');
            
            const interval = setInterval(() => {
                try {
                    proximityController.updateProximity(distances[index]);
                    updateProximityStatus(`Testing distance: ${distances[index]}cm - Zone: ${proximityController.getCurrentDistance()}`);
                    
                    index++;
                    if (index >= distances.length) {
                        clearInterval(interval);
                        updateProximityStatus('‚úÖ Proximity zone test complete!');
                    }
                } catch (error) {
                    clearInterval(interval);
                    updateProximityStatus(`‚ùå Error testing proximity: ${error.message}`);
                }
            }, 2000);
        }
        
        function toggleFaceDetection() {
            if (!proximityController) {
                updateProximityStatus('‚ùå Proximity controller not loaded');
                return;
            }
            
            try {
                // Try to toggle face detection
                if (proximityController.toggleFaceDetection) {
                    proximityController.toggleFaceDetection();
                    updateProximityStatus('‚úÖ Face detection toggled');
                } else {
                    updateProximityStatus('üì∑ Face detection toggle not available (simulated)');
                }
            } catch (error) {
                updateProximityStatus(`‚ùå Error toggling face detection: ${error.message}`);
            }
        }
        
        function calibrateDistance() {
            if (!proximityController) {
                updateProximityStatus('‚ùå Proximity controller not loaded');
                return;
            }
            
            try {
                proximityController.calibrateDistance(50);
                updateProximityStatus('‚úÖ Calibrated at 50cm');
            } catch (error) {
                updateProximityStatus(`‚ùå Error calibrating: ${error.message}`);
            }
        }
        
        // Emoji tests
        function testEmojiReactions() {
            if (!emojiReactions) {
                updateEmojiStatus('‚ùå Emoji reactions system not loaded');
                return;
            }
            
            const domains = ['red', 'orange', 'yellow', 'green', 'white', 'blue', 'indigo', 'violet', 'black'];
            
            updateEmojiStatus('üéâ Testing all domain reactions...');
            
            domains.forEach((domain, index) => {
                setTimeout(() => {
                    try {
                        emojiReactions.triggerDomainReaction(domain, 'click', {
                            x: 100 + index * 100,
                            y: window.innerHeight / 2
                        });
                        updateEmojiStatus(`‚úÖ Triggered ${domain} domain (${index + 1}/${domains.length})`);
                    } catch (error) {
                        updateEmojiStatus(`‚ùå Error with ${domain} domain: ${error.message}`);
                    }
                }, index * 200);
            });
        }
        
        function startEmojiRain() {
            if (!emojiReactions) {
                updateEmojiStatus('‚ùå Emoji reactions system not loaded');
                return;
            }
            
            try {
                if (emojiRainStop) {
                    emojiRainStop();
                    emojiRainStop = null;
                    updateEmojiStatus('‚úÖ Emoji rain stopped');
                } else {
                    const emojis = ['üåü', '‚ú®', 'üí´', '‚≠ê', 'üå†'];
                    emojiRainStop = emojiReactions.rain(emojis, 'medium');
                    updateEmojiStatus('‚úÖ Emoji rain started! Click again to stop.');
                }
            } catch (error) {
                updateEmojiStatus(`‚ùå Error with emoji rain: ${error.message}`);
            }
        }
        
        function triggerCelebrations() {
            if (!emojiReactions) {
                updateEmojiStatus('‚ùå Emoji reactions system not loaded');
                return;
            }
            
            try {
                const domains = ['red', 'green', 'white', 'blue', 'violet'];
                updateEmojiStatus('üéâ Triggering celebrations for all domains...');
                
                domains.forEach((domain, index) => {
                    setTimeout(() => {
                        try {
                            emojiReactions.celebrate(domain);
                            updateEmojiStatus(`‚úÖ Celebrating ${domain} domain!`);
                        } catch (error) {
                            updateEmojiStatus(`‚ùå Error celebrating ${domain}: ${error.message}`);
                        }
                    }, index * 500);
                });
            } catch (error) {
                updateEmojiStatus(`‚ùå Error triggering celebrations: ${error.message}`);
            }
        }
        
        function clearEmojis() {
            if (!emojiReactions) {
                updateEmojiStatus('‚ùå Emoji reactions system not loaded');
                return;
            }
            
            try {
                emojiReactions.clear();
                updateEmojiStatus('‚úÖ All emojis cleared!');
            } catch (error) {
                updateEmojiStatus(`‚ùå Error clearing emojis: ${error.message}`);
            }
        }
        
        function testDomainEmojis(domain) {
            if (!emojiReactions) {
                updateEmojiStatus('‚ùå Emoji reactions system not loaded');
                return;
            }
            
            try {
                const x = window.innerWidth / 2;
                const y = window.innerHeight / 2;
                
                updateEmojiStatus(`üéØ Testing ${domain} domain interactions...`);
                
                // Test all interaction types
                ['hover', 'click', 'focus'].forEach((interaction, index) => {
                    setTimeout(() => {
                        try {
                            emojiReactions.triggerDomainReaction(domain, interaction, { x, y });
                            updateEmojiStatus(`‚úÖ ${domain} ${interaction} reaction triggered`);
                        } catch (error) {
                            updateEmojiStatus(`‚ùå Error with ${domain} ${interaction}: ${error.message}`);
                        }
                    }, index * 500);
                });
            } catch (error) {
                updateEmojiStatus(`‚ùå Error testing ${domain} domain: ${error.message}`);
            }
        }
        
        // Linguistic tests
        function cycleVowelModes() {
            if (!linguisticSystem) {
                updateLinguisticStatus('‚ùå Linguistic system not loaded');
                return;
            }
            
            try {
                linguisticSystem.cycleVowelMode();
                updateLinguisticStatus(`‚úÖ Mode changed to: ${linguisticSystem.currentMode}`);
            } catch (error) {
                updateLinguisticStatus(`‚ùå Error cycling modes: ${error.message}`);
            }
        }
        
        function testTextTransformation() {
            if (!linguisticSystem) {
                updateLinguisticStatus('‚ùå Linguistic system not loaded');
                return;
            }
            
            try {
                const testText = "Hello world, this is a test of the linguistic system!";
                const modes = ['.ey', '.eey', '.eyy'];
                
                let results = "üîç Text transformation test:\n";
                modes.forEach(mode => {
                    try {
                        const transformed = linguisticSystem.transformText(testText, mode);
                        results += `\n${mode}: ${transformed}`;
                    } catch (error) {
                        results += `\n${mode}: Error - ${error.message}`;
                    }
                });
                
                updateLinguisticStatus(results);
            } catch (error) {
                updateLinguisticStatus(`‚ùå Error testing transformations: ${error.message}`);
            }
        }
        
        function triggerPlatformBattle() {
            if (!linguisticSystem) {
                updateLinguisticStatus('‚ùå Linguistic system not loaded');
                return;
            }
            
            try {
                const platforms = ['appleGoogle', 'microsoftOpenAI', 'neutral'];
                const newPlatform = platforms[Math.floor(Math.random() * platforms.length)];
                linguisticSystem.triggerAllegiance(newPlatform);
                updateLinguisticStatus(`‚öîÔ∏è Platform battle! Switched to: ${newPlatform}`);
            } catch (error) {
                updateLinguisticStatus(`‚ùå Error triggering battle: ${error.message}`);
            }
        }
        
        // Integrated demos
        function runIntegratedDemo() {
            console.log('üåÄ Running integrated demo...');
            
            let results = 'üåÄ Integrated Demo Results:\n';
            
            try {
                // 1. Change attention pattern
                if (characterBehavior) {
                    characterBehavior.adjustAttentionPattern('fidgety');
                    results += '‚úÖ Attention: fidgety\n';
                } else {
                    results += '‚ùå Character behavior not available\n';
                }
                
                // 2. Simulate close proximity
                if (proximityController) {
                    proximityController.updateProximity(30);
                    results += '‚úÖ Proximity: 30cm (close)\n';
                } else {
                    results += '‚ùå Proximity controller not available\n';
                }
                
                // 3. Trigger emoji celebrations
                if (emojiReactions) {
                    triggerCelebrations();
                    results += '‚úÖ Emojis: celebration mode\n';
                } else {
                    results += '‚ùå Emoji reactions not available\n';
                }
                
                // 4. Change linguistic mode
                if (linguisticSystem) {
                    linguisticSystem.setVowelMode('.eyy');
                    results += '‚úÖ Linguistic: .eyy (quick mode)\n';
                } else {
                    results += '‚ùå Linguistic system not available\n';
                }
                
                updateBehaviorStatus(results + '\n‚úÖ Integrated demo complete!');
                
            } catch (error) {
                updateBehaviorStatus(`‚ùå Integrated demo failed: ${error.message}`);
            }
        }
        
        function simulateADHDMode() {
            let results = 'üß† ADHD Mode Simulation:\n';
            
            try {
                // Set scattered attention
                if (characterBehavior) {
                    characterBehavior.adjustAttentionPattern('scattered');
                    results += '‚úÖ Attention: scattered\n';
                } else {
                    results += '‚ùå Character behavior not available\n';
                }
                
                // Quick linguistic mode
                if (linguisticSystem) {
                    linguisticSystem.setVowelMode('.eyy');
                    results += '‚úÖ Speech: .eyy (quick)\n';
                } else {
                    results += '‚ùå Linguistic system not available\n';
                }
                
                // More emoji particles
                if (emojiReactions) {
                    emojiReactions.physics.windVariance = 0.3;
                    results += '‚úÖ Emojis: increased randomness\n';
                    
                    // Trigger random reactions
                    const adhdInterval = setInterval(() => {
                        if (Math.random() < 0.3) {
                            const domains = ['red', 'green', 'blue', 'violet'];
                            const domain = domains[Math.floor(Math.random() * domains.length)];
                            emojiReactions.triggerDomainReaction(domain, 'hover', {
                                x: Math.random() * window.innerWidth,
                                y: Math.random() * window.innerHeight
                            });
                        }
                    }, 1000);
                    
                    // Stop after 10 seconds
                    setTimeout(() => {
                        clearInterval(adhdInterval);
                        updateBehaviorStatus(results + '\n‚úÖ ADHD simulation complete!');
                    }, 10000);
                    
                    results += '‚úÖ Random reactions: 10 seconds\n';
                } else {
                    results += '‚ùå Emoji reactions not available\n';
                }
                
                updateBehaviorStatus(results + '\nüéØ ADHD mode active!');
                
            } catch (error) {
                updateBehaviorStatus(`‚ùå ADHD simulation failed: ${error.message}`);
            }
        }
        
        function simulateVisionPro() {
            let results = 'ü•Ω Vision Pro Simulation:\n';
            
            try {
                // Set Vision Pro device
                if (characterBehavior) {
                    characterBehavior.setInteractionMethod('vision');
                    results += '‚úÖ Interaction: vision/eye tracking\n';
                } else {
                    results += '‚ùå Character behavior not available\n';
                }
                
                // Theater distance
                if (proximityController) {
                    proximityController.updateProximity(200);
                    results += '‚úÖ Distance: 200cm (theater mode)\n';
                } else {
                    results += '‚ùå Proximity controller not available\n';
                }
                
                // Spatial emoji effects
                if (emojiReactions) {
                    startEmojiRain();
                    results += '‚úÖ Spatial effects: emoji rain active\n';
                } else {
                    results += '‚ùå Emoji reactions not available\n';
                }
                
                updateBehaviorStatus(results + '\nüöÄ Vision Pro mode active!');
                
            } catch (error) {
                updateBehaviorStatus(`‚ùå Vision Pro simulation failed: ${error.message}`);
            }
        }
        
        // Status update functions with timestamps
        function updateBehaviorStatus(message) {
            const timestamp = new Date().toLocaleTimeString();
            document.getElementById('behaviorStatus').textContent = `[${timestamp}] ${message}`;
        }
        
        function updateProximityStatus(message) {
            const timestamp = new Date().toLocaleTimeString();
            document.getElementById('proximityStatus').textContent = `[${timestamp}] ${message}`;
        }
        
        function updateLinguisticStatus(message) {
            const timestamp = new Date().toLocaleTimeString();
            document.getElementById('linguisticStatus').textContent = `[${timestamp}] ${message}`;
        }
        
        function updateEmojiStatus(message) {
            // Add emoji status display if it doesn't exist
            let statusEl = document.getElementById('emojiStatus');
            if (!statusEl) {
                statusEl = document.createElement('div');
                statusEl.id = 'emojiStatus';
                statusEl.className = 'status-display';
                statusEl.textContent = 'Emoji system ready...';
                
                // Insert after particle count
                const particleCountEl = document.getElementById('particleCount');
                if (particleCountEl) {
                    particleCountEl.parentElement.parentElement.appendChild(statusEl);
                }
            }
            
            const timestamp = new Date().toLocaleTimeString();
            statusEl.textContent = `[${timestamp}] ${message}`;
        }
        
        // Listen for text input
        function setupTextInput() {
            const textInput = document.getElementById('testTextInput');
            if (textInput) {
                textInput.addEventListener('input', (e) => {
                    if (linguisticSystem) {
                        const analysis = `Input: "${e.target.value}"\n` +
                                       `Transformed: "${linguisticSystem.transform(e.target.value)}"`;
                        updateLinguisticStatus(analysis);
                    }
                });
            }
        }
    </script>
</body>
</html>