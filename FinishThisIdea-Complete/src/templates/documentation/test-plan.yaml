id: test-plan
name: Test Plan
description: Comprehensive testing strategy and test coverage documentation
requiredAnalysis:
  - functions
  - apis
  - testCoverage
  - businessLogic
sections:
  - id: overview
    title: Testing Overview
    template: |
      ## Testing Strategy
      
      **Current Test Coverage**: {{coverage}}%
      **Test Files**: {{testFiles}}
      **Test Cases**: {{testCases}}
      
      ## Testing Objectives
      - Ensure all critical business logic is tested
      - Validate API endpoints function correctly
      - Verify data integrity and validation rules
      - Test error handling and edge cases
    dataMapping:
      - placeholder: "{{coverage}}"
        source: "testCoverage.coverage"
        default: "0"
      - placeholder: "{{testFiles}}"
        source: "testCoverage.testFiles"
        default: "0"
      - placeholder: "{{testCases}}"
        source: "testCoverage.testCases"
        default: "0"
  
  - id: unit-tests
    title: Unit Testing
    template: |
      ## Unit Test Requirements
      
      ### Functions to Test
      {{functionList}}
      
      ### Business Logic Tests
      {{businessLogicTests}}
    dataMapping:
      - placeholder: "{{functionList}}"
        source: "functions"
        transform: "generateTestableFunction"
      - placeholder: "{{businessLogicTests}}"
        source: "businessLogic"
        transform: "generateBusinessLogicTests"
    aiPrompt: "Based on the functions and business logic identified, create a comprehensive list of unit tests that should be written."
  
  - id: integration-tests
    title: Integration Testing
    template: |
      ## Integration Test Scenarios
      
      ### API Integration Tests
      {{apiTests}}
      
      ### Database Integration Tests
      {{databaseTests}}
    dataMapping:
      - placeholder: "{{apiTests}}"
        source: "apis"
        transform: "generateAPITests"
      - placeholder: "{{databaseTests}}"
        source: "dataModels"
        transform: "generateDatabaseTests"
  
  - id: test-data
    title: Test Data Requirements
    template: |
      ## Test Data Setup
      
      {{testDataRequirements}}
      
      ## Mock Data Examples
      {{mockDataExamples}}
    dataMapping:
      - placeholder: "{{testDataRequirements}}"
        source: "dataModels"
        transform: "generateTestDataRequirements"
      - placeholder: "{{mockDataExamples}}"
        source: "dataModels"
        transform: "generateMockDataExamples"
    aiPrompt: "Create realistic test data examples and requirements based on the data models."