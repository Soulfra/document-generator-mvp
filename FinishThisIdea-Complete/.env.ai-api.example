# FinishThisIdea AI API Service Environment Configuration
# Copy this file to .env.ai-api and configure your values

# ============================================================================
# üîß SERVICE CONFIGURATION
# ============================================================================

NODE_ENV=development
AI_API_PORT=3001

# ============================================================================
# üóÑÔ∏è DATABASE & CACHE
# ============================================================================

# PostgreSQL Database
DATABASE_URL="postgresql://finishthisidea:your_password@localhost:5432/finishthisidea"

# Redis Cache (for rate limiting and sessions)
REDIS_URL="redis://:your_redis_password@localhost:6379"

# ============================================================================
# ü§ñ LLM PROVIDERS
# ============================================================================

# Ollama (Local/Free LLM)
OLLAMA_URL="http://localhost:11434"
OLLAMA_MODELS="codellama:7b,deepseek-coder:6.7b"

# Anthropic Claude
ANTHROPIC_API_KEY="sk-ant-api03-..."

# OpenAI
OPENAI_API_KEY="sk-..."

# Azure OpenAI (optional)
AZURE_OPENAI_API_KEY=""
AZURE_OPENAI_ENDPOINT=""
AZURE_OPENAI_API_VERSION="2024-02-15-preview"

# ============================================================================
# üîê AUTHENTICATION & SECURITY
# ============================================================================

# Internal API Key (for FinishThisIdea services)
INTERNAL_API_KEY="fti_internal_your_secure_key_here"

# JWT Secret (for session management)
JWT_SECRET="your_jwt_secret_here"

# API Key Encryption Salt
API_KEY_SALT="your_encryption_salt_here"

# ============================================================================
# üìä RATE LIMITING & COSTS
# ============================================================================

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000

# Cost Controls
MAX_COST_PER_REQUEST=5.00
MAX_COST_PER_DAY=500.00
MAX_COST_PER_MONTH=5000.00

# Pricing (per 1K tokens)
CLAUDE_HAIKU_COST=0.025
CLAUDE_SONNET_COST=0.075
OPENAI_GPT35_COST=0.0015
OPENAI_GPT4_COST=0.03

# ============================================================================
# üöÄ FEATURES & CAPABILITIES
# ============================================================================

# Feature Flags
ENABLE_BYOK=true
ENABLE_CUSTOM_MODELS=true
ENABLE_ANALYTICS=true
ENABLE_CACHING=true

# BYOK Features
BYOK_ALLOWED_PROVIDERS="anthropic,openai,azure"
BYOK_MAX_KEYS_PER_USER=5

# ============================================================================
# üìà MONITORING & ANALYTICS
# ============================================================================

# Analytics Dashboard
ANALYTICS_PORT=8889
ANALYTICS_ENABLED=true

# Logging Level
LOG_LEVEL=info

# Metrics Collection
COLLECT_METRICS=true
METRICS_ENDPOINT="/metrics"

# ============================================================================
# üê≥ DOCKER & DEPLOYMENT
# ============================================================================

# Docker Configuration
POSTGRES_PASSWORD="your_secure_postgres_password"
REDIS_PASSWORD="your_secure_redis_password"

# Container Resources
OLLAMA_GPU_ENABLED=false
OLLAMA_MEMORY_LIMIT=4GB

# Scaling
AI_API_REPLICAS=3
ENABLE_LOAD_BALANCER=true

# ============================================================================
# üîó INTEGRATION SETTINGS
# ============================================================================

# Main FinishThisIdea App
MAIN_APP_URL="http://localhost:3000"
MAIN_APP_API_KEY="your_main_app_api_key"

# Webhook Endpoints
WEBHOOK_URL="http://localhost:3000/api/webhooks/ai-api"
WEBHOOK_SECRET="your_webhook_secret"

# ============================================================================
# üõ°Ô∏è SECURITY SETTINGS
# ============================================================================

# CORS
CORS_ORIGINS="http://localhost:3000,https://finishthisidea.com"

# SSL/TLS
SSL_ENABLED=false
SSL_CERT_PATH=""
SSL_KEY_PATH=""

# Request Validation
MAX_REQUEST_SIZE=10MB
REQUEST_TIMEOUT=30000

# IP Whitelisting (optional)
IP_WHITELIST=""

# ============================================================================
# üìã EXAMPLES FOR DIFFERENT ENVIRONMENTS
# ============================================================================

# Development Environment:
# - Use local Ollama for free processing
# - Enable all debugging features
# - Relaxed rate limits

# Production Environment:
# - Use cloud LLMs with proper API keys
# - Strict rate limiting and cost controls
# - Enable monitoring and analytics

# BYOK Environment:
# - Users provide their own API keys
# - No cost to platform for LLM usage
# - Focus on routing and optimization