<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎮 BOSS ROOM CURSOR OVERLAY SYSTEM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: none !important;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #fff;
            overflow: hidden;
            position: relative;
        }
        
        /* Boss Room Overlay */
        #bossRoomOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: screen;
        }
        
        /* Custom Cursor System */
        .boss-cursor {
            position: fixed;
            width: 50px;
            height: 50px;
            pointer-events: none;
            z-index: 10000;
            transform: translate(-50%, -50%);
            transition: all 0.1s ease;
        }
        
        .cursor-core {
            width: 100%;
            height: 100%;
            border: 2px solid #00ff00;
            border-radius: 50%;
            animation: cursor-pulse 1s infinite;
            position: relative;
            background: radial-gradient(circle, rgba(0,255,0,0.3), transparent);
        }
        
        .cursor-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid rgba(0,255,0,0.5);
            border-radius: 50%;
            animation: cursor-ring-expand 2s infinite;
        }
        
        @keyframes cursor-pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }
        
        @keyframes cursor-ring-expand {
            0% { width: 50px; height: 50px; opacity: 1; }
            100% { width: 150px; height: 150px; opacity: 0; }
        }
        
        /* Environmental Effects */
        .environment-particles {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #00ff00;
            border-radius: 50%;
            animation: float-up 10s infinite linear;
        }
        
        @keyframes float-up {
            0% { transform: translateY(100vh) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) translateX(100px); opacity: 0; }
        }
        
        /* Boss Room Themes */
        .theme-matrix {
            --primary-color: #00ff00;
            --secondary-color: #008800;
            --bg-color: #000000;
            --particle-color: #00ff00;
        }
        
        .theme-cyber {
            --primary-color: #00ffff;
            --secondary-color: #ff00ff;
            --bg-color: #0a0a0a;
            --particle-color: #00ffff;
        }
        
        .theme-hell {
            --primary-color: #ff0000;
            --secondary-color: #ff6600;
            --bg-color: #1a0000;
            --particle-color: #ff3300;
        }
        
        .theme-heaven {
            --primary-color: #ffffff;
            --secondary-color: #ffff00;
            --bg-color: #1a1a2e;
            --particle-color: #ffffcc;
        }
        
        .theme-void {
            --primary-color: #9900ff;
            --secondary-color: #000000;
            --bg-color: #0a0014;
            --particle-color: #6600cc;
        }
        
        /* Sound Visualizer */
        .sound-visualizer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            pointer-events: none;
            z-index: 100;
        }
        
        .frequency-bar {
            width: 2%;
            background: linear-gradient(to top, var(--primary-color), var(--secondary-color));
            transition: height 0.1s ease;
            opacity: 0.8;
        }
        
        /* Menu System */
        .boss-menu {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(0, 0, 0, 0.9);
            border: 3px solid var(--primary-color);
            padding: 30px;
            border-radius: 20px;
            z-index: 10001;
            transition: all 0.3s ease;
            box-shadow: 0 0 50px var(--primary-color);
        }
        
        .boss-menu.active {
            transform: translate(-50%, -50%) scale(1);
        }
        
        .menu-title {
            font-size: 24px;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px currentColor;
        }
        
        .menu-item {
            padding: 15px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .menu-item:hover {
            border-color: var(--primary-color);
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        .menu-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
            transition: left 0.5s ease;
        }
        
        .menu-item:hover::before {
            left: 100%;
        }
        
        /* HUD Elements */
        .hud-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            pointer-events: none;
        }
        
        .hud-element {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid var(--primary-color);
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            font-size: 14px;
            color: var(--primary-color);
        }
        
        /* Boss Health Bar */
        .boss-health {
            position: fixed;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 30px;
            background: rgba(0, 0, 0, 0.8);
            border: 3px solid var(--primary-color);
            border-radius: 15px;
            overflow: hidden;
            display: none;
            z-index: 1000;
        }
        
        .boss-health.active {
            display: block;
        }
        
        .health-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transition: width 0.5s ease;
            box-shadow: 0 0 20px var(--primary-color);
        }
        
        /* Command Console */
        .command-console {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 600px;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid var(--primary-color);
            border-radius: 10px;
            padding: 15px;
            display: none;
            z-index: 10002;
        }
        
        .command-console.active {
            display: block;
        }
        
        .console-input {
            width: 100%;
            background: transparent;
            border: none;
            color: var(--primary-color);
            font-family: 'Courier New', monospace;
            font-size: 16px;
            outline: none;
        }
        
        .console-output {
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 10px;
            color: var(--primary-color);
            font-size: 14px;
        }
        
        /* Environmental Effects */
        .screen-shake {
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .glitch-effect {
            animation: glitch 1s infinite;
        }
        
        @keyframes glitch {
            0%, 100% { 
                text-shadow: 
                    2px 2px 0 var(--secondary-color),
                    -2px -2px 0 var(--primary-color);
            }
            50% { 
                text-shadow: 
                    -2px 2px 0 var(--primary-color),
                    2px -2px 0 var(--secondary-color);
            }
        }
        
        /* Boss Room Background */
        .boss-room-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent, var(--bg-color)),
                        linear-gradient(0deg, var(--bg-color), transparent);
            z-index: -1;
        }
        
        /* Power-up Effects */
        .power-up {
            position: absolute;
            width: 30px;
            height: 30px;
            border: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: power-up-spin 2s infinite linear;
        }
        
        @keyframes power-up-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Warning System */
        .warning-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 0, 0, 0);
            pointer-events: none;
            z-index: 9998;
            transition: background 0.3s ease;
        }
        
        .warning-overlay.active {
            background: rgba(255, 0, 0, 0.3);
            animation: warning-pulse 1s infinite;
        }
        
        @keyframes warning-pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.1; }
        }
        
        /* Action Text */
        .action-text {
            position: fixed;
            font-size: 48px;
            font-weight: bold;
            color: var(--primary-color);
            text-shadow: 0 0 20px currentColor;
            pointer-events: none;
            z-index: 10003;
            animation: action-text-appear 2s forwards;
        }
        
        @keyframes action-text-appear {
            0% { 
                transform: translate(-50%, -50%) scale(0) rotate(180deg);
                opacity: 0;
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.5) rotate(0deg);
                opacity: 1;
            }
            100% { 
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="theme-matrix">
    <!-- Boss Room Background -->
    <div class="boss-room-bg"></div>
    
    <!-- Environmental Particles -->
    <div class="environment-particles" id="particles"></div>
    
    <!-- Warning Overlay -->
    <div class="warning-overlay" id="warningOverlay"></div>
    
    <!-- Boss Room Overlay -->
    <canvas id="bossRoomOverlay"></canvas>
    
    <!-- Custom Cursor -->
    <div class="boss-cursor" id="bossCursor">
        <div class="cursor-core">
            <div class="cursor-ring"></div>
            <div class="cursor-ring" style="animation-delay: 0.5s;"></div>
            <div class="cursor-ring" style="animation-delay: 1s;"></div>
        </div>
    </div>
    
    <!-- Sound Visualizer -->
    <div class="sound-visualizer" id="soundVisualizer"></div>
    
    <!-- HUD Elements -->
    <div class="hud-container">
        <div class="hud-element">
            <div>🎮 MODE: <span id="currentMode">EXPLORATION</span></div>
        </div>
        <div class="hud-element">
            <div>🎨 THEME: <span id="currentTheme">MATRIX</span></div>
        </div>
        <div class="hud-element">
            <div>🎵 SOUND: <span id="soundStatus">ON</span></div>
        </div>
        <div class="hud-element">
            <div>⚡ POWER: <span id="powerLevel">100%</span></div>
        </div>
    </div>
    
    <!-- Boss Health Bar -->
    <div class="boss-health" id="bossHealth">
        <div class="health-bar" id="healthBar" style="width: 100%;"></div>
    </div>
    
    <!-- Boss Menu -->
    <div class="boss-menu" id="bossMenu">
        <h2 class="menu-title glitch-effect">🎮 BOSS ROOM MENU</h2>
        <div class="menu-item" onclick="bossRoom.changeTheme('matrix')">
            <span style="position: relative; z-index: 1;">🟢 MATRIX MODE</span>
        </div>
        <div class="menu-item" onclick="bossRoom.changeTheme('cyber')">
            <span style="position: relative; z-index: 1;">🔵 CYBER MODE</span>
        </div>
        <div class="menu-item" onclick="bossRoom.changeTheme('hell')">
            <span style="position: relative; z-index: 1;">🔴 HELL MODE</span>
        </div>
        <div class="menu-item" onclick="bossRoom.changeTheme('heaven')">
            <span style="position: relative; z-index: 1;">⚪ HEAVEN MODE</span>
        </div>
        <div class="menu-item" onclick="bossRoom.changeTheme('void')">
            <span style="position: relative; z-index: 1;">🟣 VOID MODE</span>
        </div>
        <div class="menu-item" onclick="bossRoom.toggleConsole()">
            <span style="position: relative; z-index: 1;">💻 COMMAND CONSOLE</span>
        </div>
        <div class="menu-item" onclick="bossRoom.closeMenu()">
            <span style="position: relative; z-index: 1;">❌ CLOSE</span>
        </div>
    </div>
    
    <!-- Command Console -->
    <div class="command-console" id="commandConsole">
        <div class="console-output" id="consoleOutput">
            <div>&gt; Boss Room Console v1.0</div>
            <div>&gt; Type 'help' for commands</div>
        </div>
        <input type="text" class="console-input" id="consoleInput" placeholder="Enter command..." />
    </div>
    
    <!-- Main Content (Your actual website goes here) -->
    <div style="padding: 100px; text-align: center;">
        <h1 style="font-size: 48px; margin-bottom: 30px;" class="glitch-effect">BOSS ROOM CURSOR OVERLAY</h1>
        <p style="font-size: 24px; margin-bottom: 20px;">The entire cursor is now an environmental experience!</p>
        <p style="font-size: 18px; color: #888;">Press SPACE to open boss menu • Use keyboard commands • Experience the atmosphere</p>
    </div>
    
    <script>
        class BossRoomCursor {
            constructor() {
                this.cursor = document.getElementById('bossCursor');
                this.canvas = document.getElementById('bossRoomOverlay');
                this.ctx = this.canvas.getContext('2d');
                this.particles = [];
                this.audioContext = null;
                this.analyser = null;
                this.currentTheme = 'matrix';
                this.menuOpen = false;
                this.consoleOpen = false;
                this.bossMode = false;
                this.powerLevel = 100;
                this.commands = new Map();
                
                this.init();
            }
            
            init() {
                // Set canvas size
                this.resizeCanvas();
                window.addEventListener('resize', () => this.resizeCanvas());
                
                // Mouse tracking
                document.addEventListener('mousemove', (e) => this.updateCursor(e));
                document.addEventListener('mousedown', () => this.cursorAttack());
                document.addEventListener('mouseup', () => this.cursorRelease());
                
                // Keyboard controls
                document.addEventListener('keydown', (e) => this.handleKeyboard(e));
                
                // Initialize audio
                this.initAudio();
                
                // Initialize particles
                this.initParticles();
                
                // Initialize sound visualizer
                this.initSoundVisualizer();
                
                // Register commands
                this.registerCommands();
                
                // Start animation loop
                this.animate();
                
                // Environmental effects
                this.startEnvironmentalEffects();
                
                console.log('🎮 BOSS ROOM CURSOR SYSTEM INITIALIZED');
                console.log('Press SPACE for menu, use keyboard commands');
            }
            
            resizeCanvas() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
            
            updateCursor(e) {
                this.cursor.style.left = e.clientX + 'px';
                this.cursor.style.top = e.clientY + 'px';
                
                // Trail effect
                if (Math.random() > 0.8) {
                    this.createTrailParticle(e.clientX, e.clientY);
                }
                
                // Update canvas effects based on position
                this.updateCanvasEffects(e.clientX, e.clientY);
            }
            
            cursorAttack() {
                this.cursor.classList.add('attacking');
                this.cursor.style.transform = 'translate(-50%, -50%) scale(0.8)';
                
                // Screen shake effect
                document.body.classList.add('screen-shake');
                setTimeout(() => document.body.classList.remove('screen-shake'), 500);
                
                // Create explosion effect
                this.createExplosion(
                    parseInt(this.cursor.style.left),
                    parseInt(this.cursor.style.top)
                );
                
                // Play attack sound
                this.playSound('attack');
            }
            
            cursorRelease() {
                this.cursor.classList.remove('attacking');
                this.cursor.style.transform = 'translate(-50%, -50%) scale(1)';
            }
            
            handleKeyboard(e) {
                switch(e.key.toLowerCase()) {
                    case ' ':
                        e.preventDefault();
                        this.toggleMenu();
                        break;
                    case 'escape':
                        this.closeAll();
                        break;
                    case '1':
                        this.changeTheme('matrix');
                        break;
                    case '2':
                        this.changeTheme('cyber');
                        break;
                    case '3':
                        this.changeTheme('hell');
                        break;
                    case '4':
                        this.changeTheme('heaven');
                        break;
                    case '5':
                        this.changeTheme('void');
                        break;
                    case 'b':
                        this.toggleBossMode();
                        break;
                    case 'm':
                        this.toggleMusic();
                        break;
                    case 'p':
                        this.spawnPowerUp();
                        break;
                    case '`':
                        this.toggleConsole();
                        break;
                    case 'enter':
                        if (this.consoleOpen) {
                            this.executeCommand();
                        }
                        break;
                }
            }
            
            toggleMenu() {
                this.menuOpen = !this.menuOpen;
                const menu = document.getElementById('bossMenu');
                menu.classList.toggle('active', this.menuOpen);
                
                if (this.menuOpen) {
                    this.playSound('menu-open');
                    this.showActionText('MENU OPENED');
                }
            }
            
            closeMenu() {
                this.menuOpen = false;
                document.getElementById('bossMenu').classList.remove('active');
                this.playSound('menu-close');
            }
            
            closeAll() {
                this.closeMenu();
                this.consoleOpen = false;
                document.getElementById('commandConsole').classList.remove('active');
            }
            
            changeTheme(theme) {
                this.currentTheme = theme;
                document.body.className = `theme-${theme}`;
                document.getElementById('currentTheme').textContent = theme.toUpperCase();
                
                // Update cursor color
                this.updateCursorStyle(theme);
                
                // Environmental change effect
                this.createEnvironmentalTransition(theme);
                
                // Play theme sound
                this.playSound(`theme-${theme}`);
                
                this.showActionText(`${theme.toUpperCase()} MODE ACTIVATED`);
                
                console.log(`🎨 Theme changed to: ${theme}`);
            }
            
            updateCursorStyle(theme) {
                const colors = {
                    matrix: '#00ff00',
                    cyber: '#00ffff',
                    hell: '#ff0000',
                    heaven: '#ffffff',
                    void: '#9900ff'
                };
                
                const cursorCore = this.cursor.querySelector('.cursor-core');
                cursorCore.style.borderColor = colors[theme];
                
                const rings = this.cursor.querySelectorAll('.cursor-ring');
                rings.forEach(ring => {
                    ring.style.borderColor = colors[theme] + '80';
                });
            }
            
            toggleBossMode() {
                this.bossMode = !this.bossMode;
                const bossHealth = document.getElementById('bossHealth');
                bossHealth.classList.toggle('active', this.bossMode);
                
                document.getElementById('currentMode').textContent = 
                    this.bossMode ? 'BOSS BATTLE' : 'EXPLORATION';
                
                if (this.bossMode) {
                    this.startBossBattle();
                } else {
                    this.endBossBattle();
                }
            }
            
            startBossBattle() {
                this.showActionText('BOSS BATTLE INITIATED!');
                document.getElementById('warningOverlay').classList.add('active');
                
                // Epic boss music
                this.playSound('boss-music');
                
                // Spawn boss effects
                this.spawnBossEffects();
                
                console.log('⚔️ Boss battle started!');
            }
            
            endBossBattle() {
                document.getElementById('warningOverlay').classList.remove('active');
                this.showActionText('BOSS DEFEATED!');
                console.log('🏆 Boss battle ended!');
            }
            
            initAudio() {
                // Initialize Web Audio API
                this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                this.analyser = this.audioContext.createAnalyser();
                this.analyser.fftSize = 256;
                
                // Create oscillator for sound effects
                this.oscillator = null;
                
                console.log('🎵 Audio system initialized');
            }
            
            playSound(type) {
                if (!this.audioContext) return;
                
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                // Different sounds for different actions
                switch(type) {
                    case 'attack':
                        oscillator.frequency.setValueAtTime(200, this.audioContext.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(50, this.audioContext.currentTime + 0.1);
                        gainNode.gain.setValueAtTime(0.3, this.audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.1);
                        break;
                    case 'menu-open':
                        oscillator.frequency.setValueAtTime(400, this.audioContext.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(800, this.audioContext.currentTime + 0.2);
                        gainNode.gain.setValueAtTime(0.2, this.audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.2);
                        break;
                    case 'power-up':
                        oscillator.frequency.setValueAtTime(600, this.audioContext.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(1200, this.audioContext.currentTime + 0.3);
                        gainNode.gain.setValueAtTime(0.25, this.audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.3);
                        break;
                }
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + 0.3);
            }
            
            initSoundVisualizer() {
                const visualizer = document.getElementById('soundVisualizer');
                for (let i = 0; i < 50; i++) {
                    const bar = document.createElement('div');
                    bar.className = 'frequency-bar';
                    bar.style.height = Math.random() * 100 + 'px';
                    visualizer.appendChild(bar);
                }
                
                // Animate bars
                setInterval(() => {
                    const bars = visualizer.querySelectorAll('.frequency-bar');
                    bars.forEach(bar => {
                        bar.style.height = Math.random() * 150 + 50 + 'px';
                    });
                }, 100);
            }
            
            initParticles() {
                const particleContainer = document.getElementById('particles');
                
                for (let i = 0; i < 50; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * window.innerWidth + 'px';
                    particle.style.animationDelay = Math.random() * 10 + 's';
                    particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                    particleContainer.appendChild(particle);
                }
            }
            
            createTrailParticle(x, y) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: fixed;
                    left: ${x}px;
                    top: ${y}px;
                    width: 4px;
                    height: 4px;
                    background: var(--primary-color);
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 9999;
                    animation: fade-out 1s forwards;
                `;
                
                document.body.appendChild(particle);
                setTimeout(() => particle.remove(), 1000);
            }
            
            createExplosion(x, y) {
                for (let i = 0; i < 20; i++) {
                    const particle = document.createElement('div');
                    const angle = (Math.PI * 2 * i) / 20;
                    const velocity = Math.random() * 100 + 50;
                    
                    particle.style.cssText = `
                        position: fixed;
                        left: ${x}px;
                        top: ${y}px;
                        width: 8px;
                        height: 8px;
                        background: var(--primary-color);
                        border-radius: 50%;
                        pointer-events: none;
                        z-index: 10004;
                    `;
                    
                    document.body.appendChild(particle);
                    
                    // Animate particle
                    let frame = 0;
                    const animate = () => {
                        frame++;
                        particle.style.left = x + Math.cos(angle) * velocity * (frame / 30) + 'px';
                        particle.style.top = y + Math.sin(angle) * velocity * (frame / 30) + 'px';
                        particle.style.opacity = 1 - (frame / 30);
                        
                        if (frame < 30) {
                            requestAnimationFrame(animate);
                        } else {
                            particle.remove();
                        }
                    };
                    
                    requestAnimationFrame(animate);
                }
            }
            
            updateCanvasEffects(x, y) {
                // Clear canvas
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Draw radial gradient from cursor
                const gradient = this.ctx.createRadialGradient(x, y, 0, x, y, 200);
                gradient.addColorStop(0, 'rgba(0, 255, 0, 0.1)');
                gradient.addColorStop(1, 'rgba(0, 255, 0, 0)');
                
                this.ctx.fillStyle = gradient;
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
            }
            
            createEnvironmentalTransition(theme) {
                const overlay = document.createElement('div');
                overlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: var(--primary-color);
                    z-index: 20000;
                    opacity: 0;
                    pointer-events: none;
                    animation: flash 0.5s ease;
                `;
                
                document.body.appendChild(overlay);
                setTimeout(() => overlay.remove(), 500);
            }
            
            spawnPowerUp() {
                const powerUp = document.createElement('div');
                powerUp.className = 'power-up';
                powerUp.style.left = Math.random() * (window.innerWidth - 30) + 'px';
                powerUp.style.top = Math.random() * (window.innerHeight - 30) + 'px';
                
                document.body.appendChild(powerUp);
                
                // Click to collect
                powerUp.addEventListener('click', () => {
                    this.collectPowerUp();
                    powerUp.remove();
                });
                
                // Auto remove after 5 seconds
                setTimeout(() => powerUp.remove(), 5000);
                
                this.showActionText('POWER-UP SPAWNED!');
            }
            
            collectPowerUp() {
                this.powerLevel = Math.min(100, this.powerLevel + 10);
                document.getElementById('powerLevel').textContent = this.powerLevel + '%';
                this.playSound('power-up');
                this.showActionText('+10 POWER!');
            }
            
            toggleConsole() {
                this.consoleOpen = !this.consoleOpen;
                const console = document.getElementById('commandConsole');
                console.classList.toggle('active', this.consoleOpen);
                
                if (this.consoleOpen) {
                    document.getElementById('consoleInput').focus();
                }
            }
            
            registerCommands() {
                this.commands.set('help', () => {
                    this.consoleLog('Available commands:');
                    this.consoleLog('- theme [matrix/cyber/hell/heaven/void]');
                    this.consoleLog('- boss [on/off]');
                    this.consoleLog('- power [amount]');
                    this.consoleLog('- shake');
                    this.consoleLog('- clear');
                    this.consoleLog('- spawn');
                    this.consoleLog('- glitch');
                });
                
                this.commands.set('theme', (args) => {
                    if (args[0]) {
                        this.changeTheme(args[0]);
                        this.consoleLog(`Theme changed to ${args[0]}`);
                    }
                });
                
                this.commands.set('boss', (args) => {
                    if (args[0] === 'on') {
                        this.bossMode = false;
                        this.toggleBossMode();
                    } else if (args[0] === 'off') {
                        this.bossMode = true;
                        this.toggleBossMode();
                    }
                });
                
                this.commands.set('power', (args) => {
                    const amount = parseInt(args[0]) || 100;
                    this.powerLevel = Math.max(0, Math.min(100, amount));
                    document.getElementById('powerLevel').textContent = this.powerLevel + '%';
                    this.consoleLog(`Power set to ${this.powerLevel}%`);
                });
                
                this.commands.set('shake', () => {
                    document.body.classList.add('screen-shake');
                    setTimeout(() => document.body.classList.remove('screen-shake'), 1000);
                    this.consoleLog('Screen shake activated!');
                });
                
                this.commands.set('clear', () => {
                    document.getElementById('consoleOutput').innerHTML = 
                        '<div>&gt; Console cleared</div>';
                });
                
                this.commands.set('spawn', () => {
                    for (let i = 0; i < 5; i++) {
                        setTimeout(() => this.spawnPowerUp(), i * 200);
                    }
                    this.consoleLog('Spawned 5 power-ups!');
                });
                
                this.commands.set('glitch', () => {
                    document.body.classList.add('glitch-effect');
                    setTimeout(() => document.body.classList.remove('glitch-effect'), 3000);
                    this.consoleLog('Glitch mode activated!');
                });
            }
            
            executeCommand() {
                const input = document.getElementById('consoleInput');
                const command = input.value.trim();
                
                if (!command) return;
                
                this.consoleLog(`> ${command}`);
                
                const [cmd, ...args] = command.split(' ');
                const handler = this.commands.get(cmd);
                
                if (handler) {
                    handler(args);
                } else {
                    this.consoleLog(`Unknown command: ${cmd}`);
                }
                
                input.value = '';
            }
            
            consoleLog(message) {
                const output = document.getElementById('consoleOutput');
                const line = document.createElement('div');
                line.textContent = message;
                output.appendChild(line);
                output.scrollTop = output.scrollHeight;
            }
            
            showActionText(text) {
                const actionText = document.createElement('div');
                actionText.className = 'action-text';
                actionText.textContent = text;
                actionText.style.left = '50%';
                actionText.style.top = '50%';
                
                document.body.appendChild(actionText);
                setTimeout(() => actionText.remove(), 2000);
            }
            
            startEnvironmentalEffects() {
                // Periodic environmental changes
                setInterval(() => {
                    if (this.bossMode) {
                        // Boss mode effects
                        if (Math.random() > 0.8) {
                            this.createLightning();
                        }
                    }
                    
                    // Update power drain
                    if (this.powerLevel > 0) {
                        this.powerLevel = Math.max(0, this.powerLevel - 0.1);
                        document.getElementById('powerLevel').textContent = 
                            Math.floor(this.powerLevel) + '%';
                    }
                }, 1000);
            }
            
            createLightning() {
                const lightning = document.createElement('div');
                lightning.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: ${Math.random() * window.innerWidth}px;
                    width: 3px;
                    height: 100vh;
                    background: linear-gradient(to bottom, transparent, var(--primary-color), transparent);
                    z-index: 10005;
                    opacity: 0;
                    animation: lightning-strike 0.3s ease;
                `;
                
                document.body.appendChild(lightning);
                setTimeout(() => lightning.remove(), 300);
            }
            
            spawnBossEffects() {
                // Create boss-specific visual effects
                setInterval(() => {
                    if (this.bossMode) {
                        const healthBar = document.getElementById('healthBar');
                        const currentWidth = parseFloat(healthBar.style.width);
                        
                        // Simulate boss taking damage
                        if (currentWidth > 0) {
                            healthBar.style.width = (currentWidth - 0.5) + '%';
                        } else {
                            this.toggleBossMode();
                        }
                    }
                }, 100);
            }
            
            animate() {
                requestAnimationFrame(() => this.animate());
                
                // Update particle effects
                this.updateParticles();
                
                // Update canvas effects
                this.updateCanvasAnimation();
            }
            
            updateParticles() {
                // Particle animation logic
            }
            
            updateCanvasAnimation() {
                // Canvas animation logic
            }
            
            toggleMusic() {
                const soundStatus = document.getElementById('soundStatus');
                const currentStatus = soundStatus.textContent;
                soundStatus.textContent = currentStatus === 'ON' ? 'OFF' : 'ON';
                
                this.showActionText(`SOUND ${soundStatus.textContent}`);
            }
        }
        
        // Global styles for animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fade-out {
                0% { opacity: 1; transform: scale(1); }
                100% { opacity: 0; transform: scale(0.5); }
            }
            
            @keyframes flash {
                0%, 100% { opacity: 0; }
                50% { opacity: 0.3; }
            }
            
            @keyframes lightning-strike {
                0% { opacity: 0; }
                50% { opacity: 1; }
                100% { opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
        // Initialize Boss Room Cursor
        window.bossRoom = new BossRoomCursor();
        
        console.log('🎮 BOSS ROOM CURSOR OVERLAY SYSTEM');
        console.log('===================================');
        console.log('Controls:');
        console.log('SPACE - Open menu');
        console.log('1-5 - Quick theme change');
        console.log('B - Toggle boss mode');
        console.log('M - Toggle music');
        console.log('P - Spawn power-up');
        console.log('` - Open console');
        console.log('Mouse - Move and attack');
    </script>
</body>
</html>