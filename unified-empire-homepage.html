<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè∞ Empire Command Center - Voice & Blockchain Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #00ff88;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header Command Center */
        .command-header {
            background: rgba(0, 255, 136, 0.1);
            border-bottom: 2px solid #00ff88;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .empire-title {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px #00ff88;
            animation: pulse 2s infinite;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            font-size: 0.9em;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ff88;
            animation: blink 1.5s infinite;
        }

        /* Voice Command Interface */
        .voice-interface {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(26, 26, 46, 0.95);
            border: 2px solid #00ff88;
            border-radius: 15px;
            padding: 20px;
            width: 350px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .voice-button {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00ff88, #88ff00);
            border: none;
            color: #000;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 auto 15px;
            display: block;
            position: relative;
        }

        .voice-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px #00ff88;
        }

        .voice-button.listening {
            animation: listening-pulse 1s infinite;
            background: linear-gradient(45deg, #ff0088, #ff8800);
        }

        .voice-status {
            text-align: center;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .voice-transcript {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #00ff88;
            min-height: 100px;
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        /* Command Input Interface */
        .command-interface {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .command-input-container {
            background: rgba(26, 26, 46, 0.8);
            border: 2px solid #00ff88;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .command-input {
            width: 100%;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00ff88;
            border-radius: 8px;
            padding: 15px;
            color: #00ff88;
            font-family: inherit;
            font-size: 1.1em;
            resize: vertical;
            min-height: 60px;
        }

        .command-input:focus {
            outline: none;
            border-color: #88ff00;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
        }

        .quick-commands {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .quick-cmd {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid #00ff88;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .quick-cmd:hover {
            background: rgba(0, 255, 136, 0.2);
            transform: translateY(-2px);
        }

        /* Blockchain Status */
        .blockchain-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .blockchain-card {
            background: rgba(26, 26, 46, 0.8);
            border: 1px solid #00ff88;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .blockchain-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .blockchain-name {
            font-size: 1.2em;
            margin-bottom: 10px;
            color: #88ff00;
        }

        .blockchain-balance {
            font-size: 0.9em;
            opacity: 0.8;
        }

        /* Empire Entities Display */
        .empire-entities {
            background: rgba(26, 26, 46, 0.8);
            border: 1px solid #00ff88;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .entities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .entity-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 136, 0.5);
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s ease;
        }

        .entity-card:hover {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }

        .entity-name {
            font-weight: bold;
            color: #88ff00;
            margin-bottom: 5px;
        }

        .entity-type {
            font-size: 0.8em;
            opacity: 0.7;
            margin-bottom: 10px;
        }

        .entity-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
        }

        /* Output Terminal */
        .output-terminal {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ff88;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            min-height: 300px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
        }

        .terminal-line {
            margin: 5px 0;
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
        }

        .terminal-prompt {
            color: #88ff00;
        }

        .terminal-command {
            color: #00ff88;
        }

        .terminal-output {
            color: #ffffff;
            margin-left: 20px;
        }

        .terminal-error {
            color: #ff4444;
        }

        /* Animations */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @keyframes listening-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .voice-interface {
                position: relative;
                top: auto;
                right: auto;
                margin: 20px auto;
                width: 90%;
            }

            .empire-title {
                font-size: 1.8em;
            }

            .command-interface {
                padding: 0 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Command Header -->
    <div class="command-header">
        <h1 class="empire-title">üè∞ EMPIRE COMMAND CENTER</h1>
        <p>Voice-Activated ‚Ä¢ Blockchain-Verified ‚Ä¢ AI-Powered</p>
        <div class="status-bar">
            <div class="status-item">
                <div class="status-dot"></div>
                <span id="empire-status">Empire: ONLINE</span>
            </div>
            <div class="status-item">
                <div class="status-dot"></div>
                <span id="ai-status">AI Assistant: READY</span>
            </div>
            <div class="status-item">
                <div class="status-dot"></div>
                <span id="blockchain-status">Blockchain: CONNECTED</span>
            </div>
            <div class="status-item">
                <div class="status-dot"></div>
                <span id="voice-status">Voice: STANDBY</span>
            </div>
        </div>
    </div>

    <!-- Voice Interface -->
    <div class="voice-interface">
        <button class="voice-button" id="voiceButton">üé§</button>
        <div class="voice-status" id="voiceStatus">Click to talk to local administrator</div>
        <div class="voice-transcript" id="voiceTranscript">
            <p>Say: "Talk to local administrator" to begin</p>
            <p>Or: "Help me with [task]"</p>
            <p>Or: "Search documentation for [query]"</p>
        </div>
        <div style="display: flex; gap: 10px;">
            <button onclick="clearTranscript()" style="flex: 1; background: rgba(255, 68, 68, 0.2); border: 1px solid #ff4444; color: #ff4444; padding: 8px; border-radius: 5px; cursor: pointer;">Clear</button>
            <button onclick="executeCommand()" style="flex: 1; background: rgba(0, 255, 136, 0.2); border: 1px solid #00ff88; color: #00ff88; padding: 8px; border-radius: 5px; cursor: pointer;">Execute</button>
        </div>
    </div>

    <!-- Main Command Interface -->
    <div class="command-interface">
        <!-- Command Input -->
        <div class="command-input-container">
            <h3>üéØ Natural Language Commands</h3>
            <textarea 
                class="command-input" 
                id="commandInput" 
                placeholder="Type your command here... (e.g., 'Generate content for deathtodata.com', 'Show me empire statistics', 'Talk to local administrator')"
            ></textarea>
            <div class="quick-commands">
                <div class="quick-cmd" onclick="executeQuickCommand('Talk to local administrator')">
                    ü§ñ Talk to Administrator
                </div>
                <div class="quick-cmd" onclick="executeQuickCommand('Show empire status')">
                    üìä Empire Status
                </div>
                <div class="quick-cmd" onclick="executeQuickCommand('Generate content')">
                    üéÅ Generate Content
                </div>
                <div class="quick-cmd" onclick="executeQuickCommand('Search documentation')">
                    üìö Search Docs
                </div>
                <div class="quick-cmd" onclick="executeQuickCommand('Show blockchain balances')">
                    ‚õìÔ∏è Blockchain Status
                </div>
                <div class="quick-cmd" onclick="executeQuickCommand('Help with commands')">
                    ‚ùì Help & Commands
                </div>
            </div>
        </div>

        <!-- Blockchain Status -->
        <div class="blockchain-status">
            <div class="blockchain-card" id="ethereum-card">
                <div class="blockchain-icon">‚ü†</div>
                <div class="blockchain-name">Ethereum</div>
                <div class="blockchain-balance" id="eth-balance">Connecting...</div>
            </div>
            <div class="blockchain-card" id="bitcoin-card">
                <div class="blockchain-icon">‚Çø</div>
                <div class="blockchain-name">Bitcoin</div>
                <div class="blockchain-balance" id="btc-balance">Connecting...</div>
            </div>
            <div class="blockchain-card" id="solana-card">
                <div class="blockchain-icon">‚óé</div>
                <div class="blockchain-name">Solana</div>
                <div class="blockchain-balance" id="sol-balance">Connecting...</div>
            </div>
            <div class="blockchain-card" id="monero-card">
                <div class="blockchain-icon">…±</div>
                <div class="blockchain-name">Monero</div>
                <div class="blockchain-balance" id="xmr-balance">Private</div>
            </div>
        </div>

        <!-- Empire Entities -->
        <div class="empire-entities">
            <h3>üè∞ Empire Entities</h3>
            <div class="entities-grid" id="entitiesGrid">
                <!-- Entities will be loaded dynamically -->
            </div>
        </div>

        <!-- Output Terminal -->
        <div class="output-terminal" id="outputTerminal">
            <div class="terminal-line">
                <span class="terminal-prompt">empire@command-center:~$</span> 
                <span class="terminal-command">status</span>
            </div>
            <div class="terminal-line">
                <span class="terminal-output">Empire Command Center initialized</span>
            </div>
            <div class="terminal-line">
                <span class="terminal-output">Voice recognition: Ready</span>
            </div>
            <div class="terminal-line">
                <span class="terminal-output">Blockchain integration: Active</span>
            </div>
            <div class="terminal-line">
                <span class="terminal-output">AI Administrator: Standby</span>
            </div>
            <div class="terminal-line">
                <span class="terminal-prompt">empire@command-center:~$</span> 
                <span style="animation: blink 1s infinite;">_</span>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Global state
        let isListening = false;
        let recognition = null;
        let empireConnection = null;
        let currentTranscript = '';

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeVoiceRecognition();
            initializeEmpireConnection();
            initializeBlockchainConnections();
            loadEmpireEntities();
            setupKeyboardShortcuts();
            
            // Auto-update every 30 seconds
            setInterval(updateSystemStatus, 30000);
        });

        // Voice Recognition Setup
        function initializeVoiceRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                
                recognition.continuous = true;
                recognition.interimResults = true;
                recognition.lang = 'en-US';
                
                recognition.onstart = function() {
                    isListening = true;
                    updateVoiceUI();
                    addTerminalLine('Voice recognition started', 'output');
                };
                
                recognition.onresult = function(event) {
                    let transcript = '';
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        transcript += event.results[i][0].transcript;
                    }
                    currentTranscript = transcript;
                    updateTranscript(transcript);
                };
                
                recognition.onerror = function(event) {
                    addTerminalLine(`Voice recognition error: ${event.error}`, 'error');
                    isListening = false;
                    updateVoiceUI();
                };
                
                recognition.onend = function() {
                    isListening = false;
                    updateVoiceUI();
                    if (currentTranscript.trim()) {
                        processVoiceCommand(currentTranscript);
                    }
                };
            } else {
                addTerminalLine('Voice recognition not supported in this browser', 'error');
            }
        }

        // Voice Button Handler
        document.getElementById('voiceButton').addEventListener('click', function() {
            if (!recognition) return;
            
            if (isListening) {
                recognition.stop();
            } else {
                recognition.start();
            }
        });

        // Update Voice UI
        function updateVoiceUI() {
            const button = document.getElementById('voiceButton');
            const status = document.getElementById('voiceStatus');
            const voiceStatus = document.getElementById('voice-status');
            
            if (isListening) {
                button.classList.add('listening');
                button.innerHTML = 'üî¥';
                status.textContent = 'Listening... Say your command';
                voiceStatus.textContent = 'Voice: LISTENING';
            } else {
                button.classList.remove('listening');
                button.innerHTML = 'üé§';
                status.textContent = 'Click to talk to local administrator';
                voiceStatus.textContent = 'Voice: STANDBY';
            }
        }

        // Update Transcript
        function updateTranscript(transcript) {
            const transcriptDiv = document.getElementById('voiceTranscript');
            transcriptDiv.innerHTML = `<p><strong>You said:</strong> "${transcript}"</p>`;
        }

        // Clear Transcript
        function clearTranscript() {
            document.getElementById('voiceTranscript').innerHTML = `
                <p>Say: "Talk to local administrator" to begin</p>
                <p>Or: "Help me with [task]"</p>
                <p>Or: "Search documentation for [query]"</p>
            `;
            currentTranscript = '';
        }

        // Execute Command
        function executeCommand() {
            const input = document.getElementById('commandInput');
            const command = input.value.trim() || currentTranscript.trim();
            
            if (command) {
                processCommand(command);
                input.value = '';
                currentTranscript = '';
            }
        }

        // Execute Quick Command
        function executeQuickCommand(command) {
            document.getElementById('commandInput').value = command;
            processCommand(command);
        }

        // Process Voice Command
        function processVoiceCommand(transcript) {
            addTerminalLine(`Voice command: "${transcript}"`, 'command');
            processCommand(transcript);
        }

        // Main Command Processor
        async function processCommand(command) {
            addTerminalLine(command, 'command');
            
            // Command routing
            const lowerCommand = command.toLowerCase();
            
            if (lowerCommand.includes('talk to') && lowerCommand.includes('administrator')) {
                await talkToAdministrator(command);
            } else if (lowerCommand.includes('empire status') || lowerCommand.includes('show status')) {
                await showEmpireStatus();
            } else if (lowerCommand.includes('generate content')) {
                await generateContent(command);
            } else if (lowerCommand.includes('search documentation') || lowerCommand.includes('search docs')) {
                await searchDocumentation(command);
            } else if (lowerCommand.includes('blockchain') || lowerCommand.includes('balance')) {
                await showBlockchainStatus();
            } else if (lowerCommand.includes('help')) {
                showHelp();
            } else {
                // Send to AI for interpretation
                await sendToAI(command);
            }
        }

        // Talk to Administrator
        async function talkToAdministrator(command) {
            addTerminalLine('Activating local AI administrator...', 'output');
            
            try {
                const response = await fetch('http://localhost:7777/api/administrator/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        message: command,
                        voice: true,
                        timestamp: new Date().toISOString()
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    addTerminalLine(`Administrator: ${data.response}`, 'output');
                    
                    // If there's an action to perform
                    if (data.action) {
                        addTerminalLine(`Executing: ${data.action.description}`, 'output');
                        await executeEmpireAction(data.action);
                    }
                } else {
                    addTerminalLine('Administrator is currently unavailable', 'error');
                }
            } catch (error) {
                addTerminalLine('Failed to connect to administrator', 'error');
            }
        }

        // Show Empire Status
        async function showEmpireStatus() {
            addTerminalLine('Fetching empire status...', 'output');
            
            try {
                const response = await fetch('http://localhost:7777/api/empire/status');
                if (response.ok) {
                    const status = await response.json();
                    addTerminalLine(`Entities: ${status.entities}`, 'output');
                    addTerminalLine(`Actions: ${status.actions}`, 'output');
                    addTerminalLine(`Active Services: ${status.services}`, 'output');
                    addTerminalLine(`Health: ${status.health}%`, 'output');
                }
            } catch (error) {
                addTerminalLine('Failed to fetch empire status', 'error');
            }
        }

        // Generate Content
        async function generateContent(command) {
            addTerminalLine('Requesting content generation...', 'output');
            
            try {
                const response = await fetch('http://localhost:7777/api/content/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        command: command,
                        type: 'voice_request',
                        rarity: 'random'
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    addTerminalLine(`Content generation started: ${data.id}`, 'output');
                    addTerminalLine(`Rarity: ${data.rarity}`, 'output');
                }
            } catch (error) {
                addTerminalLine('Failed to generate content', 'error');
            }
        }

        // Search Documentation
        async function searchDocumentation(command) {
            const query = command.replace(/search documentation|search docs/gi, '').trim();
            addTerminalLine(`Searching documentation for: "${query}"`, 'output');
            
            try {
                const response = await fetch('http://localhost:7777/api/docs/search', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query: query })
                });
                
                if (response.ok) {
                    const results = await response.json();
                    addTerminalLine(`Found ${results.length} results:`, 'output');
                    results.slice(0, 3).forEach(result => {
                        addTerminalLine(`- ${result.title}: ${result.excerpt}`, 'output');
                    });
                }
            } catch (error) {
                addTerminalLine('Documentation search unavailable', 'error');
            }
        }

        // Show Blockchain Status
        async function showBlockchainStatus() {
            addTerminalLine('Fetching blockchain status...', 'output');
            // This would connect to your blockchain services
            addTerminalLine('ETH: Connected', 'output');
            addTerminalLine('BTC: Connected', 'output');
            addTerminalLine('SOL: Connected', 'output');
            addTerminalLine('XMR: Private mode', 'output');
        }

        // Show Help
        function showHelp() {
            addTerminalLine('Available commands:', 'output');
            addTerminalLine('- Talk to local administrator', 'output');
            addTerminalLine('- Show empire status', 'output');
            addTerminalLine('- Generate content [for domain]', 'output');
            addTerminalLine('- Search documentation [query]', 'output');
            addTerminalLine('- Show blockchain balances', 'output');
            addTerminalLine('- Help with [task]', 'output');
        }

        // Send to AI for interpretation
        async function sendToAI(command) {
            addTerminalLine('Processing with AI...', 'output');
            
            try {
                const response = await fetch('http://localhost:3001/api/ai/interpret', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ command: command })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    addTerminalLine(`AI: ${data.interpretation}`, 'output');
                    
                    if (data.suggested_action) {
                        addTerminalLine(`Suggested action: ${data.suggested_action}`, 'output');
                    }
                }
            } catch (error) {
                addTerminalLine('AI interpretation service unavailable', 'error');
            }
        }

        // Execute Empire Action
        async function executeEmpireAction(action) {
            // This would execute actions in the empire system
            addTerminalLine(`Action executed: ${action.type}`, 'output');
        }

        // Initialize Empire Connection
        function initializeEmpireConnection() {
            // WebSocket connection to empire system
            try {
                empireConnection = new WebSocket('ws://localhost:7788');
                
                empireConnection.onopen = function() {
                    document.getElementById('empire-status').textContent = 'Empire: ONLINE';
                    addTerminalLine('Connected to empire gaming system', 'output');
                };
                
                empireConnection.onmessage = function(event) {
                    const data = JSON.parse(event.data);
                    handleEmpireUpdate(data);
                };
                
                empireConnection.onerror = function() {
                    document.getElementById('empire-status').textContent = 'Empire: OFFLINE';
                };
            } catch (error) {
                document.getElementById('empire-status').textContent = 'Empire: DISCONNECTED';
            }
        }

        // Handle Empire Updates
        function handleEmpireUpdate(data) {
            if (data.type === 'entity_updated') {
                updateEntityDisplay(data.entity);
            } else if (data.type === 'action_logged') {
                addTerminalLine(`Empire action: ${data.action.action_type}`, 'output');
            }
        }

        // Initialize Blockchain Connections
        function initializeBlockchainConnections() {
            // This would initialize Web3 connections
            setTimeout(() => {
                document.getElementById('eth-balance').textContent = '0.0 ETH';
                document.getElementById('btc-balance').textContent = '0.0 BTC';
                document.getElementById('sol-balance').textContent = '0.0 SOL';
                document.getElementById('blockchain-status').textContent = 'Blockchain: CONNECTED';
            }, 2000);
        }

        // Load Empire Entities
        async function loadEmpireEntities() {
            try {
                const response = await fetch('http://localhost:7777/api/empire/entities');
                if (response.ok) {
                    const entities = await response.json();
                    displayEntities(entities);
                }
            } catch (error) {
                // Show example entities
                const exampleEntities = [
                    { id: 1, name: 'deathtodata.com', entity_type: 'domain', level: 5, health: 95, carrots: 1250 },
                    { id: 2, name: 'AI API Service', entity_type: 'service', level: 8, health: 88, carrots: 750 },
                    { id: 3, name: 'System Admin', entity_type: 'user', level: 100, health: 100, carrots: 5000 }
                ];
                displayEntities(exampleEntities);
            }
        }

        // Display Entities
        function displayEntities(entities) {
            const grid = document.getElementById('entitiesGrid');
            grid.innerHTML = '';
            
            entities.forEach(entity => {
                const card = document.createElement('div');
                card.className = 'entity-card';
                card.innerHTML = `
                    <div class="entity-name">${entity.display_name || entity.name}</div>
                    <div class="entity-type">${entity.entity_type.toUpperCase()}</div>
                    <div class="entity-stats">
                        <span>Lvl: ${entity.level}</span>
                        <span>HP: ${entity.health}%</span>
                        <span>ü•ï ${entity.carrots || 0}</span>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // Update System Status
        function updateSystemStatus() {
            // This would check all system status
            document.getElementById('ai-status').textContent = 'AI Assistant: READY';
        }

        // Setup Keyboard Shortcuts
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    executeCommand();
                } else if (e.ctrlKey && e.key === ' ') {
                    document.getElementById('voiceButton').click();
                }
            });
        }

        // Add Terminal Line
        function addTerminalLine(text, type = 'output') {
            const terminal = document.getElementById('outputTerminal');
            const line = document.createElement('div');
            line.className = 'terminal-line';
            
            if (type === 'command') {
                line.innerHTML = `<span class="terminal-prompt">empire@command-center:~$</span> <span class="terminal-command">${text}</span>`;
            } else if (type === 'error') {
                line.innerHTML = `<span class="terminal-error">${text}</span>`;
            } else {
                line.innerHTML = `<span class="terminal-output">${text}</span>`;
            }
            
            // Remove cursor line if it exists
            const cursor = terminal.querySelector('.terminal-line:last-child span[style*="blink"]');
            if (cursor) {
                cursor.parentElement.remove();
            }
            
            terminal.appendChild(line);
            
            // Add new cursor line
            const cursorLine = document.createElement('div');
            cursorLine.className = 'terminal-line';
            cursorLine.innerHTML = `<span class="terminal-prompt">empire@command-center:~$</span> <span style="animation: blink 1s infinite;">_</span>`;
            terminal.appendChild(cursorLine);
            
            terminal.scrollTop = terminal.scrollHeight;
        }

        // Update Entity Display
        function updateEntityDisplay(entity) {
            // Update entity in the grid
            loadEmpireEntities();
        }
    </script>
</body>
</html>