<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ AI-Powered Animated Sprites - No More Shitty Hand-Coded Graphics!</title>
    <style>
        :root {
            --bg-dark: #0a0a0a;
            --bg-medium: #1a1a1a;
            --bg-light: #2a2a2a;
            --text-primary: #ffffff;
            --accent: #00ff41;
            --error: #ff6b6b;
            --warning: #feca57;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-medium) 100%);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .header {
            text-align: center;
            padding: 30px;
            background: var(--bg-medium);
            border-bottom: 2px solid var(--accent);
        }

        .header h1 {
            font-size: 2.5rem;
            color: var(--accent);
            text-shadow: 0 0 20px var(--accent);
            margin-bottom: 10px;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .comparison-panel {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 25px;
            border: 2px solid;
        }

        .shitty {
            border-color: var(--error);
        }

        .awesome {
            border-color: var(--accent);
        }

        .panel-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .shitty .panel-title {
            color: var(--error);
        }

        .awesome .panel-title {
            color: var(--accent);
        }

        .sprite-display {
            width: 300px;
            height: 300px;
            margin: 0 auto 20px;
            border: 2px solid var(--accent);
            background: var(--bg-dark);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .ai-controls {
            background: var(--bg-dark);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .prompt-input {
            width: 100%;
            padding: 10px;
            background: var(--bg-medium);
            border: 1px solid var(--accent);
            color: var(--text-primary);
            border-radius: 4px;
            font-family: inherit;
            margin-bottom: 10px;
        }

        .generate-btn {
            background: var(--accent);
            color: var(--bg-dark);
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-family: inherit;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
        }

        .generate-btn:hover {
            background: #00cc35;
            transform: translateY(-2px);
        }

        .generate-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .api-setup {
            background: var(--bg-medium);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .api-key-input {
            width: 100%;
            padding: 8px;
            background: var(--bg-dark);
            border: 1px solid var(--accent);
            color: var(--text-primary);
            border-radius: 4px;
            font-family: inherit;
            margin-bottom: 10px;
        }

        .cost-display {
            background: var(--warning);
            color: var(--bg-dark);
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            text-align: center;
            font-weight: bold;
        }

        .animation-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .anim-btn {
            flex: 1;
            padding: 8px;
            background: var(--bg-dark);
            border: 1px solid var(--accent);
            color: var(--accent);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .anim-btn:hover, .anim-btn.active {
            background: var(--accent);
            color: var(--bg-dark);
        }

        .log {
            background: var(--bg-dark);
            border: 1px solid var(--accent);
            border-radius: 4px;
            padding: 15px;
            height: 150px;
            overflow-y: auto;
            font-size: 0.9rem;
            margin-top: 15px;
        }

        .log-entry {
            margin-bottom: 5px;
        }

        .log-entry.success {
            color: var(--accent);
        }

        .log-entry.error {
            color: var(--error);
        }

        .log-entry.warning {
            color: var(--warning);
        }

        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ü§ñ AI vs Hand-Coded Sprites</h1>
        <p>Finally, graphics that don't look like absolute shit!</p>
    </div>

    <div class="comparison">
        <!-- Shitty Hand-Coded Side -->
        <div class="comparison-panel shitty">
            <div class="panel-title">üí© Hand-Coded SVG (Garbage)</div>
            
            <div class="sprite-display" id="shittyDisplay">
                <!-- Load the terrible SVG we made earlier -->
                <svg width="200" height="200" viewBox="0 0 200 200">
                    <circle cx="100" cy="80" r="25" fill="#F5F5DC"/>
                    <circle cx="92" cy="75" r="4" fill="#000"/>
                    <circle cx="108" cy="75" r="4" fill="#000"/>
                    <line x1="50" y1="150" x2="90" y2="50" stroke="#8B4513" stroke-width="4"/>
                    <path d="M85 55 Q105 45 125 55" fill="#C0C0C0"/>
                    <text x="100" y="180" text-anchor="middle" fill="#666" font-size="12">This looks like shit</text>
                </svg>
            </div>

            <div style="color: var(--error); text-align: center;">
                <p><strong>Problems:</strong></p>
                <ul style="text-align: left; margin-top: 10px;">
                    <li>Looks like a 5-year-old drew it</li>
                    <li>No detail or character</li>
                    <li>Static and boring</li>
                    <li>Takes forever to hand-code</li>
                    <li>Doesn't match any art style</li>
                </ul>
            </div>
        </div>

        <!-- AI-Generated Side -->
        <div class="comparison-panel awesome">
            <div class="panel-title">üî• AI-Generated (Actually Good)</div>
            
            <div class="sprite-display" id="aiDisplay">
                <canvas id="aiCanvas" width="300" height="300"></canvas>
                <div id="aiPlaceholder" style="text-align: center; color: var(--accent);">
                    üé® Ready to generate awesome sprites!<br>
                    Add your API key below and click generate.
                </div>
            </div>

            <!-- API Setup -->
            <div class="api-setup">
                <h3 style="color: var(--accent); margin-bottom: 10px;">üîë API Configuration</h3>
                <input type="password" id="apiKey" class="api-key-input" placeholder="Replicate API Key (get from replicate.com/account)">
                <button onclick="saveAPIKey()" style="width: 100%; padding: 8px; background: var(--accent); color: var(--bg-dark); border: none; border-radius: 4px; cursor: pointer;">Save Key</button>
            </div>

            <!-- AI Controls -->
            <div class="ai-controls">
                <h3 style="color: var(--accent); margin-bottom: 10px;">ü§ñ AI Generation</h3>
                <input type="text" id="promptInput" class="prompt-input" 
                       value="menacing grim reaper with ornate glowing scythe, detailed pixel art, dark fantasy, 64x64">
                
                <button id="generateBtn" class="generate-btn" onclick="generateAISprite()">
                    üé® Generate Awesome Sprite
                </button>
                
                <div class="cost-display">
                    üí∞ Cost: ~$0.001-0.005 per generation (FLUX model)
                </div>
            </div>

            <!-- Animation Controls -->
            <div class="animation-controls">
                <button class="anim-btn active" onclick="setAnimation('idle')">Idle</button>
                <button class="anim-btn" onclick="setAnimation('attack')">Attack</button>
                <button class="anim-btn" onclick="setAnimation('transform')">Transform</button>
                <button class="anim-btn" onclick="setAnimation('death')">Death</button>
            </div>

            <!-- Generation Log -->
            <div class="log" id="generationLog">
                <div class="log-entry">üîÆ AI Sprite Generator Ready</div>
                <div class="log-entry">Add your Replicate API key to start generating</div>
                <div class="log-entry">Get API key at: https://replicate.com/account</div>
            </div>
        </div>
    </div>

    <!-- Load ANHK System -->
    <script src="ANHK-UNIFIED-LANGUAGE.js"></script>
    <script src="ANHK-ANIMATED-SPRITE-SYSTEM.js"></script>

    <script>
        // Initialize ANHK and animated sprite system
        const anhk = new ANHKLanguage();
        let animatedSprite = null;
        let currentGeneration = null;

        function log(message, type = 'info') {
            const logContainer = document.getElementById('generationLog');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `${new Date().toLocaleTimeString()} - ${message}`;
            logContainer.appendChild(entry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        function saveAPIKey() {
            const apiKey = document.getElementById('apiKey').value;
            if (apiKey) {
                localStorage.setItem('replicate_api_key', apiKey);
                log('API key saved successfully!', 'success');
                document.getElementById('apiKey').value = '';
            } else {
                log('Please enter an API key', 'error');
            }
        }

        async function generateAISprite() {
            const prompt = document.getElementById('promptInput').value;
            const generateBtn = document.getElementById('generateBtn');
            
            if (!localStorage.getItem('replicate_api_key')) {
                log('Please add your Replicate API key first', 'error');
                return;
            }

            try {
                generateBtn.disabled = true;
                generateBtn.textContent = 'üé® Generating... (30-60s)';
                
                log(`üé® Starting generation: "${prompt}"`, 'info');
                log('‚è±Ô∏è This may take 30-60 seconds...', 'warning');

                // Generate the sprite using ANHK AI system
                const result = await anhk.generateAIImage(prompt, 'pixel art', '512x512');
                
                if (result && result.imageUrl) {
                    log(`‚úÖ Generated successfully with ${result.service}!`, 'success');
                    log(`üí∞ Cost: $${result.cost}`, 'info');
                    
                    // Display the result
                    displayAISprite(result);
                    
                    // Initialize animated sprite system
                    initializeAnimatedSprite(result);
                    
                } else {
                    log('‚ùå Generation failed - check your API key', 'error');
                }
                
            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = 'üé® Generate Awesome Sprite';
            }
        }

        function displayAISprite(result) {
            const placeholder = document.getElementById('aiPlaceholder');
            const canvas = document.getElementById('aiCanvas');
            
            placeholder.style.display = 'none';
            canvas.style.display = 'block';
            
            // Draw the generated image to canvas
            const ctx = canvas.getContext('2d');
            const img = new Image();
            img.crossOrigin = 'anonymous';
            img.onload = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Center and scale the image
                const scale = Math.min(canvas.width / img.width, canvas.height / img.height);
                const x = (canvas.width - img.width * scale) / 2;
                const y = (canvas.height - img.height * scale) / 2;
                
                ctx.imageSmoothingEnabled = false; // Pixel perfect
                ctx.drawImage(img, x, y, img.width * scale, img.height * scale);
            };
            img.src = result.imageUrl;
            
            currentGeneration = result;
        }

        function initializeAnimatedSprite(result) {
            const canvas = document.getElementById('aiCanvas');
            
            // Create animated sprite system
            animatedSprite = new ANHKAnimatedSprite(canvas, result.canvas);
            
            log('üéÆ Animated sprite system initialized', 'success');
            log('Use animation controls to see different states', 'info');
        }

        function setAnimation(animName) {
            // Update button states
            document.querySelectorAll('.anim-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (animatedSprite) {
                animatedSprite.playAnimation(animName);
                log(`üé¨ Playing ${animName} animation`, 'info');
            } else {
                log('Generate a sprite first to use animations', 'warning');
            }
        }

        // Quick preset buttons
        function generatePreset(preset) {
            const presets = {
                grimreaper: "menacing grim reaper with ornate glowing scythe, detailed pixel art, dark fantasy, 64x64",
                wizard: "powerful wizard with staff, long robes, magical aura, pixel art, fantasy RPG style",
                warrior: "armored knight with sword and shield, detailed pixel art, medieval fantasy",
                dragon: "fierce dragon breathing fire, detailed pixel art, fantasy creature",
                demon: "demonic creature with horns and claws, dark pixel art, horror fantasy"
            };
            
            document.getElementById('promptInput').value = presets[preset];
            generateAISprite();
        }

        // Add preset buttons
        document.addEventListener('DOMContentLoaded', () => {
            const controls = document.querySelector('.ai-controls');
            const presetDiv = document.createElement('div');
            presetDiv.innerHTML = `
                <h4 style="color: var(--accent); margin: 15px 0 10px 0;">‚ö° Quick Presets</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
                    <button onclick="generatePreset('grimreaper')" class="anim-btn">üíÄ Grim Reaper</button>
                    <button onclick="generatePreset('wizard')" class="anim-btn">üßô Wizard</button>
                    <button onclick="generatePreset('warrior')" class="anim-btn">‚öîÔ∏è Warrior</button>
                    <button onclick="generatePreset('dragon')" class="anim-btn">üêâ Dragon</button>
                </div>
            `;
            controls.appendChild(presetDiv);

            // Load saved API key
            if (localStorage.getItem('replicate_api_key')) {
                log('üîë Saved API key found', 'success');
            }
        });

        // Export functions
        function exportSprite() {
            if (currentGeneration) {
                const link = document.createElement('a');
                link.download = 'ai-generated-sprite.png';
                link.href = currentGeneration.imageUrl;
                link.click();
                log('üì∏ Sprite exported!', 'success');
            }
        }

        // Add export button
        window.addEventListener('load', () => {
            const controls = document.querySelector('.ai-controls');
            const exportBtn = document.createElement('button');
            exportBtn.textContent = 'üì∏ Export Sprite';
            exportBtn.className = 'generate-btn';
            exportBtn.style.marginTop = '10px';
            exportBtn.onclick = exportSprite;
            controls.appendChild(exportBtn);
        });
    </script>
</body>
</html>