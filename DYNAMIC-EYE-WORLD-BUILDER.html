<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Eye World Builder - HollowTown Vision System</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            color: #0ff;
            font-family: 'Orbitron', monospace;
            overflow: hidden;
            cursor: none;
        }

        /* Main world canvas */
        #world-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 255, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 255, 136, 0.03) 0%, transparent 50%),
                #000;
        }

        /* Giant Eye in corner */
        #master-eye {
            position: fixed;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            top: 20px;
            right: 20px;
            background: 
                radial-gradient(circle at 35% 35%, 
                    rgba(255, 255, 255, 0.9) 0%,
                    rgba(240, 240, 240, 0.8) 20%,
                    rgba(200, 200, 200, 0.6) 40%,
                    rgba(100, 100, 100, 0.4) 80%,
                    rgba(0, 0, 0, 0.9) 100%
                );
            border: 6px solid #0ff;
            box-shadow: 
                0 0 50px #0ff,
                inset 0 0 30px rgba(0, 0, 0, 0.3),
                0 0 100px rgba(0, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s;
            z-index: 1000;
        }

        #master-eye:hover {
            transform: scale(1.05);
            box-shadow: 
                0 0 80px #0ff,
                inset 0 0 30px rgba(0, 0, 0, 0.3),
                0 0 150px rgba(0, 255, 255, 0.5);
        }

        /* Iris and pupil */
        .master-iris {
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: 
                radial-gradient(circle at 40% 30%, 
                    #00ffff 0%,
                    #0088cc 30%,
                    #004466 60%,
                    #002233 90%,
                    #000000 100%
                );
            transition: all 0.1s ease-out;
        }

        .master-pupil {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: 
                radial-gradient(circle at 30% 30%, 
                    #333 0%,
                    #111 50%,
                    #000 100%
                );
            transition: all 0.1s ease-out;
        }

        /* Eyelid animation */
        .eyelid {
            position: absolute;
            width: 100%;
            height: 50%;
            background: linear-gradient(to bottom, #333, #000);
            transition: all 0.3s;
            z-index: 10;
        }

        .eyelid.top {
            top: 0;
            border-radius: 150px 150px 0 0;
            transform-origin: bottom;
        }

        .eyelid.bottom {
            bottom: 0;
            border-radius: 0 0 150px 150px;
            transform-origin: top;
        }

        .blink .eyelid.top {
            transform: scaleY(2);
        }

        .blink .eyelid.bottom {
            transform: scaleY(2);
        }

        /* Vision rays emanating from eye */
        .vision-ray {
            position: absolute;
            width: 2px;
            background: linear-gradient(0deg, 
                rgba(0, 255, 255, 0) 0%,
                rgba(0, 255, 255, 0.8) 20%,
                rgba(0, 255, 255, 0.4) 80%,
                rgba(0, 255, 255, 0) 100%
            );
            transform-origin: bottom center;
            transition: all 0.2s;
            pointer-events: none;
            z-index: 500;
        }

        /* Dynamic world sections */
        .world-section {
            position: absolute;
            opacity: 0;
            transform: scale(0) rotate(45deg);
            transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            overflow: hidden;
        }

        .world-section.materializing {
            animation: materialization 2s ease-out;
        }

        @keyframes materialization {
            0% {
                opacity: 0;
                transform: scale(0) rotate(45deg);
                border-color: transparent;
                box-shadow: none;
            }
            25% {
                border-color: #0ff;
                box-shadow: 0 0 20px #0ff;
            }
            50% {
                opacity: 0.5;
                transform: scale(0.5) rotate(22deg);
                box-shadow: 0 0 40px #0ff, inset 0 0 20px rgba(0, 255, 255, 0.2);
            }
            75% {
                opacity: 0.8;
                transform: scale(0.9) rotate(5deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
                border-color: #0ff;
                box-shadow: 0 0 30px rgba(0, 255, 255, 0.4);
            }
        }

        .world-section.revealed {
            opacity: 1;
            transform: scale(1) rotate(0deg);
            border-color: #0ff;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.4);
        }

        /* Film-style content in sections */
        .section-content {
            padding: 20px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
        }

        .section-title {
            color: #0ff;
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 0 0 10px #0ff;
        }

        .section-subtitle {
            color: #ccc;
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .section-value {
            color: #00ff88;
            font-size: 2rem;
            font-weight: 900;
            text-shadow: 0 0 15px #00ff88;
        }

        .section-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            animation: iconFloat 3s ease-in-out infinite;
        }

        @keyframes iconFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Film grain overlay on sections */
        .section-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle, #fff 1px, transparent 1px);
            background-size: 4px 4px;
            opacity: 0.05;
            animation: filmGrain 0.3s steps(10) infinite;
            pointer-events: none;
        }

        @keyframes filmGrain {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(-1px, -1px); }
            50% { transform: translate(1px, -1px); }
            75% { transform: translate(-1px, 1px); }
        }

        /* Construction effect */
        .construction-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.3) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.3) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0;
            transition: opacity 0.5s;
            pointer-events: none;
            z-index: 2000;
        }

        .construction-grid.active {
            opacity: 1;
            animation: gridScan 2s ease-in-out;
        }

        @keyframes gridScan {
            0% { background-position: 0 0; }
            100% { background-position: 20px 20px; }
        }

        /* Laser construction beams */
        .laser-beam {
            position: absolute;
            width: 3px;
            background: linear-gradient(0deg,
                transparent 0%,
                #ff00ff 20%,
                #fff 50%,
                #ff00ff 80%,
                transparent 100%
            );
            box-shadow: 0 0 10px #ff00ff;
            transform-origin: bottom center;
            opacity: 0;
            z-index: 600;
        }

        .laser-beam.firing {
            opacity: 1;
            animation: laserPulse 0.5s ease-out;
        }

        @keyframes laserPulse {
            0% { 
                transform: scaleY(0);
                box-shadow: 0 0 5px #ff00ff;
            }
            50% {
                transform: scaleY(1);
                box-shadow: 0 0 20px #ff00ff, 0 0 40px #ff00ff;
            }
            100% {
                transform: scaleY(1);
                box-shadow: 0 0 10px #ff00ff;
            }
        }

        /* HUD overlay */
        #hud {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #0ff;
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            min-width: 280px;
            z-index: 1500;
        }

        .hud-title {
            color: #0ff;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .hud-item {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            font-size: 14px;
        }

        .hud-label {
            color: #ccc;
        }

        .hud-value {
            color: #00ff88;
            font-weight: bold;
        }

        /* Eye tracking crosshair */
        .tracking-crosshair {
            position: absolute;
            width: 30px;
            height: 30px;
            border: 2px solid #ff0080;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 1200;
            transition: all 0.1s;
        }

        .tracking-crosshair::before,
        .tracking-crosshair::after {
            content: '';
            position: absolute;
            background: #ff0080;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .tracking-crosshair::before {
            width: 2px;
            height: 15px;
        }

        .tracking-crosshair::after {
            width: 15px;
            height: 2px;
        }

        .tracking-crosshair.scanning {
            animation: crosshairScan 1s ease-in-out infinite;
        }

        @keyframes crosshairScan {
            0%, 100% {
                border-color: #ff0080;
                box-shadow: 0 0 10px #ff0080;
            }
            50% {
                border-color: #fff;
                box-shadow: 0 0 20px #ff0080, 0 0 30px #fff;
                transform: translate(-50%, -50%) scale(1.2);
            }
        }

        /* Progress indicator */
        .build-progress {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #0ff;
            border-radius: 25px;
            padding: 15px 30px;
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 1500;
        }

        .progress-bar {
            width: 200px;
            height: 10px;
            background: rgba(0, 255, 255, 0.2);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0ff, #00ff88);
            width: 0%;
            transition: width 0.5s ease-out;
            border-radius: 5px;
        }

        /* Instructions */
        #instructions {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #0ff;
            border-radius: 10px;
            padding: 15px;
            max-width: 250px;
            font-size: 12px;
            z-index: 1500;
        }

        .instruction-item {
            margin: 5px 0;
            color: #ccc;
        }

        .instruction-item::before {
            content: '▶ ';
            color: #0ff;
        }
    </style>
</head>
<body>
    <div id="world-canvas">
        <div class="construction-grid" id="construction-grid"></div>
        
        <!-- Master Eye -->
        <div id="master-eye">
            <div class="eyelid top"></div>
            <div class="master-iris">
                <div class="master-pupil"></div>
            </div>
            <div class="eyelid bottom"></div>
        </div>
        
        <!-- Tracking crosshair -->
        <div class="tracking-crosshair" id="crosshair"></div>
        
        <!-- HUD -->
        <div id="hud">
            <div class="hud-title">👁️ VISION SYSTEM</div>
            <div class="hud-item">
                <span class="hud-label">Eye Position:</span>
                <span class="hud-value" id="eye-position">0, 0</span>
            </div>
            <div class="hud-item">
                <span class="hud-label">Sections Built:</span>
                <span class="hud-value" id="sections-count">0/15</span>
            </div>
            <div class="hud-item">
                <span class="hud-label">Focus Target:</span>
                <span class="hud-value" id="focus-target">None</span>
            </div>
            <div class="hud-item">
                <span class="hud-label">Build Mode:</span>
                <span class="hud-value" id="build-mode">Eye Tracking</span>
            </div>
            <div class="hud-item">
                <span class="hud-label">Total Value:</span>
                <span class="hud-value" id="total-value">$0</span>
            </div>
        </div>
        
        <!-- Progress bar -->
        <div class="build-progress">
            <span style="color: #0ff;">World Construction:</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <span style="color: #00ff88;" id="progress-text">0%</span>
        </div>
        
        <!-- Instructions -->
        <div id="instructions">
            <h4 style="color: #0ff; margin-bottom: 10px;">EYE CONTROLS</h4>
            <div class="instruction-item">Move mouse to control eye</div>
            <div class="instruction-item">Click eye to scan & build</div>
            <div class="instruction-item">Hold SPACE for rapid build</div>
            <div class="instruction-item">Press B to blink</div>
            <div class="instruction-item">Press R to reset world</div>
        </div>
    </div>

    <script>
        class DynamicEyeWorldBuilder {
            constructor() {
                this.masterEye = document.getElementById('master-eye');
                this.iris = this.masterEye.querySelector('.master-iris');
                this.pupil = this.masterEye.querySelector('.master-pupil');
                this.crosshair = document.getElementById('crosshair');
                this.constructionGrid = document.getElementById('construction-grid');
                
                this.mouseX = window.innerWidth / 2;
                this.mouseY = window.innerHeight / 2;
                this.eyeTargetX = 0;
                this.eyeTargetY = 0;
                
                this.worldSections = [];
                this.builtSections = 0;
                this.totalSections = 15;
                this.buildingInProgress = false;
                this.rapidBuildMode = false;
                this.currentFocus = null;
                
                this.visionRays = [];
                this.totalValue = 0;
                
                this.init();
            }
            
            init() {
                this.setupWorldSections();
                this.setupEventListeners();
                this.startEyeTracking();
                this.startBlinkCycle();
                this.updateHUD();
                
                console.log('👁️ Dynamic Eye World Builder initialized');
            }
            
            setupWorldSections() {
                const sections = [
                    // HollowTown branding
                    { type: 'brand', title: 'HollowTown', subtitle: 'Privacy-First Economy', icon: '🏠', value: '', x: 50, y: 50, w: 250, h: 150 },
                    
                    // Privacy guarantees  
                    { type: 'privacy', title: 'Zero Data Collection', subtitle: 'Your Privacy Guaranteed', icon: '🛡️', value: '100%', x: 350, y: 50, w: 280, h: 150 },
                    { type: 'privacy', title: 'Local Calculation', subtitle: 'No Server Storage', icon: '💻', value: '100%', x: 680, y: 50, w: 250, h: 150 },
                    
                    // Apps showcase
                    { type: 'app', title: 'AI Storybook', subtitle: 'Laser/Voxel Stories', icon: '📖', value: '$23', x: 100, y: 250, w: 200, h: 180 },
                    { type: 'app', title: 'AI Game World', subtitle: 'Autonomous Characters', icon: '🎮', value: '$31', x: 320, y: 250, w: 200, h: 180 },
                    { type: 'app', title: 'Character Engine', subtitle: 'Smooth Physics', icon: '🎭', value: '$18', x: 540, y: 250, w: 200, h: 180 },
                    { type: 'app', title: 'Swarm Orchestrator', subtitle: 'Lightning Coordination', icon: '⚡', value: '$45', x: 760, y: 250, w: 200, h: 180 },
                    
                    // Monthly earnings
                    { type: 'earnings', title: 'Content Creation', subtitle: 'Monthly Income', icon: '✍️', value: '$67', x: 150, y: 470, w: 220, h: 120 },
                    { type: 'earnings', title: 'AI Collaboration', subtitle: 'Monthly Income', icon: '🤖', value: '$89', x: 390, y: 470, w: 220, h: 120 },
                    { type: 'earnings', title: 'Data Sovereignty', subtitle: 'Monthly Income', icon: '📊', value: '$52', x: 630, y: 470, w: 220, h: 120 },
                    
                    // Annual projections
                    { type: 'projection', title: 'Annual Earnings', subtitle: 'Total Income', icon: '💰', value: '$2,496', x: 200, y: 620, w: 250, h: 100 },
                    { type: 'projection', title: 'Privacy Savings', subtitle: 'Data Not Sold', icon: '💵', value: '$387', x: 470, y: 620, w: 250, h: 100 },
                    { type: 'projection', title: 'Total Value', subtitle: 'Annual Worth', icon: '🏆', value: '$2,883', x: 740, y: 620, w: 180, h: 100 },
                    
                    // Call to action
                    { type: 'action', title: 'Start Earning', subtitle: 'Join HollowTown', icon: '🚀', value: 'FREE', x: 400, y: 750, w: 300, h: 80 },
                    { type: 'action', title: 'Try Apps Now', subtitle: 'No Signup Required', icon: '▶️', value: 'INSTANT', x: 50, y: 750, w: 300, h: 80 }
                ];
                
                sections.forEach((section, index) => {
                    const element = this.createSectionElement(section, index);
                    document.getElementById('world-canvas').appendChild(element);
                    
                    this.worldSections.push({
                        element: element,
                        data: section,
                        index: index,
                        built: false,
                        buildTimer: null
                    });
                });
            }
            
            createSectionElement(section, index) {
                const element = document.createElement('div');
                element.className = 'world-section';
                element.style.left = section.x + 'px';
                element.style.top = section.y + 'px';
                element.style.width = section.w + 'px';
                element.style.height = section.h + 'px';
                element.id = `section-${index}`;
                
                // Add type-specific styling
                if (section.type === 'brand') {
                    element.style.borderColor = '#00ff88';
                    element.style.background = 'linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 255, 136, 0.05))';
                } else if (section.type === 'privacy') {
                    element.style.borderColor = '#ffff00';
                    element.style.background = 'linear-gradient(135deg, rgba(255, 255, 0, 0.2), rgba(255, 255, 0, 0.05))';
                } else if (section.type === 'app') {
                    element.style.borderColor = '#ff6600';
                    element.style.background = 'linear-gradient(135deg, rgba(255, 102, 0, 0.2), rgba(255, 102, 0, 0.05))';
                } else if (section.type === 'earnings') {
                    element.style.borderColor = '#ff00ff';
                    element.style.background = 'linear-gradient(135deg, rgba(255, 0, 255, 0.2), rgba(255, 0, 255, 0.05))';
                } else if (section.type === 'projection') {
                    element.style.borderColor = '#00ffff';
                    element.style.background = 'linear-gradient(135deg, rgba(0, 255, 255, 0.2), rgba(0, 255, 255, 0.05))';
                } else if (section.type === 'action') {
                    element.style.borderColor = '#00ff00';
                    element.style.background = 'linear-gradient(135deg, rgba(0, 255, 0, 0.2), rgba(0, 255, 0, 0.05))';
                }
                
                element.innerHTML = `
                    <div class="section-content">
                        <div class="section-icon">${section.icon}</div>
                        <div class="section-title">${section.title}</div>
                        <div class="section-subtitle">${section.subtitle}</div>
                        ${section.value ? `<div class="section-value">${section.value}</div>` : ''}
                    </div>
                `;
                
                return element;
            }
            
            setupEventListeners() {
                // Mouse tracking
                document.addEventListener('mousemove', (e) => {
                    this.mouseX = e.clientX;
                    this.mouseY = e.clientY;
                });
                
                // Eye click for scanning
                this.masterEye.addEventListener('click', () => {
                    this.performVisionScan();
                });
                
                // Keyboard controls
                document.addEventListener('keydown', (e) => {
                    switch (e.code) {
                        case 'Space':
                            e.preventDefault();
                            this.rapidBuildMode = true;
                            this.startRapidBuild();
                            break;
                        case 'KeyB':
                            this.triggerBlink();
                            break;
                        case 'KeyR':
                            this.resetWorld();
                            break;
                    }
                });
                
                document.addEventListener('keyup', (e) => {
                    if (e.code === 'Space') {
                        this.rapidBuildMode = false;
                    }
                });
            }
            
            startEyeTracking() {
                setInterval(() => {
                    this.updateEyePosition();
                    this.updateCrosshair();
                    this.checkFocusTargets();
                    this.updateHUD();
                }, 16); // 60 FPS
            }
            
            updateEyePosition() {
                const eyeRect = this.masterEye.getBoundingClientRect();
                const eyeCenterX = eyeRect.left + eyeRect.width / 2;
                const eyeCenterY = eyeRect.top + eyeRect.height / 2;
                
                const deltaX = this.mouseX - eyeCenterX;
                const deltaY = this.mouseY - eyeCenterY;
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                
                const maxDisplacement = 40;
                const clampedDistance = Math.min(distance, maxDisplacement);
                const angle = Math.atan2(deltaY, deltaX);
                
                this.eyeTargetX = Math.cos(angle) * clampedDistance;
                this.eyeTargetY = Math.sin(angle) * clampedDistance;
                
                // Smooth eye movement
                const irisX = this.eyeTargetX * 0.7;
                const irisY = this.eyeTargetY * 0.7;
                const pupilX = this.eyeTargetX;
                const pupilY = this.eyeTargetY;
                
                this.iris.style.transform = `translate(calc(-50% + ${irisX}px), calc(-50% + ${irisY}px))`;
                this.pupil.style.transform = `translate(calc(-50% + ${pupilX}px), calc(-50% + ${pupilY}px))`;
                
                // Create vision rays occasionally
                if (Math.random() < 0.05) {
                    this.createVisionRay();
                }
            }
            
            updateCrosshair() {
                this.crosshair.style.left = this.mouseX + 'px';
                this.crosshair.style.top = this.mouseY + 'px';
            }
            
            createVisionRay() {
                const ray = document.createElement('div');
                ray.className = 'vision-ray';
                
                const eyeRect = this.masterEye.getBoundingClientRect();
                const startX = eyeRect.left + eyeRect.width / 2;
                const startY = eyeRect.top + eyeRect.height / 2;
                
                const deltaX = this.mouseX - startX;
                const deltaY = this.mouseY - startY;
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                const angle = Math.atan2(deltaY, deltaX) * (180 / Math.PI);
                
                ray.style.left = startX + 'px';
                ray.style.top = startY + 'px';
                ray.style.height = distance + 'px';
                ray.style.transform = `rotate(${angle + 90}deg)`;
                ray.style.transformOrigin = 'bottom center';
                
                document.body.appendChild(ray);
                
                setTimeout(() => {
                    ray.style.opacity = '0';
                    setTimeout(() => {
                        if (ray.parentNode) {
                            ray.parentNode.removeChild(ray);
                        }
                    }, 500);
                }, 100);
            }
            
            checkFocusTargets() {
                const focusRadius = 100;
                let currentFocus = null;
                
                this.worldSections.forEach(section => {
                    if (section.built) return;
                    
                    const sectionCenterX = section.data.x + section.data.w / 2;
                    const sectionCenterY = section.data.y + section.data.h / 2;
                    const distance = Math.sqrt(
                        Math.pow(this.mouseX - sectionCenterX, 2) +
                        Math.pow(this.mouseY - sectionCenterY, 2)
                    );
                    
                    if (distance <= focusRadius) {
                        currentFocus = section;
                        
                        if (!section.buildTimer) {
                            section.buildTimer = Date.now();
                        } else if (Date.now() - section.buildTimer > 1500) {
                            this.buildSection(section);
                        }
                    } else {
                        section.buildTimer = null;
                    }
                });
                
                this.currentFocus = currentFocus;
            }
            
            performVisionScan() {
                this.crosshair.classList.add('scanning');
                this.constructionGrid.classList.add('active');
                
                const scanRadius = 200;
                const sectionsInRange = this.worldSections.filter(section => {
                    if (section.built) return false;
                    
                    const sectionCenterX = section.data.x + section.data.w / 2;
                    const sectionCenterY = section.data.y + section.data.h / 2;
                    const distance = Math.sqrt(
                        Math.pow(this.mouseX - sectionCenterX, 2) +
                        Math.pow(this.mouseY - sectionCenterY, 2)
                    );
                    
                    return distance <= scanRadius;
                });
                
                // Build sections with staggered timing
                sectionsInRange.forEach((section, index) => {
                    setTimeout(() => {
                        this.buildSection(section);
                    }, index * 400);
                });
                
                // Remove scanning effects
                setTimeout(() => {
                    this.crosshair.classList.remove('scanning');
                    this.constructionGrid.classList.remove('active');
                }, 2000);
                
                console.log('🔍 Vision scan completed, building', sectionsInRange.length, 'sections');
            }
            
            buildSection(section) {
                if (section.built || this.buildingInProgress) return;
                
                this.buildingInProgress = true;
                section.built = true;
                
                // Create laser beam effect
                this.createLaserBeam(section);
                
                // Start materialization
                section.element.classList.add('materializing');
                
                setTimeout(() => {
                    section.element.classList.remove('materializing');
                    section.element.classList.add('revealed');
                    
                    // Add to total value
                    if (section.data.value && section.data.value.includes('$')) {
                        const value = parseInt(section.data.value.replace(/[$,]/g, ''));
                        if (!isNaN(value)) {
                            this.totalValue += value;
                        }
                    }
                    
                    this.builtSections++;
                    this.buildingInProgress = false;
                    
                    console.log('🏧 Built:', section.data.title);
                }, 2000);
            }
            
            createLaserBeam(section) {
                const beam = document.createElement('div');
                beam.className = 'laser-beam firing';
                
                const eyeRect = this.masterEye.getBoundingClientRect();
                const sectionCenterX = section.data.x + section.data.w / 2;
                const sectionCenterY = section.data.y + section.data.h / 2;
                
                const deltaX = sectionCenterX - (eyeRect.left + eyeRect.width / 2);
                const deltaY = sectionCenterY - (eyeRect.top + eyeRect.height / 2);
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                const angle = Math.atan2(deltaY, deltaX) * (180 / Math.PI);
                
                beam.style.left = (eyeRect.left + eyeRect.width / 2) + 'px';
                beam.style.top = (eyeRect.top + eyeRect.height / 2) + 'px';
                beam.style.height = distance + 'px';
                beam.style.transform = `rotate(${angle + 90}deg)`;
                
                document.body.appendChild(beam);
                
                setTimeout(() => {
                    beam.classList.remove('firing');
                    setTimeout(() => {
                        if (beam.parentNode) {
                            beam.parentNode.removeChild(beam);
                        }
                    }, 500);
                }, 1000);
            }
            
            startRapidBuild() {
                if (!this.rapidBuildMode) return;
                
                const unbuiltSections = this.worldSections.filter(s => !s.built);
                if (unbuiltSections.length === 0) return;
                
                const randomSection = unbuiltSections[Math.floor(Math.random() * unbuiltSections.length)];
                this.buildSection(randomSection);
                
                setTimeout(() => {
                    if (this.rapidBuildMode) {
                        this.startRapidBuild();
                    }
                }, 300);
            }
            
            triggerBlink() {
                this.masterEye.classList.add('blink');
                setTimeout(() => {
                    this.masterEye.classList.remove('blink');
                }, 300);
            }
            
            startBlinkCycle() {
                setInterval(() => {
                    if (Math.random() < 0.1) {
                        this.triggerBlink();
                    }
                }, 3000);
            }
            
            resetWorld() {
                this.worldSections.forEach(section => {
                    section.element.classList.remove('revealed', 'materializing');
                    section.built = false;
                    section.buildTimer = null;
                });
                
                this.builtSections = 0;
                this.totalValue = 0;
                this.currentFocus = null;
                
                console.log('🔄 World reset');
            }
            
            updateHUD() {
                document.getElementById('eye-position').textContent = `${Math.round(this.mouseX)}, ${Math.round(this.mouseY)}`;
                document.getElementById('sections-count').textContent = `${this.builtSections}/${this.totalSections}`;
                document.getElementById('focus-target').textContent = this.currentFocus ? this.currentFocus.data.title : 'None';
                document.getElementById('build-mode').textContent = this.rapidBuildMode ? 'Rapid Build' : 'Eye Tracking';
                document.getElementById('total-value').textContent = `$${this.totalValue.toLocaleString()}`;
                
                // Update progress bar
                const progress = (this.builtSections / this.totalSections) * 100;
                document.getElementById('progress-fill').style.width = progress + '%';
                document.getElementById('progress-text').textContent = Math.round(progress) + '%';
            }
        }
        
        // Initialize the dynamic eye world builder
        const eyeWorldBuilder = new DynamicEyeWorldBuilder();
        
        console.log('👁️ Dynamic Eye World Builder ready!');
        console.log('🌎 Watch the world build itself through your vision!');
    </script>
</body>
</html>