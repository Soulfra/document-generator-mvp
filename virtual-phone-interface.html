<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soulfra Virtual Phone - AI Gaming Interface</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0a23 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow: hidden;
            user-select: none;
        }
        
        .phone-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at center, #1a1a2e 0%, #0a0a0a 100%);
        }
        
        .phone-frame {
            width: 350px;
            height: 700px;
            background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
            border-radius: 40px;
            box-shadow: 
                0 0 0 3px #333,
                0 0 0 6px #222,
                0 20px 40px rgba(0,0,0,0.8),
                inset 0 1px 0 rgba(255,255,255,0.1);
            position: relative;
            padding: 20px;
            border: 2px solid #444;
        }
        
        .phone-screen {
            width: 100%;
            height: 100%;
            background: #000;
            border-radius: 30px;
            border: 2px solid #333;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.8);
        }
        
        .screen-header {
            height: 60px;
            background: linear-gradient(90deg, #1a1a2e, #16213e);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            border-bottom: 1px solid #333;
        }
        
        .carrier-info {
            font-size: 14px;
            font-weight: 600;
            color: #00ffff;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .status-indicators {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .signal-bars {
            display: flex;
            gap: 2px;
        }
        
        .bar {
            width: 3px;
            background: #00ff41;
            border-radius: 1px;
        }
        
        .bar:nth-child(1) { height: 6px; }
        .bar:nth-child(2) { height: 10px; }
        .bar:nth-child(3) { height: 14px; }
        .bar:nth-child(4) { height: 18px; }
        
        .battery {
            width: 25px;
            height: 12px;
            border: 2px solid #00ff41;
            border-radius: 2px;
            position: relative;
        }
        
        .battery::after {
            content: '';
            position: absolute;
            right: -4px;
            top: 3px;
            width: 2px;
            height: 4px;
            background: #00ff41;
            border-radius: 0 1px 1px 0;
        }
        
        .battery-fill {
            background: #00ff41;
            height: 100%;
            width: 80%;
            border-radius: 1px;
        }
        
        .main-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .ai-persona-switcher {
            height: 80px;
            background: linear-gradient(90deg, #16213e, #1a1a2e);
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            padding: 0 15px;
            gap: 10px;
        }
        
        .persona-btn {
            flex: 1;
            height: 50px;
            border: 2px solid transparent;
            border-radius: 12px;
            background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
            color: #fff;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .persona-btn.active {
            border-color: var(--persona-color);
            box-shadow: 0 0 15px var(--persona-color);
            background: linear-gradient(145deg, var(--persona-bg), #1a1a1a);
        }
        
        .persona-btn[data-persona="copilot"] {
            --persona-color: #00ffff;
            --persona-bg: rgba(0, 255, 255, 0.1);
        }
        
        .persona-btn[data-persona="roughsparks"] {
            --persona-color: #ff4141;
            --persona-bg: rgba(255, 65, 65, 0.1);
        }
        
        .persona-btn[data-persona="satoshi"] {
            --persona-color: #ffff00;
            --persona-bg: rgba(255, 255, 0, 0.1);
        }
        
        .gaming-area {
            flex: 1;
            background: #0a0a0a;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        
        .game-canvas {
            flex: 1;
            background: linear-gradient(45deg, #1a1a2e 25%, transparent 25%),
                        linear-gradient(-45deg, #1a1a2e 25%, transparent 25%),
                        linear-gradient(45deg, transparent 75%, #1a1a2e 75%),
                        linear-gradient(-45deg, transparent 75%, #1a1a2e 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            position: relative;
            overflow: hidden;
        }
        
        .ai-chat-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 200px;
            background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.7), transparent);
            display: flex;
            flex-direction: column;
            padding: 15px;
            transform: translateY(160px);
            transition: transform 0.3s ease;
        }
        
        .ai-chat-overlay.expanded {
            transform: translateY(0);
        }
        
        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .chat-toggle {
            background: transparent;
            border: 1px solid #00ffff;
            color: #00ffff;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            line-height: 1.4;
        }
        
        .chat-input {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }
        
        .chat-input input {
            flex: 1;
            background: rgba(255,255,255,0.1);
            border: 1px solid #333;
            border-radius: 5px;
            padding: 8px;
            color: #fff;
            font-size: 12px;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .chat-send {
            background: #00ffff;
            border: none;
            color: #000;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .phone-controls {
            height: 60px;
            background: linear-gradient(90deg, #1a1a2e, #16213e);
            border-top: 1px solid #333;
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 0 20px;
        }
        
        .control-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #00ffff;
            border-radius: 50%;
            background: transparent;
            color: #00ffff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }
        
        .area-code-display {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            padding: 10px 15px;
            border-radius: 10px;
            border: 1px solid #00ffff;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .area-code-label {
            font-size: 10px;
            color: #888;
            margin-bottom: 2px;
        }
        
        .area-code-number {
            font-size: 16px;
            font-weight: 700;
            color: #00ffff;
        }
        
        .data-scraping-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 15px;
            height: 15px;
            border: 2px solid #00ff41;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            opacity: 0;
        }
        
        .data-scraping-indicator.active {
            opacity: 1;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .status-bar {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            height: 30px;
            background: rgba(0,0,0,0.7);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            color: #00ffff;
        }
        
        .external-controls {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .external-btn {
            width: 60px;
            height: 60px;
            border: 2px solid #ff4141;
            border-radius: 50%;
            background: rgba(255, 65, 65, 0.1);
            color: #ff4141;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
        }
        
        .external-btn:hover {
            background: rgba(255, 65, 65, 0.3);
            box-shadow: 0 0 20px rgba(255, 65, 65, 0.5);
        }
        
        .connection-status {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            gap: 15px;
        }
        
        .service-indicator {
            padding: 8px 12px;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            font-weight: 600;
            border: 1px solid transparent;
        }
        
        .service-indicator.connected {
            background: rgba(0, 255, 65, 0.2);
            border-color: #00ff41;
            color: #00ff41;
        }
        
        .service-indicator.disconnected {
            background: rgba(255, 65, 65, 0.2);
            border-color: #ff4141;
            color: #ff4141;
        }
        
        .etch-sketch-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 10;
        }
        
        .drawing-canvas {
            width: 100%;
            height: 100%;
            pointer-events: auto;
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .phone-frame {
                width: 90vw;
                height: 90vh;
            }
            
            .external-controls {
                position: fixed;
                bottom: 20px;
                right: 20px;
                flex-direction: row;
                transform: none;
            }
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <!-- Connection Status -->
        <div class="connection-status">
            <div class="service-indicator" id="copilot-status">COPILOT</div>
            <div class="service-indicator" id="d2d-status">D2D</div>
            <div class="service-indicator" id="gaming-status">GAMING</div>
        </div>
        
        <!-- External Controls -->
        <div class="external-controls">
            <button class="external-btn" id="gameboy-mode" title="Gameboy Mode">üéÆ</button>
            <button class="external-btn" id="scraping-mode" title="Data Scraping">üì°</button>
            <button class="external-btn" id="streaming-mode" title="Streaming Mode">üìπ</button>
            <button class="external-btn" id="affiliate-mode" title="Affiliate Mode">üí∞</button>
        </div>
        
        <!-- Phone Frame -->
        <div class="phone-frame">
            <div class="phone-screen">
                <!-- Screen Header -->
                <div class="screen-header">
                    <div class="carrier-info" id="carrier-display">SOULFRA</div>
                    <div class="status-indicators">
                        <div class="signal-bars">
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                        </div>
                        <div class="battery">
                            <div class="battery-fill"></div>
                        </div>
                    </div>
                </div>
                
                <!-- AI Persona Switcher -->
                <div class="ai-persona-switcher">
                    <button class="persona-btn active" data-persona="copilot">
                        <div>COPILOT</div>
                        <div style="font-size: 10px; opacity: 0.7;">Assistant</div>
                    </button>
                    <button class="persona-btn" data-persona="roughsparks">
                        <div>ROUGH</div>
                        <div style="font-size: 10px; opacity: 0.7;">Enforcer</div>
                    </button>
                    <button class="persona-btn" data-persona="satoshi">
                        <div>SATOSHI</div>
                        <div style="font-size: 10px; opacity: 0.7;">Sage</div>
                    </button>
                </div>
                
                <!-- Main Gaming Area -->
                <div class="gaming-area">
                    <div class="game-canvas" id="game-canvas">
                        <!-- Area Code Display -->
                        <div class="area-code-display">
                            <div class="area-code-label">AREA CODE</div>
                            <div class="area-code-number" id="area-code">415</div>
                        </div>
                        
                        <!-- Data Scraping Indicator -->
                        <div class="data-scraping-indicator" id="scraping-indicator"></div>
                        
                        <!-- Etch-a-Sketch Drawing Overlay -->
                        <div class="etch-sketch-overlay">
                            <canvas class="drawing-canvas" id="drawing-canvas"></canvas>
                        </div>
                        
                        <!-- Status Bar -->
                        <div class="status-bar" id="status-display">
                            Ready - Select mode to begin
                        </div>
                    </div>
                    
                    <!-- AI Chat Overlay -->
                    <div class="ai-chat-overlay" id="chat-overlay">
                        <div class="chat-header">
                            <span id="active-persona">COPILOT</span>
                            <button class="chat-toggle" id="chat-toggle">‚ñ≤ CHAT</button>
                        </div>
                        <div class="chat-messages" id="chat-messages">
                            <div style="color: #00ffff;">[COPILOT] Ready for commands. Connect your phone number or start gaming.</div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="chat-input" placeholder="Type command or question...">
                            <button class="chat-send" id="chat-send">SEND</button>
                        </div>
                    </div>
                </div>
                
                <!-- Phone Controls -->
                <div class="phone-controls">
                    <button class="control-btn" id="home-btn" title="Home">üè†</button>
                    <button class="control-btn" id="back-btn" title="Back">‚óÄ</button>
                    <button class="control-btn" id="menu-btn" title="Menu">‚ò∞</button>
                    <button class="control-btn" id="power-btn" title="Power">‚ö°</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        console.log('üèÅ Virtual Phone Interface Loading...');
        
        // Configuration
        const CONFIG = {
            copilotService: 'ws://localhost:3007',
            d2dService: 'http://localhost:3009',
            areaCode: '415', // Default San Francisco
            phoneNumber: '+1415SOULFRA',
            gameMode: 'idle'
        };
        
        // Phone Interface Controller
        class VirtualPhoneInterface {
            constructor() {
                this.currentPersona = 'copilot';
                this.websocket = null;
                this.isConnected = false;
                this.gameMode = 'idle';
                this.scrapingActive = false;
                
                this.initializeInterface();
                this.connectToServices();
                this.setupEventListeners();
                this.initializeDrawing();
            }
            
            initializeInterface() {
                console.log('üì± Initializing virtual phone interface...');
                
                // Set initial area code
                document.getElementById('area-code').textContent = CONFIG.areaCode;
                
                // Initialize canvas
                const canvas = document.getElementById('drawing-canvas');
                canvas.width = canvas.parentElement.clientWidth;
                canvas.height = canvas.parentElement.clientHeight;
                
                this.updateStatus('System initialized - Ready for AI connection');
            }
            
            async connectToServices() {
                console.log('üîå Connecting to Soulfra services...');
                
                // Connect to Copilot service
                try {
                    this.websocket = new WebSocket(CONFIG.copilotService);
                    
                    this.websocket.onopen = () => {
                        console.log('‚úÖ Connected to Copilot service');
                        this.isConnected = true;
                        this.updateServiceStatus('copilot-status', 'connected');
                        this.addChatMessage('system', 'Connected to Soulfra AI network');
                    };
                    
                    this.websocket.onmessage = (event) => {
                        const data = JSON.parse(event.data);
                        this.handleAIResponse(data);
                    };
                    
                    this.websocket.onerror = (error) => {
                        console.error('Copilot connection error:', error);
                        this.updateServiceStatus('copilot-status', 'disconnected');
                    };
                    
                } catch (error) {
                    console.error('Failed to connect to Copilot service:', error);
                    this.updateServiceStatus('copilot-status', 'disconnected');
                }
                
                // Check D2D service
                this.checkD2DService();
                
                // Check gaming service
                this.checkGamingService();
            }
            
            async checkD2DService() {
                try {
                    const response = await fetch(`${CONFIG.d2dService}/health`);
                    if (response.ok) {
                        this.updateServiceStatus('d2d-status', 'connected');
                        console.log('‚úÖ D2D Research service available');
                    }
                } catch (error) {
                    this.updateServiceStatus('d2d-status', 'disconnected');
                    console.log('‚ùå D2D Research service unavailable');
                }
            }
            
            checkGamingService() {
                // Check if gameboy interface is available
                try {
                    // This would ping the gaming bridge service
                    this.updateServiceStatus('gaming-status', 'connected');
                    console.log('‚úÖ Gaming bridge available');
                } catch (error) {
                    this.updateServiceStatus('gaming-status', 'disconnected');
                }
            }
            
            setupEventListeners() {
                // Persona switching
                document.querySelectorAll('.persona-btn').forEach(btn => {
                    btn.addEventListener('click', () => this.switchPersona(btn.dataset.persona));
                });
                
                // External controls
                document.getElementById('gameboy-mode').addEventListener('click', () => this.activateGameboyMode());
                document.getElementById('scraping-mode').addEventListener('click', () => this.toggleDataScraping());
                document.getElementById('streaming-mode').addEventListener('click', () => this.activateStreamingMode());
                document.getElementById('affiliate-mode').addEventListener('click', () => this.activateAffiliateMode());
                
                // Phone controls
                document.getElementById('home-btn').addEventListener('click', () => this.homeAction());
                document.getElementById('back-btn').addEventListener('click', () => this.backAction());
                document.getElementById('menu-btn').addEventListener('click', () => this.menuAction());
                document.getElementById('power-btn').addEventListener('click', () => this.powerAction());
                
                // Chat controls
                document.getElementById('chat-toggle').addEventListener('click', () => this.toggleChat());
                document.getElementById('chat-send').addEventListener('click', () => this.sendChatMessage());
                document.getElementById('chat-input').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.sendChatMessage();
                });
                
                // Area code clicking for geographic targeting
                document.getElementById('area-code').addEventListener('click', () => this.showAreaCodeMenu());
            }
            
            initializeDrawing() {
                const canvas = document.getElementById('drawing-canvas');
                const ctx = canvas.getContext('2d');
                let drawing = false;
                
                ctx.strokeStyle = '#00ffff';
                ctx.lineWidth = 2;
                ctx.lineCap = 'round';
                
                canvas.addEventListener('mousedown', (e) => {
                    drawing = true;
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    ctx.beginPath();
                    ctx.moveTo(x, y);
                });
                
                canvas.addEventListener('mousemove', (e) => {
                    if (!drawing) return;
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    ctx.lineTo(x, y);
                    ctx.stroke();
                });
                
                canvas.addEventListener('mouseup', () => {
                    drawing = false;
                });
            }
            
            switchPersona(persona) {
                console.log(`üîÑ Switching to ${persona.toUpperCase()}`);
                
                // Update UI
                document.querySelectorAll('.persona-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelector(`[data-persona="${persona}"]`).classList.add('active');
                document.getElementById('active-persona').textContent = persona.toUpperCase();
                
                this.currentPersona = persona;
                
                // Send persona switch to AI service
                if (this.isConnected) {
                    this.websocket.send(JSON.stringify({
                        type: 'switch_persona',
                        persona: persona
                    }));
                }
                
                // Update chat with persona greeting
                const greetings = {
                    copilot: 'COPILOT online. How can I assist with technical tasks?',
                    roughsparks: 'ROUGHSPARKS activated. Time to get shit done. What\'s the problem?',
                    satoshi: 'SATOSHI ready. Let\'s think strategically about the bigger picture.'
                };
                
                this.addChatMessage(persona, greetings[persona]);
                this.updateStatus(`${persona.toUpperCase()} persona active`);
            }
            
            activateGameboyMode() {
                console.log('üéÆ Activating Gameboy Mode');
                this.gameMode = 'gameboy';
                this.updateStatus('Gameboy mode - Connect to existing gameboy remote');
                
                // This would bridge to the existing soulfra-gameboy-remote.html
                this.addChatMessage('system', 'Gameboy mode activated. Virtual controls ready.');
                
                // Change canvas appearance for gaming
                const canvas = document.getElementById('game-canvas');
                canvas.style.background = 'linear-gradient(45deg, #0a4a0a, #0a2a0a)';
            }
            
            toggleDataScraping() {
                this.scrapingActive = !this.scrapingActive;
                console.log(`üì° Data Scraping: ${this.scrapingActive ? 'ON' : 'OFF'}`);
                
                const indicator = document.getElementById('scraping-indicator');
                if (this.scrapingActive) {
                    indicator.classList.add('active');
                    this.updateStatus(`Scraping data for area code ${CONFIG.areaCode}`);
                    this.addChatMessage('system', `Data scraping activated for area code ${CONFIG.areaCode}`);
                    this.startDataScraping();
                } else {
                    indicator.classList.remove('active');
                    this.updateStatus('Data scraping stopped');
                    this.addChatMessage('system', 'Data scraping deactivated');
                }
            }
            
            activateStreamingMode() {
                console.log('üìπ Activating Streaming Mode');
                this.gameMode = 'streaming';
                this.updateStatus('Streaming mode - Ready for OBS/Streamlabs integration');
                this.addChatMessage('system', 'Streaming mode activated. Ready for content creation.');
                
                // This would integrate with OBS/Streamlabs APIs
            }
            
            activateAffiliateMode() {
                console.log('üí∞ Activating Affiliate Mode');
                this.gameMode = 'affiliate';
                this.updateStatus('Affiliate mode - Google/Firebase revenue tracking');
                this.addChatMessage('system', 'Affiliate mode activated. Revenue tracking enabled.');
                
                // This would connect to Google Affiliate/Firebase programs
            }
            
            async startDataScraping() {
                if (!this.scrapingActive) return;
                
                try {
                    // This would be the actual scraping logic
                    const mockData = {
                        areaCode: CONFIG.areaCode,
                        businesses: Math.floor(Math.random() * 100) + 50,
                        reviews: Math.floor(Math.random() * 500) + 200,
                        revenue: (Math.random() * 1000).toFixed(2)
                    };
                    
                    this.addChatMessage('d2d', `Scraped ${mockData.businesses} businesses, ${mockData.reviews} reviews. Potential revenue: $${mockData.revenue}`);
                    
                    // Continue scraping
                    setTimeout(() => this.startDataScraping(), 5000);
                } catch (error) {
                    console.error('Scraping error:', error);
                    this.scrapingActive = false;
                    document.getElementById('scraping-indicator').classList.remove('active');
                }
            }
            
            sendChatMessage() {
                const input = document.getElementById('chat-input');
                const message = input.value.trim();
                if (!message) return;
                
                this.addChatMessage('user', message);
                input.value = '';
                
                // Send to AI service
                if (this.isConnected) {
                    this.websocket.send(JSON.stringify({
                        type: 'chat',
                        message: message,
                        persona: this.currentPersona,
                        context: {
                            gameMode: this.gameMode,
                            areaCode: CONFIG.areaCode,
                            scrapingActive: this.scrapingActive
                        }
                    }));
                }
            }
            
            handleAIResponse(data) {
                switch (data.type) {
                    case 'chat_response':
                        this.addChatMessage(data.persona || this.currentPersona, data.message);
                        break;
                    case 'system_update':
                        this.updateStatus(data.message);
                        break;
                    case 'area_code_suggestion':
                        CONFIG.areaCode = data.areaCode;
                        document.getElementById('area-code').textContent = data.areaCode;
                        this.addChatMessage('system', `Area code changed to ${data.areaCode}`);
                        break;
                }
            }
            
            addChatMessage(sender, message) {
                const chatMessages = document.getElementById('chat-messages');
                const colors = {
                    system: '#888',
                    user: '#fff',
                    copilot: '#00ffff',
                    roughsparks: '#ff4141',
                    satoshi: '#ffff00',
                    d2d: '#ff6b00'
                };
                
                const messageDiv = document.createElement('div');
                messageDiv.innerHTML = `<span style="color: ${colors[sender] || '#fff'}">[${sender.toUpperCase()}]</span> ${message}`;
                messageDiv.style.marginBottom = '5px';
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            toggleChat() {
                const overlay = document.getElementById('chat-overlay');
                const toggle = document.getElementById('chat-toggle');
                
                if (overlay.classList.contains('expanded')) {
                    overlay.classList.remove('expanded');
                    toggle.textContent = '‚ñ≤ CHAT';
                } else {
                    overlay.classList.add('expanded');
                    toggle.textContent = '‚ñº CHAT';
                }
            }
            
            updateStatus(message) {
                document.getElementById('status-display').textContent = message;
                console.log('üì± Status:', message);
            }
            
            updateServiceStatus(elementId, status) {
                const element = document.getElementById(elementId);
                element.className = `service-indicator ${status}`;
            }
            
            homeAction() {
                this.gameMode = 'idle';
                this.updateStatus('Home - Select a mode to begin');
                const canvas = document.getElementById('game-canvas');
                canvas.style.background = '';
            }
            
            backAction() {
                this.addChatMessage('system', 'Back button pressed');
            }
            
            menuAction() {
                this.addChatMessage('system', 'Menu opened - Available modes: Gaming, Scraping, Streaming, Affiliate');
            }
            
            powerAction() {
                this.addChatMessage('system', 'Power button - Virtual phone interface reset');
                location.reload();
            }
            
            showAreaCodeMenu() {
                const newAreaCode = prompt('Enter area code for geographic targeting:', CONFIG.areaCode);
                if (newAreaCode && newAreaCode.match(/^\d{3}$/)) {
                    CONFIG.areaCode = newAreaCode;
                    document.getElementById('area-code').textContent = newAreaCode;
                    this.addChatMessage('system', `Area code changed to ${newAreaCode}`);
                    if (this.scrapingActive) {
                        this.addChatMessage('system', `Scraping target updated to area code ${newAreaCode}`);
                    }
                }
            }
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ Starting Virtual Phone Gaming Interface...');
            window.phoneInterface = new VirtualPhoneInterface();
        });
        
        // Export for external access
        window.VirtualPhoneInterface = VirtualPhoneInterface;
        window.CONFIG = CONFIG;
    </script>
</body>
</html>