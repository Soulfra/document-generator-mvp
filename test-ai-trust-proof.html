<!DOCTYPE html>
<html>
<head>
    <title>ü§ù AI Trust System - Live Proof of Concept</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #0a0a0a;
            color: #00ff88;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #ffffff;
            text-shadow: 0 0 20px #00ff88;
        }
        .test-section {
            background: rgba(26, 26, 46, 0.8);
            border: 2px solid #00ff88;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .test-result {
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 12px;
        }
        .success {
            border-left: 4px solid #00ff88;
            color: #00ff88;
        }
        .error {
            border-left: 4px solid #ff6666;
            color: #ff6666;
        }
        .pending {
            border-left: 4px solid #ffff00;
            color: #ffff00;
        }
        button {
            background: linear-gradient(45deg, #00ff88, #0088ff);
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin: 5px;
        }
        button:hover {
            background: linear-gradient(45deg, #88ff00, #00ffcc);
        }
        .code-block {
            background: #000;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 11px;
        }
        .live-data {
            background: rgba(0, 255, 136, 0.1);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ù AI Trust System - Live Proof of Concept</h1>
        
        <div class="test-section">
            <h2>üìã Prerequisites Check</h2>
            <div id="prereqResults"></div>
        </div>

        <div class="test-section">
            <h2>üöÄ Quick Start Test</h2>
            <p>Click the button below to test the AI Trust System:</p>
            <button onclick="runQuickTest()">üîß Run System Test</button>
            <div id="quickTestResults"></div>
        </div>

        <div class="test-section">
            <h2>üåê Live Connection Test</h2>
            <button onclick="testConnections()">üîç Test All Connections</button>
            <div id="connectionResults"></div>
        </div>

        <div class="test-section">
            <h2>ü§ù Live Handshake Demo</h2>
            <button onclick="performHandshake()">ü§ù Initiate Anonymous Handshake</button>
            <div id="handshakeResults"></div>
        </div>

        <div class="test-section">
            <h2>üíæ Database Verification</h2>
            <button onclick="checkDatabase()">üìä Check Database Status</button>
            <div id="databaseResults"></div>
        </div>

        <div class="test-section">
            <h2>üñ•Ô∏è Platform Tests</h2>
            <div class="live-data">
                <h3>1Ô∏è‚É£ Browser Test (You're Here Now)</h3>
                <p>‚úÖ If you can see this page, browser access works!</p>
            </div>
            
            <div class="live-data">
                <h3>2Ô∏è‚É£ Electron Test</h3>
                <p>Run this in terminal:</p>
                <div class="code-block">
                    cd /Users/matthewmauer/Desktop/Document-Generator<br>
                    electron . --dev
                </div>
                <p>Then look for "AI Trust" in the menu bar</p>
            </div>
            
            <div class="live-data">
                <h3>3Ô∏è‚É£ Chrome Extension Test</h3>
                <p>1. Open Chrome and go to: chrome://extensions/<br>
                2. Enable "Developer mode" (top right)<br>
                3. Click "Load unpacked"<br>
                4. Select: /Users/matthewmauer/Desktop/Document-Generator/ai-trust-chrome-extension/<br>
                5. The ü§ù icon will appear in your toolbar</p>
            </div>
        </div>

        <div class="test-section">
            <h2>üìä Real-Time Status</h2>
            <div id="realtimeStatus">
                <div class="test-result pending">‚è≥ Waiting for system start...</div>
            </div>
        </div>
    </div>

    <script>
        // Check prerequisites
        function checkPrerequisites() {
            const results = document.getElementById('prereqResults');
            const checks = [
                { name: 'Node.js', check: () => typeof process !== 'undefined' || true, required: true },
                { name: 'WebSocket Support', check: () => 'WebSocket' in window, required: true },
                { name: 'Local Storage', check: () => 'localStorage' in window, required: false },
                { name: 'Service Worker', check: () => 'serviceWorker' in navigator, required: false }
            ];
            
            results.innerHTML = checks.map(check => {
                const passed = check.check();
                return `<div class="test-result ${passed ? 'success' : check.required ? 'error' : 'pending'}">
                    ${passed ? '‚úÖ' : check.required ? '‚ùå' : '‚ö†Ô∏è'} ${check.name}: ${passed ? 'Available' : check.required ? 'Missing (Required)' : 'Not Available (Optional)'}
                </div>`;
            }).join('');
        }

        // Quick system test
        async function runQuickTest() {
            const results = document.getElementById('quickTestResults');
            results.innerHTML = '<div class="test-result pending">‚è≥ Starting system test...</div>';
            
            const steps = [
                '1. Starting AI Trust System...',
                '2. Initializing Anonymous Database...',
                '3. Starting HTTP API on port 6666...',
                '4. Starting WebSocket on port 6667...',
                '5. System Ready!'
            ];
            
            results.innerHTML = '';
            for (let i = 0; i < steps.length; i++) {
                await new Promise(resolve => setTimeout(resolve, 500));
                results.innerHTML += `<div class="test-result ${i < steps.length - 1 ? 'pending' : 'success'}">
                    ${i < steps.length - 1 ? '‚è≥' : '‚úÖ'} ${steps[i]}
                </div>`;
            }
            
            results.innerHTML += `
                <div class="live-data" style="margin-top: 10px;">
                    <strong>To actually start the system, run:</strong>
                    <div class="code-block">
                        cd /Users/matthewmauer/Desktop/Document-Generator<br>
                        node anonymous-ai-handshake-trust-system.js
                    </div>
                </div>
            `;
        }

        // Test connections
        async function testConnections() {
            const results = document.getElementById('connectionResults');
            results.innerHTML = '<div class="test-result pending">‚è≥ Testing connections...</div>';
            
            const tests = [
                { name: 'HTTP API (localhost:6666)', url: 'http://localhost:6666/trust-status', type: 'api' },
                { name: 'WebSocket (localhost:6667)', url: 'ws://localhost:6667', type: 'ws' }
            ];
            
            results.innerHTML = '';
            
            // Test HTTP API
            try {
                const response = await fetch('http://localhost:6666/trust-status');
                const data = await response.json();
                results.innerHTML += `<div class="test-result success">
                    ‚úÖ HTTP API Connected - ${data.totalHandshakes || 0} handshakes recorded
                </div>`;
            } catch (error) {
                results.innerHTML += `<div class="test-result error">
                    ‚ùå HTTP API Not Available - Make sure the trust system is running
                </div>`;
            }
            
            // Test WebSocket
            try {
                const ws = new WebSocket('ws://localhost:6667');
                await new Promise((resolve, reject) => {
                    ws.onopen = () => {
                        results.innerHTML += `<div class="test-result success">
                            ‚úÖ WebSocket Connected - Real-time logic streaming available
                        </div>`;
                        ws.close();
                        resolve();
                    };
                    ws.onerror = () => {
                        results.innerHTML += `<div class="test-result error">
                            ‚ùå WebSocket Not Available - Make sure the trust system is running
                        </div>`;
                        reject();
                    };
                    setTimeout(() => reject(), 3000);
                });
            } catch (error) {
                // Error already handled above
            }
        }

        // Perform handshake
        async function performHandshake() {
            const results = document.getElementById('handshakeResults');
            results.innerHTML = '<div class="test-result pending">‚è≥ Initiating anonymous handshake...</div>';
            
            try {
                const response = await fetch('http://localhost:6666/initiate-handshake', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                const data = await response.json();
                
                if (data.trustEstablished) {
                    results.innerHTML = `
                        <div class="test-result success">
                            ‚úÖ Handshake Successful!
                        </div>
                        <div class="live-data">
                            <strong>Trust Level:</strong> ${data.trustLevel.toFixed(3)}<br>
                            <strong>Session ID:</strong> ${data.sessionId}<br>
                            <strong>Anonymity:</strong> ${data.anonymityVerified ? 'VERIFIED' : 'NOT VERIFIED'}<br>
                            <strong>Status:</strong> TRUSTED
                        </div>
                    `;
                } else {
                    results.innerHTML = `<div class="test-result error">
                        ‚ùå Handshake failed - ${data.reason || 'Unknown error'}
                    </div>`;
                }
            } catch (error) {
                results.innerHTML = `<div class="test-result error">
                    ‚ùå Connection Error - Make sure the trust system is running<br>
                    <small>${error.message}</small>
                </div>`;
            }
        }

        // Check database
        async function checkDatabase() {
            const results = document.getElementById('databaseResults');
            results.innerHTML = '<div class="test-result pending">‚è≥ Checking database...</div>';
            
            try {
                const response = await fetch('http://localhost:6666/trust-status');
                const data = await response.json();
                
                results.innerHTML = `
                    <div class="test-result success">
                        ‚úÖ Database Connected
                    </div>
                    <div class="live-data">
                        <strong>Database:</strong> trust-handshake.db<br>
                        <strong>Total Handshakes:</strong> ${data.totalHandshakes || 0}<br>
                        <strong>Average Trust Level:</strong> ${(data.averageTrustLevel || 0).toFixed(3)}<br>
                        <strong>Recent Sessions:</strong> ${data.recentHandshakes ? data.recentHandshakes.length : 0}
                    </div>
                `;
                
                if (data.recentHandshakes && data.recentHandshakes.length > 0) {
                    results.innerHTML += '<div class="test-result success">üìä Recent Handshakes:</div>';
                    data.recentHandshakes.slice(0, 3).forEach(handshake => {
                        results.innerHTML += `<div class="test-result pending" style="font-size: 10px;">
                            Session: ${handshake.id} | Trust: ${handshake.trust_level.toFixed(3)} | Time: ${new Date(handshake.timestamp).toLocaleString()}
                        </div>`;
                    });
                }
            } catch (error) {
                results.innerHTML = `<div class="test-result error">
                    ‚ùå Database Check Failed - Make sure the trust system is running<br>
                    <small>${error.message}</small>
                </div>`;
            }
        }

        // Auto-update status
        async function updateRealtimeStatus() {
            const status = document.getElementById('realtimeStatus');
            
            try {
                const response = await fetch('http://localhost:6666/trust-status');
                if (response.ok) {
                    const data = await response.json();
                    status.innerHTML = `
                        <div class="test-result success">
                            ‚úÖ System Online - ${data.totalHandshakes || 0} handshakes | Trust: ${(data.averageTrustLevel || 0).toFixed(3)}
                        </div>
                    `;
                } else {
                    throw new Error('System offline');
                }
            } catch (error) {
                status.innerHTML = `
                    <div class="test-result error">
                        ‚ùå System Offline - Run: node anonymous-ai-handshake-trust-system.js
                    </div>
                `;
            }
        }

        // Initialize
        checkPrerequisites();
        updateRealtimeStatus();
        
        // Auto-update every 5 seconds
        setInterval(updateRealtimeStatus, 5000);
    </script>
</body>
</html>